<?xml version='1.0' encoding='UTF-8'?>
<template infosource="ims" type="infosource" version="1.0">

    <connectivity>
        <troubleshoot>
            <endpoints>
                <endpoint id="voiceconfig" verbose="false" lazy="true" type="ws" connecttimeout="5000" requesttimeout="20000">
                    <method>POST</method>
                    <url ignoreSSL="true">{url}/api/ims/2/getUserVoiceConfig</url>
                    <response type="json"/>
                    <args>
                        <arg type="path" id="url">
                            <value type="parameter" parameterid="par_ims_url"/>
                        </arg>
                        <arg type="header" id="Content-Type">
                            <value type="value"><content>application/json</content></value>
                        </arg>
                    </args>
                    <body contenttype="json">
                        <mapvalue id="in" type="string">
                            <value type="parameter" role="ots" parameterid="par_phone_number"/>
                        </mapvalue>
                    </body>
                </endpoint>

                <endpoint id="getFixedConfig" lazy="true" verbose="false" type="ws" connecttimeout="2000" requesttimeout="3000">
                    <method>GET</method>
                    <url ignoreSSL="false">{url}/voice-fixed/b2c/fixed/config/{msisdn}</url>
                    <args>
                        <arg type="path" id="url">
                            <value type="parameter" parameterid="par_apigw_url"/>
                        </arg>
                        <arg type="path" id="msisdn">
                                <!--<value type="value"><content>946063868</content></value>-->
                                <value type="parameter" role="ots" parameterid="par_phone_number"/>
                            </arg>
                        <arg type="header" id="accept">
                            <value type="value"><content>application/json</content></value>
                        </arg>
                        <arg type="header" id="X-API-KEY">
                            <!--<value type="value"><content>3856d065-83ff-4af8-b365-993fd84a1570</content></value>-->
                            <value type="value"><content>58ddd327-6f0d-46c4-ae3c-6729d7b3cd8c</content></value>
                        </arg>
                    </args>
                    <response type="json"/>
                </endpoint>

                <endpoint id="sip_info" lazy="true" verbose="false" type="ws" connecttimeout="5000" requesttimeout="20000">
                    <method>GET</method>
                    <url ignoreSSL="false">{url}/voice-fixed/b2c/fixed/config/{msisdn}/sipinfo</url>
                    <args>
                        <arg type="path" id="url">
                            <value type="parameter" parameterid="par_apigw_url"/>
                        </arg>
                        <arg type="path" id="msisdn">
                                <!--<value type="value"><content>946063868</content></value>-->
                                <value type="parameter" role="ots" parameterid="par_phone_number"/>
                            </arg>
                        <arg type="header" id="accept">
                            <value type="value"><content>application/json</content></value>
                        </arg>
                        <arg type="header" id="X-API-KEY">
                            <!--<value type="value"><content>3856d065-83ff-4af8-b365-993fd84a1570</content></value>-->
                            <value type="value"><content>58ddd327-6f0d-46c4-ae3c-6729d7b3cd8c</content></value>
                        </arg>
                    </args>
                    <response type="json"/>
                </endpoint>


                <endpoint id="sva_info" lazy="true" verbose="false" type="ws" connecttimeout="5000" requesttimeout="20000">
                    <method>GET</method>
                    <url ignoreSSL="false">{url}/voice-fixed/b2c/fixed/sva/{msisdn}</url>
                    <args>
                        <arg type="path" id="url">
                            <value type="parameter" parameterid="par_apigw_url"/>
                        </arg>
                        <arg type="path" id="msisdn">
                                <!--<value type="value"><content>946063868</content></value>-->
                                <value type="parameter" role="ots" parameterid="par_phone_number"/>
                            </arg>
                        <arg type="header" id="accept">
                            <value type="value"><content>application/json</content></value>
                        </arg>
                        <arg type="header" id="X-API-KEY">
                            <!--<value type="value"><content>3856d065-83ff-4af8-b365-993fd84a1570</content></value>-->
                            <value type="value"><content>58ddd327-6f0d-46c4-ae3c-6729d7b3cd8c</content></value>
                        </arg>
                    </args>
                    <response type="json"/>
                </endpoint>
            </endpoints>
        </troubleshoot>

        <action>
            <endpoints>
                <endpoint id="set_sva_configuration_block_and_forward" lazy="true" verbose="false" type="ws" connecttimeout="5000" requesttimeout="10000">
                    <method>PUT</method>
                    <url ignoreSSL="false">{url}/voice-fixed/b2c/fixed/sva/{msisdn}</url>
                    <args>
                        <arg type="path" id="url">
                            <value type="parameter" parameterid="par_apigw_url"/>
                        </arg>
                        <arg type="path" id="msisdn">
                                <!--<value type="value"><content>946063868</content></value>-->
                                <value type="parameter" role="ots" parameterid="par_phone_number"/>
                            </arg>
                        <arg type="header" id="Content-Type">
                            <value type="value"><content>application/json</content></value>
                        </arg>
                        <arg type="header" id="X-API-KEY">
                            <value type="value"><content>58ddd327-6f0d-46c4-ae3c-6729d7b3cd8c</content></value>
                        </arg>
                    </args>
                    <body contenttype="json">
                        <mapvalue id="service" type="string">
                            <value type="argument" argumentid="sva_service_configuration"/>
                        </mapvalue>
                        <mapvalue id="value" type="string">
                            <value type="argument" argumentid="service_value"/>
                        </mapvalue>
                        <mapvalue id="option" type="string">
                            <value type="value"><content>1</content></value>
                        </mapvalue>
                    </body>
                    <response type="json"/>
                </endpoint>

                <endpoint id="set_sva_list_configuration" lazy="true" verbose="false" type="ws" connecttimeout="5000" requesttimeout="7000">
                    <method>PUT</method>
                    <url ignoreSSL="false">{url}/voice-fixed/b2c/fixed/sva/{msisdn}</url>
                    <args>
                        <arg type="path" id="url">
                            <value type="parameter" parameterid="par_apigw_url"/>
                        </arg>
                        <arg type="path" id="msisdn">
                                <!--<value type="value"><content>946063868</content></value>-->
                                <value type="parameter" role="ots" parameterid="par_phone_number"/>
                            </arg>
                        <arg type="header" id="Content-Type">
                            <value type="value"><content>application/json</content></value>
                        </arg>
                        <arg type="header" id="X-API-KEY">
                            <value type="value"><content>58ddd327-6f0d-46c4-ae3c-6729d7b3cd8c</content></value>
                        </arg>
                    </args>
                    <body contenttype="json">
                        <mapvalue id="service" type="string">
                            <value type="argument" argumentid="sva_service_configuration"/>
                        </mapvalue>
                        <mapvalue id="value" type="string">
                            <value type="loopargument" loopargumentid="input_ob_list">
                                <firstvalues>
                                    <value type="argument" argumentid="list"/>
                                  </firstvalues>
                                  <values>
                                    <value type="value"><content>|</content></value>
                                    <value type="argument" argumentid="list"/>
                                  </values>
                            </value>
                        </mapvalue>
                        <mapvalue id="option" type="string">
                            <value type="value"><content>1</content></value>
                        </mapvalue>
                    </body>
                    <response type="json"/>
                </endpoint>

                <endpoint id="set_sva_configuration" lazy="true" verbose="false" type="ws" connecttimeout="5000" requesttimeout="7000">
                    <method>PUT</method>
                    <url ignoreSSL="false">{url}/voice-fixed/b2c/fixed/sva/{msisdn}</url>
                    <args>
                        <arg type="path" id="url">
                            <value type="parameter" parameterid="par_apigw_url"/>
                        </arg>
                        <arg type="path" id="msisdn">
                                <!--<value type="value"><content>946063868</content></value>-->
                                <value type="parameter" role="ots" parameterid="par_phone_number"/>
                            </arg>
                        <arg type="header" id="Content-Type">
                            <value type="value"><content>application/json</content></value>
                        </arg>
                        <arg type="header" id="X-API-KEY">
                            <value type="value"><content>58ddd327-6f0d-46c4-ae3c-6729d7b3cd8c</content></value>
                        </arg>
                    </args>
                    <body contenttype="json">
                        <mapvalue id="service" type="string">
                            <value type="argument" argumentid="sva_service_configuration"/>
                        </mapvalue>
                        <mapvalue id="value" type="string">
                            <value type="argument" argumentid="value"/>
                        </mapvalue>
                    </body>
                    <response type="json"/>
                </endpoint>

            </endpoints>
        </action>

    </connectivity>

    <parameters>
        <parameter id="par_apigw_url" type="value">
            <contents>
                <!-- <value type="infosource_table" infosource="lookup" endpointid="ip_list">.</value> -->
                <value type="parameter" role="ots">par_ip_list</value>
            </contents>
            <sequence>
                <!-- <operation type="transpose"/>
                <operation type="column_index">
                    <args><arg><value type="value">1</value></arg></args>
                </operation>
                <operation type="column_not_in_param">
                    <args><arg><value type="parameter" role="ots">par_errores</value></arg></args>
                </operation>
                <operation type="transpose"/> -->
                <operation type="column_index">
                    <args><arg><value type="value">1</value></arg></args>
                </operation>
                <operation type="column_equal">
                    <args><arg><value type="value">apigw_msa_prod</value></arg></args>
                </operation>
                <operation type="column_selector">
                    <args><arg><value type="value">2</value></arg></args>
                </operation>
            </sequence>
        </parameter>

        <parameter id="par_ims_url" type="value">
            <contents>
                <!-- <value type="infosource_table" infosource="lookup" endpointid="ip_list">.</value> -->
                <value type="parameter" role="ots">par_ip_list</value>
            </contents>
            <sequence>
                <!-- <operation type="transpose"/>
                <operation type="column_index">
                    <args><arg><value type="value">1</value></arg></args>
                </operation>
                <operation type="column_not_in_param">
                    <args><arg><value type="parameter" role="ots">par_errores</value></arg></args>
                </operation>
                <operation type="transpose"/> -->
                <operation type="column_index">
                    <args><arg><value type="value">1</value></arg></args>
                </operation>
                <operation type="column_equal">
                    <args><arg><value type="value">ims</value></arg></args>
                </operation>
                <operation type="column_selector">
                    <args><arg><value type="value">2</value></arg></args>
                </operation>
            </sequence>
        </parameter>
    </parameters>

    <checks>

    </checks>

</template>