<?xml version='1.0' encoding='UTF-8'?>
<template role="ticketing" type="role" version="2.0">


    <!-- ############################################################################################## -->
    <!-- Version 1.3                                                                                    -->
    <!--  - Parámetros de GetRepeatedIncidents y OpenIncidents, checks y tests para comprobar si hay	-->
    <!--	incidencias reiteradas y abiertas.									    					-->
    <!-- Version 1.2                                                                                    -->
    <!--  - Configurado el endpoint 'OpenIncidents' para realizar la invocación usando el serviceID 	-->
    <!--	como entrada.	   																			-->
    <!-- Version 1.1                                                                                    -->
    <!--  - Configurado el endpoint 'GetRepeatedIncidents' para realizar la invocación usando el 		-->
    <!--	serviceID como entrada.	  																	-->
    <!-- Version 1.0                                                                                    -->
    <!--  - Version de partida                                                                          -->
    <!-- ############################################################################################## -->

   
  
    <parameters>       

        <!-- ENDPOINT RESPONSE PARAMS -->
        	<!-- Parametros de GetProblemsAffectedNetwork - new obtener problemas afectados -->
	            <parameter id="par_gpan_http_code">
	                <contents>
	                	<value type="infosource_value" infosource="ticketing" endpointid="GPAN">_httpCode</value>
	                </contents> 
	            </parameter>

	            <parameter id="par_gpan_err_code">
	                <contents>
	                	<value type="infosource_value" infosource="ticketing" endpointid="GPAN">_errCode</value>
	                </contents>
	            </parameter>

	            <parameter id="par_gpan_err_desc">
	                <contents>
	                	<value type="infosource_value" infosource="ticketing" endpointid="GPAN">_errDesc</value>
	                </contents>
	            </parameter>
			
			<!-- SCB 20230322 - SP2603 - INICIO -->
			<!-- Parametros de GetProblemsAffectedNetwork - new obtener problemas afectados -->
	            <parameter id="par_oir_http_code">
	                <contents>
	                	<value type="infosource_value" infosource="ticketing" endpointid="OIR">_httpCode</value>
	                </contents> 
	            </parameter>

	            <parameter id="par_oir_err_code">
	                <contents>
	                	<value type="infosource_value" infosource="ticketing" endpointid="OIR">_errCode</value>
	                </contents>
	            </parameter>

	            <parameter id="par_oir_err_desc">
	                <contents>
	                	<value type="infosource_value" infosource="ticketing" endpointid="OIR">_errDesc</value>
	                </contents>
	            </parameter>
			<!-- SCB 20230322 - SP2603 - FIN -->

          	<!-- Parametros de GetRepeatedIncidents -->
	            <parameter id="par_gri_http_code">
	                <contents>
	                	<value type="infosource_value" infosource="ticketing" endpointid="GRI">_httpCode</value>
	                </contents> 
	            </parameter>

	            <parameter id="par_gri_err_code">
	                <contents>
	                	<value type="infosource_value"  infosource="ticketing" endpointid="GRI">_errCode</value>
	                </contents>
	            </parameter>

	            <parameter id="par_gri_err_desc">
	                <contents>
	                	<value type="infosource_value"  infosource="ticketing" endpointid="GRI">_errDesc</value>
	                </contents>
	            </parameter>
            
    		<!-- Parametros de OpenIncidents -->
	            <parameter id="par_oi_http_code">
	                <contents>
	                	<value type="infosource_value"  infosource="ticketing" endpointid="OI">_httpCode</value>
	                </contents> 
	            </parameter>

	            <parameter id="par_oi_err_code">
	                <contents>
	                	<value type="infosource_value" infosource="ticketing" endpointid="OI">_errCode</value>
	                </contents>
	            </parameter>

	            <parameter id="par_oi_err_desc">
	                <contents>
	                	<value type="infosource_value" infosource="ticketing" endpointid="OI">_errDesc</value>
	                </contents>
	            </parameter>

        <!-- PARAMETROS DE GetProblemsAffectedNetwork - new obtener problemas afectados -->
                <!-- este parametro se ha quedado para sacar posibles errores de esta llamada, con el fin de reutilizar-->
                <!--
	            <parameter id="par_gpan_base_table" type="table">
				  <contents>
				    <value type="infosource_table" infosource="ticketing" endpointid="data">s:Envelope.s:Body.GetProblemsAffectedNetworkResponse.Response.</value>
				  </contents>
				  <sequence>
				    <operation type="transpose"/>
				  </sequence>
				</parameter>

				
				<parameter id="par_gpan_faultcode_value" type="table">
	              <contents>
	              	<value type="infosource_value" infosource="ticketing" endpointid="GPAN">s:Envelope.s:Body.s:Fault.s:Code.s:Value</value>
	              </contents>
				</parameter>

				<parameter id="par_gpan_faultreason_text" type="table">
	              <contents>
	              	<value type="infosource_value" infosource="ticketing" endpointid="GPAN">s:Envelope.s:Body.s:Fault.s:Reason.s:Text</value>
	              </contents>
				</parameter>

				En caso de que Problems esté vacío, se puede comprobar con esta variable.
				<parameter id="par_gpan_problems_null" type="value">
				  <contents>
				  	<value type="parameter">par_gpan_base_table</value>
				  </contents>
				  <sequence>
				    <operation type="column_index">
				    	<args><arg><value type="value">1</value></arg></args>
				    </operation>
				    <operation type="column_equal">
				    	<args><arg><value type="value">Problems.i:nil</value></arg></args>
				    </operation>
				    <operation type="column_selector">
				    	<args><arg><value type="value">2</value></arg></args>
				    </operation>
				  </sequence>
				</parameter>-->

				<parameter id="par_gpan_base_table" type="table">
				  <contents>
				    <value type="infosource_table" infosource="ticketing" endpointid="GPAN">.</value>
				  </contents>
				  <sequence>
				    <operation type="first_column">
				      <args><arg><value type="value">2</value></arg></args>
				    </operation>
				    <operation type="transpose"/>
				  </sequence>
				</parameter>

				<!--CCA20230327 - SP2603 - inicio-->
				<parameter id="par_gpan_problemas_base_table" type="table">
				  <contents>
				    <value type="infosource_table" infosource="ticketing" endpointid="GPAN">
						<path>specification.characteristicsValue.#</path>
					</value>
				  </contents>
				  <sequence>
				    <operation type="header_selector">
				      <args><arg><value type="value">specification.characteristicsValue.#;specification.characteristicsValue.characteristicName;specification.characteristicsValue.value</value></arg></args>
				    </operation>
				    <operation type="first_row">
						<args><arg><value type="value">2</value></arg></args>
					</operation>
					<operation type="transpose"/>
					<operation type="header_selector">
						<args><arg><value type="value">0;2;7</value></arg></args>
					</operation>
					<operation type="first_row">
						<args><arg><value type="value">2</value></arg></args>
					</operation>
					<operation type="compact_table"/>
				  </sequence>
				</parameter>
				<!--CCA20230327 - SP2603 - fin-->

				<parameter id="par_gpan_problems_aux" type="table">
					<contents>
						<value type="parameter">par_gpan_base_table</value>
					</contents>
					<sequence>
						<operation type="transpose"/>
						<operation type="header_selector">
						<args><arg><value type="value">specification.characteristicsValue.characteristicName;specification.characteristicsValue.value</value></arg></args>
						</operation>
						<operation type="transpose"/>
						<operation type="header_selector">
						<args><arg><value type="value">ProblemID;Status;CondicionType</value></arg></args>
						</operation>
						<operation type="compact_table"/>
					</sequence>
				</parameter>

				<parameter id="par_gpan_faultcode_value">
				  <contents>
				    <value type="parameter">par_gpan_base_table</value>
				  </contents>
				  <sequence>
				    <operation type="column_index">
				      <args><arg><value type="value">1</value></arg></args>
				    </operation>
				    <operation type="column_equal">
				      <args><arg><value type="value">errorCode.value</value></arg></args>
				    </operation>
				    <operation type="column_selector">
				      <args><arg><value type="value">2</value></arg></args>
				    </operation>
				  </sequence>
				</parameter>

				<parameter id="par_gpan_faultreason_text">
				  <contents>
				    <value type="parameter">par_gpan_base_table</value>
				  </contents>
				  <sequence>
				    <operation type="column_index">
				      <args><arg><value type="value">1</value></arg></args>
				    </operation>
				    <operation type="column_equal">
				      <args><arg><value type="value">failure.text</value></arg></args>
				    </operation>
				    <operation type="column_selector">
				      <args><arg><value type="value">2</value></arg></args>
				    </operation>
				  </sequence>
				</parameter>

				<parameter id="par_gpan_problems_null" type="value">
				    <contents>
				    <value type="parameter">par_gpan_problems_null_aux</value>
				  </contents>
				  <sequence>
				    <operation type="replace_pattern">
				      <args><arg><value type="value">[0-9]@to@true</value></arg></args>
				    </operation>
				    <operation type="replace_pattern">
				      <args><arg><value type="value">truetrue@to@</value></arg></args>
				    </operation>
				  </sequence>
				</parameter>

				<parameter id="par_gpan_problems_null_aux">
				  <contents>
				    <value type="parameter">par_gpan_base_table</value>
				  </contents>
				  <sequence>
				    <operation type="column_index">
				      <args><arg><value type="value">1</value></arg></args>
				    </operation>
				    <operation type="column_equal">
				      <args><arg><value type="value">errorCode.value</value></arg></args>
				    </operation>
				    <operation type="column_selector">
				      <args><arg><value type="value">2</value></arg></args>
				    </operation>
				  </sequence>
				</parameter>

				<!--CCA20230327 - SP2603 - inicio-->
				<parameter id="par_gpan_dataproblems" type="table">
				  <contents>
	              	<!-- <value type="infosource_table" infosource="ticketing" endpointid="GPAN">specification.characteristicsValue.</value> -->
					<value type="infosource_table" infosource="ticketing" endpointid="GPAN"><path>specification.characteristicsValue.#</path></value>
	              </contents>
	              <sequence>
				  <operation type="header_selector">
				    	<args><arg><value type="value">specification.characteristicsValue.characteristicName;specification.characteristicsValue.value</value></arg></args>
				    </operation>
				     <operation type="first_row">
				      <args><arg><value type="value">2</value></arg></args>
				    </operation>
					<operation type="transpose"/> 
					<operation type="compact_table"/>
				  </sequence>
				</parameter>
				<!--CCA20230327 - SP2603 - fin-->

				<!--Tabla con los problemas que no estén cancelados, cerrados o solucionados-->
				<parameter id="par_gpan_problemid_unsolved" type="table">
				  <contents>
				  	<value type="parameter">par_gpan_dataproblems</value>
				  </contents>
				  <sequence>
				    <operation type="header_selector">
				    	<args><arg><value type="value">ProblemID;Status</value></arg></args>
				    </operation>
				    <operation type="first_row">
				    	<args><arg><value type="value">2</value></arg></args>
				    </operation>
				    <operation type="column_index">
				    	<args><arg><value type="value">1</value></arg></args>
				  	</operation>
				  	<operation type="unique_rows"/>
				    <operation type="column_index">
				    	<args><arg><value type="value">2</value></arg></args>
				  	</operation>
				  	<!-- SCB 20230323 - SP2603 - INICIO -->
					<operation type="column_not_in_param">
				  		<args><arg><value type="parameter">par_lookup_gpan_status</value></arg></args>
				  	</operation>					
					<!-- SCB 20230323 - SP2603 - FIN -->
					<!--JJSM 20211014 - Consolas 2.0 - CON_009 - INICIO -->
				    <operation type="add_header">
				    	<args><arg><value type="value">ProblemID;Status</value></arg></args>
				    </operation>
				  </sequence>
				</parameter>

				<!--Tabla con los problemas que no estén cancelados, cerrados o solucionados-->
				<!--CCA20230327 - SP2603 - inicio-->
				<parameter id="par_gpan_problemid_solved" type="table">
				  <contents>
					<value type="parameter">par_gpan_problemas_base_table</value>
				</contents>
				<sequence>
					<operation type="header_selector">
					<args><arg><value type="value">Status;ProblemID</value></arg></args>
					</operation>
					<operation type="first_row">
					<args><arg><value type="value">2</value></arg></args>
					</operation>
					<operation type="column_index">
					<args><arg><value type="value">2</value></arg></args>
					</operation>
					<opeartion type="unique_rows"/>
					<!-- SCB 20230323 - SP2603 - INICIO -->
					<operation type="column_in_param">
					<args><arg><value type="parameter">par_lookup_gpan_status</value></arg></args>
					</operation>
					<!-- SCB 20230323 - SP2603 - FIN -->
					<operation type="add_header">
					<args><arg><value type="value">Status;ProblemID</value></arg></args>
					</operation>
					<operation type="header_selector">
					<args><arg><value type="value">ProblemID;Status</value></arg></args>
					</operation>
				</sequence>
				</parameter>
				<!--CCA20230327 - SP2603 - fin-->

				<!--Tabla con los problemas sin resolver-->
				<!--CCA20230327 - SP2603 - inicio-->
				<parameter id="par_gpan_problems_unsolved" type="table">
				 <contents>
						<value type="parameter">par_gpan_problemas_base_table</value>
					</contents>
					<sequence>
						<operation type="header_selector">
						<args><arg><value type="value">ProblemID</value></arg></args>
						</operation>
						<operation type="column_left">
						<args><arg><value type="value">ProblemID</value></arg></args>
						</operation>
						<operation type="column_right">
						<args><arg><value type="value">ProblemID</value></arg></args>
						</operation>
						<operation type="join">
						<args><arg><value type="parameter">par_gpan_dataproblems</value></arg></args>
						</operation>
						<operation type="header_selector">
						<args><arg><value type="value">ProblemID;Status;Title;OpeningDate;CondicionType</value></arg></args><!-- SCB 20230412 - SP2603 - añadido CondicionType-->
						</operation>
						<!-- CCA20230519 - SP2603 - inicio-->
						<operation type="column_index">
						<args><arg><value type="value">3</value></arg></args>
						</operation>
						<operation type="replace_pattern">
				  		<args><arg><value type="value">,@to@#</value></arg></args>
						</operation>
						<operation type="column_index">
						<args><arg><value type="value">3</value></arg></args>
						</operation>
						<operation type="replace_pattern">
				  		<args><arg><value type="value">;@to@?</value></arg></args>
						</operation>
						<!-- CCA20230519 - SP2603 - fin-->
					</sequence>
				</parameter>
				<!--CCA20230327 - SP2603 - fin-->

				<parameter id="par_gpan_problems_unsolved_in_a_string" type="value">
				  <contents>
				  	<value type="parameter">par_gpan_problems_unsolved</value>
				  </contents>
				  <sequence>
				  	<operation type="just_one_column">
				  		<args><arg><value type="value">,</value></arg></args>
				  	</operation>
				  	<operation type="column_index">
				  		<args><arg><value type="value">1</value></arg></args>
				  	</operation>
				  	<operation type="just_one_row">
				  		<args><arg><value type="value">;</value></arg></args>
				  	</operation>
				  	<!--20200319_DAS:Eliminamos la columna de ScheduledClosingDate a petición del usuario-->
				  	<operation type="replace_pattern">
				  		<args><arg><value type="value">^(unknown)$@to@ProblemID,Status,Title,OpeningDate,CondicionType</value></arg></args><!-- SCB 20230412 - SP2603 - añadido CondicionType-->
				  	</operation>
				  </sequence>
				</parameter>

				<!--Tabla con todos los problemas resueltos-->
				<parameter id="par_gpan_problems_solved_lastmonth" type="table">
				  <contents>
				  	<value type="parameter">par_gpan_problemid_solved</value>
				  </contents>
				  <sequence>
				    <operation type="header_selector">
				    	<args><arg><value type="value">ProblemID</value></arg></args>
				    </operation>
				    <operation type="column_left">
				    	<args><arg><value type="value">ProblemID</value></arg></args>
				    </operation>
				    <operation type="column_right">
				    	<args><arg><value type="value">ProblemID</value></arg></args>
				    </operation>
				    <operation type="join">
				    	<args><arg><value type="parameter">par_gpan_dataproblems</value></arg></args>
				    </operation>
				    <operation type="header_selector">
				    	<args><arg><value type="value">ProblemID;Status;Title;OpeningDate;ScheduledClosingDate;ScheduledClosingDate</value></arg></args>
				    </operation>
				  	<operation type="first_row">
				  		<args><arg><value type="value">2</value></arg></args>
				  	</operation>
				  	<operation type="column_index">
				  		<args><arg><value type="value">6</value></arg></args>
				  	</operation>
				  	<operation type="parse_date">
				  		<args><arg><value type="value">yyyy-MM-dd'T'HH:mm:ss</value></arg></args>
				  	</operation>
					<!-- PCA20211118 - INC000045561163 - INICIO -->
					<operation type="parse_date">
						<args><arg><value type="value">yyyy-MM-dd' 'HH:mm:ss</value></arg></args>
					</operation>
					<!-- PCA20211118 - INC000045561163 - FIN -->
				  	<operation type="order_num">
				  		<args><arg><value type="value">desc</value></arg></args>
				  	</operation>
				  	<operation type="column_greater">
				  		<args><arg><value type="parameter">par_timestamp_month_ago</value></arg></args>
				  	</operation>
				  	<operation type="unique_rows"/>
				  	<operation type="add_header">
				  		<args><arg><value type="value">ProblemID;Status;Title;OpeningDate;ScheduledClosingDate;SDms</value></arg></args>
				  	</operation>
				  	<!--20200319_DAS:Eliminamos la columna de ScheduledClosingDate a petición del usuario-->
				  	<operation type="header_selector">
				  		<args><arg><value type="value">ProblemID;Status;Title;OpeningDate</value></arg></args>
				  	</operation>
				  </sequence>
				</parameter>

				<!-- CCA20230519 - SP2603 - inicio-->
				<parameter id="par_gpan_problems_solved_lastmonth_in_a_string" type="table">
					<contents>
						<value type="parameter">par_gpan_problems_solved_lastmonth</value>						
					</contents>
					<sequence>
						<operation type="column_index">
				  		<args><arg><value type="value">1</value></arg></args>
						</operation>
							<operation type="replace_pattern">
							<args><arg><value type="value">^(unknown)$@to@ProblemID,Status,Title,OpeningDate,CondicionType</value></arg></args>
						</operation>
						<operation type="row_delimiter">
							<args><arg><value type="value">;</value></arg></args>
						</operation>
						<operation type="column_delimiter">
							<args><arg><value type="value">,</value></arg></args>
						</operation>  
					</sequence>
				</parameter>
				<!-- CCA20230519 - SP2603 - fin-->

				<!-- CCA20230519 - SP2603 - inicio-->
				<parameter id="par_gpan_showable_problems" type="table">
				  <contents>
					<value type="parameter">par_gpan_problems_solved_lastmonth_in_a_string</value>
				</contents>
					<sequence>
						<operation type="add_table">
							<args><arg><value type="parameter">par_gpan_problems_unsolved</value></arg></args>
						</operation>			  	
                		<operation type="unique_rows"/>               
						<operation type="column_index">
						<args><arg><value type="value">3</value></arg></args>
						</operation>
						<operation type="replace_pattern">
				  		<args><arg><value type="value">#@to@,</value></arg></args>
						</operation>	
						<operation type="first_row">
				  		<args><arg><value type="value">2</value></arg></args>
				  		</operation>	
						<operation type="add_header">
				  		<args><arg><value type="value">ProblemID;Status;Title;OpeningDate;CondicionType</value></arg></args>
				  		</operation>
						<operation type="column_index">
							<args><arg><value type="value">2</value></arg></args>
						</operation>
						<operation type="column_not_in_param">
						<args><arg><value type="parameter">par_lookup_gpan_status</value></arg></args>
						</operation>
						<operation type="column_index">
							<args><arg><value type="value">5</value></arg></args>
						</operation>
						<operation type="column_not_equal">
						<args><arg><value type="value">CLOSED</value></arg></args>
						</operation>
						<operation type="column_index">
							<args><arg><value type="value">5</value></arg></args>
						</operation>
						<operation type="column_not_equal">
						<args><arg><value type="value"></value></arg></args>
						</operation>	
						<operation type="column_index">
						<args><arg><value type="value">3</value></arg></args>
						</operation>
						<operation type="replace_pattern">
				  		<args><arg><value type="value">?@to@,</value></arg></args>
						</operation>		
				  </sequence>
				</parameter>
				<!-- CCA20230519 - SP2603 - fin-->

				<!--Tabla con los estados de los problemas-->
				<parameter id="par_gpan_status" type="table">
				  <contents>
				  	<value type="parameter">par_gpan_problemas_base_table</value><!--CCA20230327 - SP2603-->
				  </contents>
				  <sequence>
				    <operation type="header_selector">
				    	<args><arg><value type="value">Status;CondicionType</value></arg></args><!-- SCB 20230322 - SP2603 - Añadido condiciontype a la tabla -->
				    </operation>
				    <operation type="first_row">
				    	<args><arg><value type="value">2</value></arg></args>
				    </operation>
				    <operation type="column_index">
				    	<args><arg><value type="value">1</value></arg></args>
				    </operation>
				    <operation type="unique_rows"/>
				  </sequence>
				</parameter>

				<!--Número de problemas que no están cancelados, cerrados o solucionados-->
				<parameter id="par_gpan_network_num_otros_status" type="value">
				  <contents>
				  	<value type="parameter">par_gpan_status</value>
				  </contents>
				  <sequence>
				  	<operation type="column_index">
				  		<args><arg><value type="value">1</value></arg></args>
				    </operation>
				    <operation type="unique_rows"/>
				    <!-- SCB 20230322 - SP2603 - INICIO -->
					<operation type="column_not_in_param">
				    	<args><arg><value type="parameter">par_lookup_gpan_status</value></arg></args>
				    </operation>
				   	<operation type="column_index">
				  		<args><arg><value type="value">2</value></arg></args>
				    </operation>
                    <operation type="column_not_equal">
				  		<args><arg><value type="value">CLOSED</value></arg></args>
				    </operation>
					<!-- SCB 20230322 - SP2603 - FIN -->
				    <operation type="number_of_rows"/>
				  </sequence>
				</parameter>

				<!--Número de problemas de los últimos 30 días que no están cancelados, cerrados o solucionados-->
				<parameter id="par_gpan_num_showable_problems" type="value">
				  <contents>
				  	<value type="parameter">par_gpan_showable_problems</value>
				  </contents>
				  <sequence>
				    <operation type="first_row">
				    	<args><arg><value type="value">2</value></arg></args>
				    </operation>
				    <operation type="number_of_rows"/>
				  </sequence>
				</parameter>

		<!--SCB 20230322 - SP2603 - INICIO -->
		<!-- PARAMETROS DE ObtenerInfoRGU - new web service para obtener masivas--> 
        <parameter id="par_oir_base_table" type="table">
            <contents>
              	<value type="infosource_table" infosource="ticketing" endpointid="OIR">.</value>
            </contents>
        </parameter>

		<parameter id="par_oir_problems_base_table" type="table">
            <contents>
              	<value type="infosource_table" infosource="ticketing" endpointid="OIR">s:Envelope.s:Body.GetServiceProblemListVBMResponse.ServiceProblemVBO.</value>
            </contents>
			<sequence>
 		 		<operation type="replace_pattern">
                  <args><arg><value type="value">ValidityPeriod.FromDate.DateString.content@to@FromDate</value></arg></args>
                </operation>
    			<operation type="replace_pattern">
                  <args><arg><value type="value">Parts.Incidents.Incident.IDs.ID.schemeName@to@TicketID</value></arg></args>
                </operation>
    			<operation type="replace_pattern">
                  <args><arg><value type="value">Name.content@to@Name</value></arg></args>
                </operation>
    			<operation type="replace_pattern">
                  <args><arg><value type="value">Parts.Impacts.Impact.Name.content@to@Impacts</value></arg></args>
                </operation>
    		</sequence>
        </parameter>


        <parameter id="par_oir_dataproblems" type="table">
			<contents>
					<value type="parameter">par_oir_base_table</value>
			</contents>
          	<sequence>
				<operation type="header_selector">
					<args><arg><value type="value">s:Envelope.s:Body.GetServiceProblemListVBMResponse.ServiceProblemVBO.Parts.Incidents.Incident.IDs.ID.schemeName;s:Envelope.s:Body.GetServiceProblemListVBMResponse.ServiceProblemVBO.Parts.Incidents.Incident.IDs.ID.content;s:Envelope.s:Body.GetServiceProblemListVBMResponse.ServiceProblemVBO.Parts.Incidents.Incident.Name.content;s:Envelope.s:Body.GetServiceProblemListVBMResponse.ServiceProblemVBO.ValidityPeriod.FromDate.DateString.content;s:Envelope.s:Body.GetServiceProblemListVBMResponse.ServiceProblemVBO.Parts.Impacts.Impact.Name.content</value></arg></args>
				</operation>
				<operation type="first_row">
					<args><arg><value type="value">2</value></arg></args>
				</operation>
				<operation type="first_column">
					<args><arg><value type="value">2</value></arg></args>
				</operation>
				<operation type="column_not_contain">
					<args><arg><value type="value">unknown</value></arg></args>
				</operation>
				<operation type="add_header">
					<args><arg><value type="value">TicketID;Name;FromDate;Impacts</value></arg></args>
				</operation>
			</sequence>
        </parameter>
        <parameter id="par_oir_comprobar_ticketid" type="value">
			<contents>
				<value type="parameter">par_oir_dataproblems</value>
			</contents>
			<sequence>
				<!-- CCA20230512 - SP2603 - inicio -->
				<operation type="column_index">
					<args><arg><value type="value">2</value></arg></args>
				</operation>
				<operation type="column_not_contain">
					<args><arg><value type="value">unknown</value></arg></args>
				</operation>
				<!-- CCA20230512 - SP2603 - fin -->
				<operation type="header_selector">
					<args><arg><value type="value">TicketID</value></arg></args>
				</operation>
				<operation type="number_of_rows"/>
			</sequence>
        </parameter>
        <!-- SCB 20230322 - SP2603 - FIN -->

        <!-- PARAMETROS DE GetRepeatedIncidents - new incidencias reiteradas --> 
        	<!-- Parametro base: tabla datos gri --> 
	            <parameter id="par_gri_base_table" type="table"><!--TML2021030310 - INCP_040-->
				  <contents>
				    <value type="infosource_table" infosource="ticketing" endpointid="GRI">id.</value>
				  </contents>
				  <sequence>
				    <operation type="header_selector"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">id.schemeName;id.value</value></arg></args>
				    </operation>
				    <operation type="column_index"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">1</value></arg></args>
				    </operation>
				    <operation type="column_equal">
				      <args><arg><value type="value">IncidentId</value></arg></args>
				    </operation>
				    <operation type="column_selector">
				      <args><arg><value type="value">2</value></arg></args>
				    </operation>
				  </sequence>
				</parameter>

				<parameter id="par_gri_repeatedincidences">
				  <contents>
				    <value type="parameter">par_gri_base_table</value>
				  </contents>
				  <sequence>
				    <operation type="replace_pattern">
				      <args><arg><value type="value">unknown@to@N</value></arg></args>
				    </operation>
				    <operation type="replace_pattern"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">TCK@to@</value></arg></args>
				    </operation>
				    <operation type="replace_pattern">
				      <args><arg><value type="value">[0-9]$@to@S</value></arg></args>
				    </operation>
				    <operation type="replace_pattern">
				      <args><arg><value type="value">[0-9]@to@</value></arg></args>
				    </operation>
				    <operation type="unique_rows"/>
				  </sequence>
				</parameter>

				<parameter id="par_gri_incidencedata" type="table"><!--TML2021030310 - INCP_040-->
				  <contents>
				    <value type="infosource_table" infosource="ticketing" endpointid="GRI">.</value>
				  </contents>
				  <sequence>
				    <operation type="header_selector"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">#;id.schemeName;id.value;created.value;lastActivityDate.value</value></arg></args>
				    </operation>
				    <operation type="first_row">
				      <args><arg><value type="value">2</value></arg></args>
				    </operation>
				    <operation type="add_header"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">index;IncidentIdName;IncidentId;created;lastActivityDate</value></arg></args>
				    </operation>
				    <operation type="column_index"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">2</value></arg></args>
				    </operation>
				    <operation type="column_not_equal"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">unknown</value></arg></args>
				    </operation>
				  </sequence>
				</parameter>

				<!--Número total de incidencias cerradas-->
				<parameter id="par_gri_incidencedata_number_closedincidences" type="table">
				  <contents>
				    <value type="parameter">par_gri_incidencedata</value>
				  </contents>
				  <sequence>
				    <operation type="header_selector">
				      <args><arg><value type="value">lastActivityDate</value></arg></args>
				    </operation>
				    <operation type="ignore_header">
				      <args><arg><value type="value">true</value></arg></args>
				    </operation>
				    <operation type="row_excluder">
				      <args><arg><value type="value">1753-01-01T00:00:00</value></arg></args>
				    </operation>
				    <operation type="column_not_equal"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">unknown</value></arg></args>
				    </operation>
				    <operation type="number_of_rows"/>
				    <operation type="ignore_header">
				      <args><arg><value type="value">false</value></arg></args>
				    </operation>
				    <operation type="column_not_equal"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">lastActivityDate</value></arg></args>
				    </operation>
				  </sequence>
				</parameter>

				<!--Tabla con fechas de creación de incidencias en ms-->
				<parameter id="par_gri_incidencedata_parsed_startdate" type="table">
				  <contents>
				    <value type="parameter">par_gri_incidencedata</value>
				  </contents>
				  <sequence>
				    <operation type="header_selector">
				      <args><arg><value type="value">IncidentId;created</value></arg></args>
				    </operation>
				    <operation type="column_index"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">2</value></arg></args>
				    </operation>
				    <operation type="ignore_header">
				      <args><arg><value type="value">true</value></arg></args>
				    </operation>
				    <operation type="parse_date">
				      <args><arg><value type="value">yyyy-MM-dd' 'HH:mm:ss</value></arg></args><!--TML2021030310 - INCP_040-->
				    </operation>
					<!-- PCA20211118 - INC000045561163 - INICIO -->
					<operation type="parse_date">
					  <args><arg><value type="value">yyyy-MM-dd'T'HH:mm:ss</value></arg></args>
					</operation>
					<!-- PCA20211118 - INC000045561163 - FIN -->
				  </sequence>
				</parameter>

				<!--Tabla de fechas de cierre de incidencias en ms-->
				<parameter id="par_gri_incidencedata_parsed_finishdate" type="table">
				  <contents>
				    <value type="parameter">par_gri_incidencedata</value>
				  </contents>
				  <sequence>
				    <operation type="header_selector">
				      <args><arg><value type="value">IncidentId;lastActivityDate</value></arg></args>
				    </operation>
				    <operation type="column_index"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">2</value></arg></args>
				    </operation>
				    <operation type="ignore_header">
				      <args><arg><value type="value">true</value></arg></args>
				    </operation>
				    <operation type="parse_date">
				      <args><arg><value type="value">yyyy-MM-dd' 'HH:mm:ss</value></arg></args><!--TML2021030310 - INCP_040-->
				    </operation>
					<!-- PCA20211118 - INC000045561163 - INICIO -->
					<operation type="parse_date">
					  <args><arg><value type="value">yyyy-MM-dd'T'HH:mm:ss</value></arg></args>
				    </operation>
				    <!-- PCA20211118 - INC000045561163 - FIN -->
				  </sequence>
				</parameter>

				<!--Fecha actual en ms-->
				<parameter id="par_timestamp_now" type="value">
				  <contents>
				    <operation type="localtimestamp"/>
				  </contents>
				</parameter>

				<parameter id="par_timestamp_month_ago" type="value">
				  <contents>
				    <operation type="localtimestamp"/>
				  </contents>
				  <sequence>
				    <operation type="subtract_value">
				      <args><arg><value type="value">2592000000</value></arg></args>
				    </operation>
				  </sequence>
				</parameter>

				<!--Tabla con las diferencias entre fechas de apertura de incidencias y fecha actual-->
				<parameter id="par_gri_incidencedata_parsed_startdate_minus_now" type="table">
				  <contents>
				    <value type="parameter">par_gri_incidencedata_parsed_startdate</value>
				  </contents>
				  <sequence>
				    <!--<operation type="ignore_first_column">
				         <args><arg><value type="value">true</value></arg></args>
				        </operation>
				        <operation type="ignore_header">
				         <args><arg><value type="value">true</value></arg></args>
				        </operation>-->
				    <operation type="subtract_value">
				      <args><arg><value type="parameter">par_timestamp_now</value></arg></args>
				    </operation>
				  </sequence>
				</parameter>

				<!--Tabla con las diferencias entre fechas de cierre de incidencias y fecha actual-->
				<parameter id="par_gri_incidencedata_parsed_finishdate_minus_now" type="table">
				  <contents>
				    <value type="parameter">par_gri_incidencedata_parsed_finishdate</value>
				  </contents>
				  <sequence>
				    <!--<operation type="ignore_first_column">
				         <args><arg><value type="value">true</value></arg></args>
				        </operation>
				        <operation type="ignore_header">
				         <args><arg><value type="value">true</value></arg></args>
				        </operation>-->
				    <operation type="subtract_value">
				      <args><arg><value type="parameter">par_timestamp_now</value></arg></args>
				    </operation>
				  </sequence>
				</parameter>

				<!--Tabla con las incidencias abiertas en el último mes-->
				<parameter id="par_gri_incidencedata_openincidences_month_result" type="table">
				  <contents>
				    <value type="parameter">par_gri_incidencedata_parsed_startdate_minus_now</value>
				  </contents>
				  <sequence>
				    <operation type="ignore_header"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">true</value></arg></args>
				    </operation>
				    <operation type="column_index">
				      <args><arg><value type="value">2</value></arg></args><!--TML2021030310 - INCP_040-->
				    </operation>
				    <operation type="column_greater">
				      <args><arg><value type="value">-2592000000</value></arg></args>
				    </operation>
				    <operation type="column_lower_or_equal">
				      <args><arg><value type="value">0</value></arg></args>
				    </operation>
				  </sequence>
				</parameter>


				<!--Tabla con las incidencias cerradas en las últimas 24 horas-->
				<parameter id="par_gri_incidencedata_closedincidences_day_result" type="table">
				  <contents>
				    <value type="parameter">par_gri_incidencedata_parsed_finishdate_minus_now</value>
				  </contents>
				  <sequence>
				    <operation type="ignore_header"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">true</value></arg></args>
				    </operation>
				    <operation type="column_index">
				      <args><arg><value type="value">2</value></arg></args><!--TML2021030310 - INCP_040-->
				    </operation>
				    <operation type="column_greater_or_equal">
				      <args><arg><value type="value">-86400000</value></arg></args>
				    </operation>
				  </sequence>
				</parameter>

				<!--Tabla con las incidencias cerradas en la última semana-->
				<parameter id="par_gri_incidencedata_closedincidences_week_result" type="table">
				  <contents>
				    <value type="parameter">par_gri_incidencedata_parsed_finishdate_minus_now</value>
				  </contents>
				  <sequence>
				    <operation type="ignore_header"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">true</value></arg></args>
				    </operation>
				    <operation type="column_index">
				      <args><arg><value type="value">2</value></arg></args><!--TML2021030310 - INCP_040-->
				    </operation>
				    <operation type="column_greater">
				      <args><arg><value type="value">-604800000</value></arg></args>
				    </operation>
				    <operation type="column_lower_or_equal">
				      <args><arg><value type="value">-86400000</value></arg></args>
				    </operation>
				  </sequence>
				</parameter>

				<!--Tabla con las incidencias cerradas en la última quincena-->
				<parameter id="par_gri_incidencedata_closedincidences_fortnight_result" type="table">
				  <contents>
				    <value type="parameter">par_gri_incidencedata_parsed_finishdate_minus_now</value>
				  </contents>
				  <sequence>
				    <operation type="ignore_header"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">true</value></arg></args>
				    </operation>
				    <operation type="column_index">
				      <args><arg><value type="value">2</value></arg></args><!--TML2021030310 - INCP_040-->
				    </operation>
				    <operation type="column_greater">
				      <args><arg><value type="value">-1296000000</value></arg></args>
				    </operation>
				    <operation type="column_lower_or_equal">
				      <args><arg><value type="value">-604800000</value></arg></args>
				    </operation>
				  </sequence>
				</parameter>

				<!--Número de incidencias abiertas en el último mes-->
				<parameter id="par_gri_incidencedata_openincidences_month_result_number" type="value">
				  <contents>
				    <value type="parameter">par_gri_incidencedata_openincidences_month_result</value>
				  </contents>
				  <sequence>
				    <operation type="ignore_header"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">true</value></arg></args>
				    </operation>
				    <operation type="number_of_rows"/>
				  </sequence>
				</parameter>

				<parameter id="par_gri_incidencedata_closedincidences_day_result_info" type="table">
				  <contents>
				    <value type="parameter">par_gri_incidencedata_closedincidences_day_result</value>
				  </contents>
				  <sequence>
				    <operation type="add_header">
				      <args><arg><value type="value">IncidenceID;FinishDate</value></arg></args>
				    </operation>
				    <operation type="column_index"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">2</value></arg></args>
				    </operation>
				    <operation type="column_not_equal"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">lastActivityDate</value></arg></args>
				    </operation>
				    <!--<operation type="column_left">
				 <args><arg><value type="value">IncidenceID</value></arg></args>
				</operation>
				        <operation type="column_right">
				         <args><arg><value type="value">IncidenceID</value></arg></args>
				        </operation>
				        <operation type="join">
				         <args><arg><value type="parameter">par_gri_incidencedata</value></arg></args>
				        </operation>
				        <operation type="header_selector">
				         <args><arg><value type="value">IncidenceID;StartDate;FinishDate</value></arg></args>
				        </operation>-->
				  </sequence>
				</parameter>

				<!--Número de incidencias cerradas en las últimas 24 horas-->
				<parameter id="par_gri_incidencedata_closedincidences_day_result_number" type="value">
				  <contents>
				    <value type="parameter">par_gri_incidencedata_closedincidences_day_result</value>
				  </contents>
				  <sequence>
				    <operation type="ignore_header"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">true</value></arg></args>
				    </operation>
				    <operation type="column_index"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">2</value></arg></args><!--TML2021030310 - INCP_040-->
				    </operation>
				    <operation type="column_not_equal"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">unknwon</value></arg></args>
				    </operation>
				    <operation type="number_of_rows"/>
				  </sequence>
				</parameter>

				<!--Número de incidencias cerradas en la última semana-->
				<parameter id="par_gri_incidencedata_closedincidences_week_result_number" type="value">
				  <contents>
				    <value type="parameter">par_gri_incidencedata_closedincidences_week_result</value>
				  </contents>
				  <sequence>
				    <operation type="ignore_header"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">true</value></arg></args>
				    </operation>
				    <operation type="column_index"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">2</value></arg></args><!--TML2021030310 - INCP_040-->
				    </operation>
				    <operation type="column_not_equal"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">unknwon</value></arg></args>
				    </operation>
				    <operation type="number_of_rows"/>
				  </sequence>
				</parameter>

				<!--Número de incidencias cerradas en la última quincena-->
				<parameter id="par_gri_incidencedata_closedincidences_fortnight_result_number" type="value">
				  <contents>
				    <value type="parameter">par_gri_incidencedata_closedincidences_fortnight_result</value>
				  </contents>
				  <sequence>
				    <operation type="ignore_header"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">true</value></arg></args>
				    </operation>
				    <operation type="column_index"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">2</value></arg></args>
				    </operation>
				    <operation type="column_not_equal"><!--TML2021030310 - INCP_040-->
				      <args><arg><value type="value">unknwon</value></arg></args>
				    </operation>
				    <operation type="number_of_rows"/>
				  </sequence>
				</parameter>


        <!-- PARAMETROS DE OpenIncidents --> 
        	<!-- Parametro base: tabla datos oi - new incidencias abiertas --> 
			<parameter id="par_oi_base_table" type="table">
			  <contents>
			    <value type="infosource_table" infosource="ticketing" endpointid="OI">.</value>
			  </contents>
			  <sequence>
			    <operation type="transpose"/>
			  </sequence>
			</parameter>

			<parameter id="par_oi_resultado" name="Averia_Abierta">
			  <contents>
			    <value type="parameter">par_oi_base_table</value>
			  </contents>
			  <sequence>
			    <operation type="column_index">
			      <args><arg><value type="value">1</value></arg></args>
			    </operation>
			    <operation type="column_equal">
			      <args><arg><value type="value">status</value></arg></args>
			    </operation>
			    <operation type="column_selector">
			      <args><arg><value type="value">2</value></arg></args>
			    </operation>
			    <operation type="to_lower_case"/>
			  </sequence>
			</parameter>
			
            <!-- SCB 20230322 - SP2603 - INICIO -->
           <parameter id="par_lookup_gpan_status" type="table">
                <contents>
                    <value type="lookup">lookup_gpan_status</value>
                </contents>
                <sequence>
                    <operation type="row_delimiter">
                        <args><arg><value type="value">,</value></arg></args>
                    </operation>
                </sequence>
            </parameter>
            <!-- SCB 20230322 - SP2603 - FIN -->
    </parameters>

	<checks>
		<!-- CHECKS DE RESPUESTA DE ENDPOINTS -->
			<!-- Checks de respuesta de GetProblemsAffectedNetwork -->
	            <check id="chk_gpan_err_code_ok">
	            	<parameter>par_gpan_err_code</parameter>
	            	<result>
	            		<expr type="and">
	                  <operation type="equal">
	                  	<args><arg><value type="value">0</value></arg></args>
	                  </operation>
	                </expr>
	            	</result>
	            </check>


	            <check id="chk_gpan_http_code_ok">
	            	<parameter>par_gpan_http_code</parameter>
	            	<result>
	            		<expr type="and">
	                  <operation type="greater_or_equal">
	                  	<args><arg><value type="value">200</value></arg></args>
	                  </operation>
	                  <operation type="lower">
	                  	<args><arg><value type="value">300</value></arg></args>
	                  </operation>
	                </expr>
	            	</result>
	            </check>
			<!-- SCB 20230322 - SP2603 - INICIO -->
				<!-- Checks de respuesta de ObtenerInfoRGU -->
	            <check id="chk_oir_err_code_ok">
	            	<parameter>par_oir_err_code</parameter>
	            	<result>
	            		<expr type="and">
	                  <operation type="equal">
	                  	<args><arg><value type="value">0</value></arg></args>
	                  </operation>
	                </expr>
	            	</result>
	            </check>


	            <check id="chk_oir_http_code_ok">
	            	<parameter>par_oir_http_code</parameter>
	            	<result>
	            		<expr type="and">
	                  <operation type="greater_or_equal">
	                  	<args><arg><value type="value">200</value></arg></args>
	                  </operation>
	                  <operation type="lower">
	                  	<args><arg><value type="value">300</value></arg></args>
	                  </operation>
	                </expr>
	            	</result>
	            </check>
			<!-- SCB 20230322 - SP2603 - FIN -->
			<!-- Checks de respuesta de GetRepeatedIncidents -->
	            <check id="chk_gri_err_code_ok">
	            	<parameter>par_gri_err_code</parameter>
	            	<result>
	            		<expr type="and">
	                  <operation type="equal">
	                  	<args><arg><value type="value">0</value></arg></args>
	                  </operation>
	                </expr>
	            	</result>
	            </check>


	            <check id="chk_gri_http_code_ok">
	            	<parameter>par_gri_http_code</parameter>
	            	<result>
	            		<expr type="and">
	                  <operation type="greater_or_equal">
	                  	<args><arg><value type="value">200</value></arg></args>
	                  </operation>
	                  <operation type="lower">
	                  	<args><arg><value type="value">300</value></arg></args>
	                  </operation>
	                </expr>
	            	</result>
	            </check>


      		<!-- Checks de respuesta de OpenIncidents -->
	            <check id="chk_oi_err_code_ok">
	            	<parameter>par_oi_err_code</parameter>
	            	<result>
	            		<expr type="and">
	                  <operation type="equal">
	                  	<args><arg><value type="value">0</value></arg></args>
	                  </operation>
	                </expr>
	            	</result>
	            </check>
	            <check id="chk_oi_http_code_ok">
	            	<parameter>par_oi_http_code</parameter>
	            	<result>
	            		<expr type="and">
	                  <operation type="greater_or_equal">
	                  	<args><arg><value type="value">200</value></arg></args>
	                  </operation>
	                  <operation type="lower">
	                  	<args><arg><value type="value">300</value></arg></args>
	                  </operation>
	                </expr>
	            	</result>
	            </check>

	    <!-- CHECKS DE GetProblemsAffectedNetwork -->
	    	<check id="chk_gpan_faultcode_value_eq_unknown">
	    		<parameter>par_gpan_faultcode_value</parameter>
	    		<result>
	    			<expr type="and">
                <operation type="equal">
                	<args><arg><value type="value">unknown</value></arg></args>
                </operation>
              </expr>
	    		</result>
            </check>

            
        	<check id="chk_gpan_problems_null_eqtrue">
        		<parameter>par_gpan_problems_null</parameter>
        		<result>
        			<expr type="and">
                <operation type="equal">
                	<args><arg><value type="value">true</value></arg></args>
                </operation>
              </expr>
        		</result>
            </check>

            <check id="chk_gpan_problems_null_equnknown">
            	<parameter>par_gpan_problems_null</parameter>
            	<result>
            		<expr type="and">
                <operation type="equal">
                	<args><arg><value type="value">unknown</value></arg></args>
                </operation>
              </expr>
            	</result>
            </check>

            <check id="chk_gpan_network_num_otros_status_eq0">
            	<parameter>par_gpan_network_num_otros_status</parameter>
            	<result>
            		<expr type="and">
						<operation type="equal">
							<args><arg><value type="value">0</value></arg></args>
						</operation>
					</expr>
            	</result>
            </check>

            <check id="chk_gpan_num_showable_problems_eq0">
            	<parameter>par_gpan_num_showable_problems</parameter>
            	<result>
            		<expr type="or">
                <operation type="equal">
                	<args><arg><value type="value">0</value></arg></args>
                </operation>
				<operation type="equal">
                	<args><arg><value type="value">unknown</value></arg></args><!-- CCA20230519 - SP2603-->
                </operation>
              </expr>
            	</result>
            </check>

            <check id="chk_gpan_num_showable_problems_gt0">
            	<parameter>par_gpan_num_showable_problems</parameter>
            	<result>
            		<expr type="and">
                <operation type="greater">
                	<args><arg><value type="value">0</value></arg></args>
                </operation>
              </expr>
            	</result>
            </check>

        <!-- CHECKS DE GetRepeatedIncidents -->
        	<check id="chk_gri_repeatedincidences_neqn">
        		<parameter>par_gri_repeatedincidences</parameter>
        		<result>
        			<expr type="and">
					<operation type="not_equal">
						<args><arg><value type="value">N</value></arg></args>
					</operation>
				</expr>
        		</result>
            </check>

            <check id="chk_gri_number_closedincidences_gt0">
            	<parameter>par_gri_incidencedata_number_closedincidences</parameter>
            	<result>
            		<expr type="and">
            		<operation type="greater">
            			<args><arg><value type="value">0</value></arg></args>
            		</operation>
          		</expr>
            	</result>
            </check>

            <check id="chk_gri_number_openincidences_month_gt0">
            	<parameter>par_gri_incidencedata_openincidences_month_result_number</parameter>
            	<result>
            		<expr type="and">
            		<operation type="greater">
            			<args><arg><value type="value">0</value></arg></args>
            		</operation>
          		</expr>
            	</result>
            </check>

			<check id="chk_gri_number_closedincidences_day_gt0">
				<parameter>par_gri_incidencedata_closedincidences_day_result_number</parameter>
				<result>
					<expr type="and">
            		<operation type="greater">
            			<args><arg><value type="value">0</value></arg></args>
            		</operation>
          		</expr>
				</result>
            </check>

            <check id="chk_gri_number_closedincidences_week_gt0">
            	<parameter>par_gri_incidencedata_closedincidences_week_result_number</parameter>
            	<result>
            		<expr type="and">
            		<operation type="greater">
            			<args><arg><value type="value">0</value></arg></args>
            		</operation>
          		</expr>
            	</result>
            </check>

            <check id="chk_gri_number_closedincidences_fortnight_gt0">
            	<parameter>par_gri_incidencedata_closedincidences_fortnight_result_number</parameter>
            	<result>
            		<expr type="and">
            		<operation type="greater">
            			<args><arg><value type="value">0</value></arg></args>
            		</operation>
          		</expr>
            	</result>
            </check>

        <!-- CHECKS DE OpenIncidents -->
        	<check id="chk_oi_resultado_neqfalse">
        		<parameter>par_oi_resultado</parameter>
        		<result>
        			<expr type="and">
                	<operation type="not_equal">
                		<args><arg><value type="value">false</value></arg></args>
                	</operation>
      			</expr>
        		</result>
            </check>
		<!-- SCB 20230322 - SP2603 - INICIO -->
		<!-- CHECKS de ObetenerInfoRGU -->
			<check id="chk_oir_num_ticketid_eq_1">
        		<parameter>par_oir_comprobar_ticketid</parameter>
        		<result>
        			<expr type="and">
					<!-- CCA20230512 - SP2603 - inicio -->
                	<operation type="greater">
                		<args><arg><value type="value">1</value></arg></args>
                	</operation>
					<operation type="not_equal">
                		<args><arg><value type="value">unknown</value></arg></args>
                	</operation>
					<!-- CCA20230512 - SP2603 - fin -->
      			</expr>
        		</result>
            </check>
		<!-- SCB 20230322 - SP2603 - FIN -->
	</checks>

    <tests>
    	<!-- TEST TEMPLATE -->
	        <test id="tst_template">
	            <expr type="and" result="true"/>
	        </test>

        <!-- TESTS DE ENDPOINTS -->
        	<!-- TEST DE ENDPOINT DE GetProblemsAffectedNetwork - new obtener problemas afectados -->
	            <test id="tst_endpoint_gpan_isok">
	            	<expr type="and">
	                <reference type="check" id="chk_gpan_err_code_ok"/>
	                <reference type="check" id="chk_gpan_http_code_ok"/>
	              </expr>
	            </test>
			<!-- SCB 20230322 - SP2603 - INICIO -->
			<!-- TEST DE ENDPOINT DE GetProblemsAffectedNetwork - new obtener problemas afectados -->
	            <test id="tst_endpoint_oir_isok">
	            	<expr type="and">
	                <reference type="check" id="chk_oir_err_code_ok"/>
	                <reference type="check" id="chk_oir_http_code_ok"/>
	              </expr>
	            </test>
			<!-- SCB 20230322 - SP2603 - FIN -->
        	<!-- TEST DE ENDPOINT DE GetRepeatedIncidents - new incidencias reiteradas-->
	            <test id="tst_endpoint_gri_isok">
	            	<expr type="and">
	                <reference type="check" id="chk_gri_err_code_ok"/>
	                <reference type="check" id="chk_gri_http_code_ok"/>
	              </expr>
	            </test>
        	<!-- TEST DE ENDPOINT DE OpenIncidents new incidencias abiertas-->
	            <test id="tst_endpoint_oi_isok">
	            	<expr type="and">
	                <reference type="check" id="chk_oi_err_code_ok"/>
	                <reference type="check" id="chk_oi_http_code_ok"/>
	              </expr>
	            </test>

    	<!-- TESTS DE GetProblemsAffectedNetwork  - new obtener problemas afectados-->
    		<test id="tst_problemsnetwork_nofault">
    			<expr type="and">
	            	<!--Si el check es true, significará que no ha habido un fallo.-->
	            	<reference type="check" id="chk_gpan_faultcode_value_eq_unknown"/>
	            </expr>
	        </test> 

        	<test id="tst_network_hasnoproblems">
        		<expr type="and">
	            	<reference type="check" id="chk_gpan_problems_null_eqtrue"/>
	            </expr>
	        </test>

	        <test id="tst_network_hasproblems">
	        	<expr type="and">
	            	<reference type="check" id="chk_gpan_problems_null_equnknown"/>
	            </expr>
	        </test>

	        <test id="tst_network_statusdataproblems">
	        	<expr type="and">
	            	<reference type="check" id="chk_gpan_network_num_otros_status_eq0"/>
	            </expr>
	        </test>

	        <test id="tst_network_has_showable_problems">
	        	<expr type="and">
	        		<reference type="check" id="chk_gpan_num_showable_problems_gt0"/>
	        	</expr>
	        </test>

	        <test id="tst_network_doesnt_have_showable_problems">
	        	<expr type="and">
	        		<reference type="check" id="chk_gpan_num_showable_problems_eq0"/>
	        	</expr>
	        </test>

	        <test id="tst_gpan_ok1">
	            <expr type="and">
	                <reference type="test" id="tst_endpoint_gpan_isok"/>
	                <reference type="test" id="tst_network_hasnoproblems"/>
	            </expr>
	        </test>

	        <test id="tst_gpan_ko">
	            <expr type="and">
	                <reference type="test" id="tst_endpoint_gpan_isok" inverse="true"/>
	            </expr>
	        </test>

    	<!-- TESTS DE GetRepeatedIncidents - new incidencias reiteradas -->
        	<test id="tst_hasrepeatedincidents">
        		<expr type="and">
	            	<reference type="check" id="chk_gri_repeatedincidences_neqn"/>
	            </expr>
	        </test>

	        <test id="tst_hasopenincidences_lastmonth">
	        	<expr type="and">
	            	<reference type="check" id="chk_gri_number_openincidences_month_gt0"/>
	            </expr>
	        </test>

	        <test id="tst_hasclosedincidences_yesterday">
	        	<expr type="and">
	            	<reference type="check" id="chk_gri_number_closedincidences_day_gt0"/>
	            </expr>
	        </test>

	        <test id="tst_hasclosedincidences_lastweek">
	        	<expr type="and">
	            	<reference type="check" id="chk_gri_number_closedincidences_week_gt0"/>
	            </expr>
	        </test>

	        <test id="tst_hasclosedincidences_lastfortnight">
	        	<expr type="and">
	            	<reference type="check" id="chk_gri_number_closedincidences_fortnight_gt0"/>
	            </expr>
	        </test>

        <!-- TESTS DE OpenIncidents - new incidencias abiertas-->
        	<test id="tst_hasopenincidents">
        		<expr type="and">
	            	<reference type="check" id="chk_oi_resultado_neqfalse"/>
	            </expr>
	        </test>
		<!-- SCB 20230322 - SP2603 - INICIO -->
		<!-- TESTS de ObetenerInfoRGU -->
			<test id="tst_oir_ticketid_eq_1">
        		<expr type="and">
	            	<reference type="check" id="chk_oir_num_ticketid_eq_1"/>
	            </expr>
	        </test>
		<!-- SCB 20230322 - SP2603 - FIN -->
    </tests>

    
    <actions/>

</template>
