<?xml version='1.0' encoding='UTF-8'?>
<template version="1.0" type="role" role="device2" basename="role_device2">

    <!-- ############################################################################################## -->
    <!-- Version 1.0                                                                                    -->
    <!--  - Version de partida                                                                          -->
    <!-- ############################################################################################## -->

    <parameters>
        <parameter id="par_tvdevice_databroker_base" type="table">
          <contents>
            <value type="infosource_table" infosource="device2" endpointid="TV_STB_Details">resource.0.extraId.</value>
          </contents>
        </parameter>
        <parameter id="par_tvstbd_http_code">
          <contents>
            <value type="infosource_value" infosource="device2" endpointid="TV_STB_Details">_httpCode</value>
          </contents>
        </parameter>

        <parameter id="par_tvstbd_err_code">
          <contents>
            <value type="infosource_value" infosource="device2" endpointid="TV_STB_Details">_errCode</value>
          </contents>
        </parameter>

        <parameter id="par_tvstbd_err_desc">
          <contents>
            <value type="infosource_value" infosource="device2" endpointid="TV_STB_Details">_errDesc</value>
          </contents>
        </parameter>
		
        <parameter id="par_tvdevice_databroker_notes_base" type="table">
          <contents>
            <value type="infosource_table" infosource="device2" endpointid="TV_STB_Details">note.</value>
          </contents>
        </parameter>
        <!-- Fecha/Hora última reporte -->
        <parameter id="par_tvdevice_databroker_timestamp" type="value">
          <contents>
             <value type="parameter">par_tvdevice_databroker_notes_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">@timestamp</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">2</value></arg></args>
            </operation>
          </sequence>
        </parameter>

        <parameter id="par_tvdevice_databroker_timestamp_parseado" type="value">
          <contents>
             <value type="parameter">par_tvdevice_databroker_timestamp</value>
          </contents>
		  <sequence>
			<operation type="parse_date">
				<args><arg><value type="value">yyyy-MM-dd HH:mm:SS.s</value></arg></args>
			</operation>
		  </sequence>
        </parameter>
            <parameter id="par_tvdevice_databroker_timestamp_vs_actual">
              <contents>
                <operation type="localtimestamp"/>
              </contents>
              <sequence>
                <operation type="subtract_value">
                    <args><arg><value type="parameter">par_timestamp</value></arg></args>
                </operation>
                <operation type="divide_value">
                    <args><arg><value type="value">360000</value></arg></args>
                </operation>
                <operation type="multiply_value">
                    <args><arg><value type="value">0.6</value></arg></args>
                </operation>
                
              </sequence>
            </parameter>

		
		
		
		
        <!-- Brillo Pantalla -->
        <parameter id="par_tvdevice_databroker_scblv" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">SCBLV</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- SiteGuid -->
        <parameter id="par_tvdevice_databroker_userid" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">UserID</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- Versión App. -->
        <parameter id="par_tvdevice_databroker_apver" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">APVER</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- ID Cía Operadora -->
        <parameter id="par_tvdevice_databroker_opcoid" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">OpCoID</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- AUTHN -->
        <parameter id="par_tvdevice_databroker_authn" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">AUTHN</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- Volumen Audio -->
        <parameter id="par_tvdevice_databroker_cal" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">CAL</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- Domain ID -->
        <parameter id="par_tvdevice_databroker_householdid" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">HouseholdID</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- SWPRM -->
        <parameter id="par_tvdevice_databroker_swprm" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">SWPRM</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- Submáscara de red -->
        <parameter id="par_tvdevice_databroker_ipmsk" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">IPMsk</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- Versión sistema operativo -->
        <parameter id="par_tvdevice_databroker_swver" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">SWVER</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- Modelo Comercial Dispositivo -->
        <parameter id="par_tvdevice_databroker_mdnme" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">MDNME</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- Parental rating control -->
        <parameter id="par_tvdevice_databroker_prst" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">PRSt</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- Uso de memoria -->
        <parameter id="par_tvdevice_databroker_dmuse" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">DMUSE</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- Estado dispositivo -->
        <parameter id="par_tvdevice_databroker_apmod" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">APMOD</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- Subtitulos -->
        <parameter id="par_tvdevice_databroker_aud_ds" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">AudDs</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- Type -->
        <parameter id="par_tvdevice_databroker_type" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">type</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- Nivel batería -->
        <parameter id="par_tvdevice_databroker_batlv" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">BATLV</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- PAKST -->
        <parameter id="par_tvdevice_databroker_pakst" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">PAKST</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- Tipo de conexión -->
        <parameter id="par_tvdevice_databroker_ntype" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">NType</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- Uso memoria UI -->
        <parameter id="par_tvdevice_databroker_amuse" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">AMUSE</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- Versión HW dispositivo -->
        <parameter id="par_tvdevice_databroker_hwver" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">HWVER</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- DNS Primario -->
        <parameter id="par_tvdevice_databroker_prdns" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">PrDNS</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- Entorno conexión -->
        <parameter id="par_tvdevice_databroker_envrm" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">ENVRM</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- Fabricante -->
        <parameter id="par_tvdevice_databroker_brnme" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">BRNME</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- ID Dispositivo -->
        <parameter id="par_tvdevice_databroker_deviceid" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">DeviceID</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- Memoria disponible (MB) -->
        <parameter id="par_tvdevice_databroker_dmfre" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">DMFRE</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- IP Privada -->
        <parameter id="par_tvdevice_databroker_prvip" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">PrvIP</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- WIFI SSID -->
        <parameter id="par_tvdevice_databroker_ssid" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">SSID</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- Idioma -->
        <parameter id="par_tvdevice_databroker_dlang" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">DLANG</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- Dns Secundario -->
        <parameter id="par_tvdevice_databroker_scdns" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">ScDNS</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- Ultima sinc. EPG -->
        <parameter id="par_tvdevice_databroker_epgv" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">EPGv</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <parameter id="par_tvdevice_databroker_parseado" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_epgv</value>
          </contents>
		  <sequence>
			<operation type="parse_date">
				<args><arg><value type="value">yyyy-MM-dd'T'HH:mm:SS.s</value></arg></args>
			</operation>
		  </sequence>
        </parameter>
		<parameter id="par_tvdevice_databroker_epgv_vs_timestamp">
		  <contents>
			<operation type="localtimestamp"/>
		  </contents>
		  <sequence>
			<operation type="subtract_value">
				<args><arg><value type="parameter">par_timestamp</value></arg></args>
			</operation>
			<operation type="divide_value">
				<args><arg><value type="value">360000</value></arg></args>
			</operation>
			<operation type="multiply_value">
				<args><arg><value type="value">0.6</value></arg></args>
			</operation>
			<operation type="divide_value">
				<args><arg><value type="value">60</value></arg></args>
			</operation>
			
		  </sequence>
		</parameter>
        <!-- EventGroupID -->
        <parameter id="par_tvdevice_databroker_eventgroupid" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">EventGroupID</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- Audio accesible -->
        <parameter id="par_tvdevice_databroker_subst" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">SubSt</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- EventTypeID -->
        <parameter id="par_tvdevice_databroker_eventtypeid" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">EventTypeID</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- local_time -->
        <parameter id="par_tvdevice_databroker_localtime" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_notes_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">local_time</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">2</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <!-- V Navegador Int -->
        <parameter id="par_tvdevice_databroker_ua" type="value">
           <contents>
             <value type="parameter">par_tvdevice_databroker_base</value>
          </contents>
          <sequence>
            <operation type="column_index">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">UA</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
          </sequence>
        </parameter>
		
		<!-- PARAMETROS COMPROBACIONES -->
        <parameter id="par_tvdevice_databroker_lookup" type="table">
          <contents>
             <value type="lookup">umbrales_tvdevices</value>
          </contents>
          <sequence>
          <operation type="row_delimiter">
            <args><arg><value type="value">;</value></arg></args>
          </operation>
          <operation type="column_delimiter">
            <args><arg><value type="value">_</value></arg></args>
          </operation>
          </sequence>
        </parameter>
      <parameter id="par_tvdevice_umbrales_timestamp_gt" type="value">
        <contents>
          <value type="parameter">par_tvdevice_databroker_lookup</value>
        </contents>
        <sequence>
          <operation type="column_index">
            <args><arg><value type="value">1</value></arg></args>
          </operation>
          <operation type="column_contain">
            <args><arg><value type="value">timestamp</value></arg></args>
          </operation>
          <operation type="column_selector">
            <args><arg><value type="value">2</value></arg></args>
          </operation>
        </sequence>
      </parameter>
      <parameter id="par_tvdevice_umbrales_cal_lt" type="value">
        <contents>
          <value type="parameter">par_tvdevice_databroker_lookup</value>
        </contents>
        <sequence>
          <operation type="column_index">
            <args><arg><value type="value">1</value></arg></args>
          </operation>
          <operation type="column_contain">
            <args><arg><value type="value">CAL</value></arg></args>
          </operation>
          <operation type="column_selector">
            <args><arg><value type="value">2</value></arg></args>
          </operation>
        </sequence>
      </parameter>
      <parameter id="par_tvdevice_umbrales_dmfree_lt" type="value">
        <contents>
          <value type="parameter">par_tvdevice_databroker_lookup</value>
        </contents>
        <sequence>
          <operation type="column_index">
            <args><arg><value type="value">1</value></arg></args>
          </operation>
          <operation type="column_contain">
            <args><arg><value type="value">DMFRE</value></arg></args>
          </operation>
          <operation type="column_selector">
            <args><arg><value type="value">2</value></arg></args>
          </operation>
        </sequence>
      </parameter>
      <parameter id="par_tvdevice_umbrales_prst_distinct" type="value">
        <contents>
          <value type="parameter">par_tvdevice_databroker_lookup</value>
        </contents>
        <sequence>
          <operation type="column_index">
            <args><arg><value type="value">1</value></arg></args>
          </operation>
          <operation type="column_contain">
            <args><arg><value type="value">PRSt</value></arg></args>
          </operation>
          <operation type="column_selector">
            <args><arg><value type="value">2</value></arg></args>
          </operation>
        </sequence>
      </parameter>
      <parameter id="par_tvdevice_umbrales_ntype_wifi" type="value">
        <contents>
          <value type="parameter">par_tvdevice_databroker_lookup</value>
        </contents>
        <sequence>
          <operation type="column_index">
            <args><arg><value type="value">1</value></arg></args>
          </operation>
          <operation type="column_contain">
            <args><arg><value type="value">NType wifi</value></arg></args>
          </operation>
          <operation type="column_selector">
            <args><arg><value type="value">2</value></arg></args>
          </operation>
        </sequence>
      </parameter>
      <parameter id="par_tvdevice_umbrales_ntype_3or4g" type="value">
        <contents>
          <value type="parameter">par_tvdevice_databroker_lookup</value>
        </contents>
        <sequence>
          <operation type="column_index">
            <args><arg><value type="value">1</value></arg></args>
          </operation>
          <operation type="column_contain">
            <args><arg><value type="value">NType 3/4g</value></arg></args>
          </operation>
          <operation type="column_selector">
            <args><arg><value type="value">2</value></arg></args>
          </operation>
        </sequence>
      </parameter>
      <parameter id="par_tvdevice_umbrales_epgv_null" type="value">
        <contents>
          <value type="parameter">par_tvdevice_databroker_lookup</value>
        </contents>
        <sequence>
          <operation type="column_index">
            <args><arg><value type="value">1</value></arg></args>
          </operation>
          <operation type="column_contain">
            <args><arg><value type="value">EPGvnull</value></arg></args>
          </operation>
          <operation type="column_selector">
            <args><arg><value type="value">2</value></arg></args>
          </operation>
        </sequence>
      </parameter>
      <parameter id="par_tvdevice_umbrales_epgv_umbral" type="value">
        <contents>
          <value type="parameter">par_tvdevice_databroker_lookup</value>
        </contents>
        <sequence>
          <operation type="column_index">
            <args><arg><value type="value">1</value></arg></args>
          </operation>
          <operation type="column_contain">
            <args><arg><value type="value">EPGvumbral</value></arg></args>
          </operation>
          <operation type="column_selector">
            <args><arg><value type="value">2</value></arg></args>
          </operation>
        </sequence>
      </parameter>
	  <!-- MENSAJES -->
      <parameter id="par_tvdevice_umbrales_msg_timestamp_gt" type="value">
        <contents>
          <value type="parameter">par_tvdevice_databroker_lookup</value>
        </contents>
        <sequence>
          <operation type="column_index">
            <args><arg><value type="value">1</value></arg></args>
          </operation>
          <operation type="column_contain">
            <args><arg><value type="value">timestamp</value></arg></args>
          </operation>
          <operation type="column_selector">
            <args><arg><value type="value">3</value></arg></args>
          </operation>
        </sequence>
      </parameter>
      <parameter id="par_tvdevice_umbrales_msg_cal_lt" type="value">
        <contents>
          <value type="parameter">par_tvdevice_databroker_lookup</value>
        </contents>
        <sequence>
          <operation type="column_index">
            <args><arg><value type="value">1</value></arg></args>
          </operation>
          <operation type="column_contain">
            <args><arg><value type="value">CAL</value></arg></args>
          </operation>
          <operation type="column_selector">
            <args><arg><value type="value">3</value></arg></args>
          </operation>
        </sequence>
      </parameter>
      <parameter id="par_tvdevice_umbrales_msg_dmfree_lt" type="value">
        <contents>
          <value type="parameter">par_tvdevice_databroker_lookup</value>
        </contents>
        <sequence>
          <operation type="column_index">
            <args><arg><value type="value">1</value></arg></args>
          </operation>
          <operation type="column_contain">
            <args><arg><value type="value">DMFRE</value></arg></args>
          </operation>
          <operation type="column_selector">
            <args><arg><value type="value">3</value></arg></args>
          </operation>
        </sequence>
      </parameter>
      <parameter id="par_tvdevice_umbrales_msg_prst_distinct" type="value">
        <contents>
          <value type="parameter">par_tvdevice_databroker_lookup</value>
        </contents>
        <sequence>
          <operation type="column_index">
            <args><arg><value type="value">1</value></arg></args>
          </operation>
          <operation type="column_contain">
            <args><arg><value type="value">PRSt</value></arg></args>
          </operation>
          <operation type="column_selector">
            <args><arg><value type="value">3</value></arg></args>
          </operation>
        </sequence>
      </parameter>
      <parameter id="par_tvdevice_umbrales_msg_ntype_wifi" type="value">
        <contents>
          <value type="parameter">par_tvdevice_databroker_lookup</value>
        </contents>
        <sequence>
          <operation type="column_index">
            <args><arg><value type="value">1</value></arg></args>
          </operation>
          <operation type="column_contain">
            <args><arg><value type="value">NType wifi</value></arg></args>
          </operation>
          <operation type="column_selector">
            <args><arg><value type="value">3</value></arg></args>
          </operation>
        </sequence>
      </parameter>
      <parameter id="par_tvdevice_umbrales_msg_ntype_3or4g" type="value">
        <contents>
          <value type="parameter">par_tvdevice_databroker_lookup</value>
        </contents>
        <sequence>
          <operation type="column_index">
            <args><arg><value type="value">1</value></arg></args>
          </operation>
          <operation type="column_contain">
            <args><arg><value type="value">NType 3/4g</value></arg></args>
          </operation>
          <operation type="column_selector">
            <args><arg><value type="value">3</value></arg></args>
          </operation>
        </sequence>
      </parameter>
      <parameter id="par_tvdevice_umbrales_msg_epgv_null" type="value">
        <contents>
          <value type="parameter">par_tvdevice_databroker_lookup</value>
        </contents>
        <sequence>
          <operation type="column_index">
            <args><arg><value type="value">1</value></arg></args>
          </operation>
          <operation type="column_contain">
            <args><arg><value type="value">EPGvnull</value></arg></args>
          </operation>
          <operation type="column_selector">
            <args><arg><value type="value">3</value></arg></args>
          </operation>
        </sequence>
      </parameter>
      <parameter id="par_tvdevice_umbrales_msg_epgv_umbral" type="value">
        <contents>
          <value type="parameter">par_tvdevice_databroker_lookup</value>
        </contents>
        <sequence>
          <operation type="column_index">
            <args><arg><value type="value">1</value></arg></args>
          </operation>
          <operation type="column_contain">
            <args><arg><value type="value">EPGvumbral</value></arg></args>
          </operation>
          <operation type="column_selector">
            <args><arg><value type="value">3</value></arg></args>
          </operation>
        </sequence>
      </parameter>

		<!-- JJSM 20220125 - CON_029 - INICIO -->
        <parameter id="par_tvstbd_ctty_table" type="table">
          <contents>
            <value type="infosource_table" infosource="device2" endpointid="TV_STB_Details">resource.</value>
          </contents>
          <sequence>
            <operation type="header_selector">
              <args><arg><value type="value">extraId.schemeName;extraId.value.Live.Last Usage;extraId.value.NPVR.Last Usage;extraId.value.Rolling Buffer CatchUp.Last Usage;extraId.value.VOD.Last Usage</value></arg></args>
            </operation>
            <operation type="remove_pattern">
              <args><arg><value type="value">extraId.value.</value></arg></args>
            </operation>
            <operation type="column_index">
              <args><arg><value type="value">1</value></arg></args>
            </operation>
            <operation type="column_equal">
              <args><arg><value type="value">CTTY_Result</value></arg></args>
            </operation>
            <operation type="add_header">
              <args><arg><value type="value">ID;Live.Last Usage;NPVR.Last Usage;CatchUp.Last Usage;VOD.Last Usage</value></arg></args>
            </operation>
            <operation type="first_column">
              <args><arg><value type="value">2</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <parameter id="par_lookup_pruebas_uso_obligatorias" type="table">
            <contents>
                <value type="lookup">tv_pruebas_uso</value>
            </contents>
            <sequence>
                <operation type="replace_pattern">
                    <args><arg><value type="value">Installation,Maintenance@to@Installation;Maintenance</value></arg></args>
                </operation>
                <operation type="row_delimiter">
                    <args><arg><value type="value">#</value></arg></args>
                </operation>
                <operation type="column_delimiter">
                    <args><arg><value type="value">,</value></arg></args>
                </operation>
            </sequence>
        </parameter>
            <parameter id="par_prueba_uso_live_obligatoria" type="value">
              <contents>
                <value type="parameter">par_lookup_pruebas_uso_obligatorias</value>
              </contents>
              <sequence>
                <operation type="column_index">
                    <args><arg><value type="value">1</value></arg></args>
                </operation>
                <operation type="column_equal">
                    <args><arg><value type="value">Live</value></arg></args>
                </operation>
                <operation type="column_selector">
                    <args><arg><value type="value">2</value></arg></args>
                </operation>
              </sequence>
            </parameter>
            <parameter id="par_prueba_uso_pvr_obligatoria" type="value">
              <contents>
                <value type="parameter">par_lookup_pruebas_uso_obligatorias</value>
              </contents>
              <sequence>
                <operation type="column_index">
                    <args><arg><value type="value">1</value></arg></args>
                </operation>
                <operation type="column_equal">
                    <args><arg><value type="value">PVR</value></arg></args>
                </operation>
                <operation type="column_selector">
                    <args><arg><value type="value">2</value></arg></args>
                </operation>
              </sequence>
            </parameter>
            <parameter id="par_prueba_uso_catchaup_obligatoria" type="value">
              <contents>
                <value type="parameter">par_lookup_pruebas_uso_obligatorias</value>
              </contents>
              <sequence>
                <operation type="column_index">
                    <args><arg><value type="value">1</value></arg></args>
                </operation>
                <operation type="column_equal">
                    <args><arg><value type="value">CatchaUp</value></arg></args>
                </operation>
                <operation type="column_selector">
                    <args><arg><value type="value">2</value></arg></args>
                </operation>
              </sequence>
            </parameter>
            <parameter id="par_prueba_uso_vod_obligatoria" type="value">
              <contents>
                <value type="parameter">par_lookup_pruebas_uso_obligatorias</value>
              </contents>
              <sequence>
                <operation type="column_index">
                    <args><arg><value type="value">1</value></arg></args>
                </operation>
                <operation type="column_equal">
                    <args><arg><value type="value">VoD</value></arg></args>
                </operation>
                <operation type="column_selector">
                    <args><arg><value type="value">2</value></arg></args>
                </operation>
              </sequence>
            </parameter>
            <parameter id="par_prueba_uso_live_tipo" type="value">
              <contents>
                <value type="parameter">par_lookup_pruebas_uso_obligatorias</value>
              </contents>
              <sequence>
                <operation type="column_index">
                    <args><arg><value type="value">1</value></arg></args>
                </operation>
                <operation type="column_equal">
                    <args><arg><value type="value">Live</value></arg></args>
                </operation>
                <operation type="column_selector">
                    <args><arg><value type="value">3</value></arg></args>
                </operation>
              </sequence>
            </parameter>
            <parameter id="par_prueba_uso_pvr_tipo" type="value">
              <contents>
                <value type="parameter">par_lookup_pruebas_uso_obligatorias</value>
              </contents>
              <sequence>
                <operation type="column_index">
                    <args><arg><value type="value">1</value></arg></args>
                </operation>
                <operation type="column_equal">
                    <args><arg><value type="value">PVR</value></arg></args>
                </operation>
                <operation type="column_selector">
                    <args><arg><value type="value">3</value></arg></args>
                </operation>
              </sequence>
            </parameter>
            <parameter id="par_prueba_uso_catchaup_tipo" type="value">
              <contents>
                <value type="parameter">par_lookup_pruebas_uso_obligatorias</value>
              </contents>
              <sequence>
                <operation type="column_index">
                    <args><arg><value type="value">1</value></arg></args>
                </operation>
                <operation type="column_equal">
                    <args><arg><value type="value">CatchaUp</value></arg></args>
                </operation>
                <operation type="column_selector">
                    <args><arg><value type="value">3</value></arg></args>
                </operation>
              </sequence>
            </parameter>
            <parameter id="par_prueba_uso_vod_tipo" type="value">
              <contents>
                <value type="parameter">par_lookup_pruebas_uso_obligatorias</value>
              </contents>
              <sequence>
                <operation type="column_index">
                    <args><arg><value type="value">1</value></arg></args>
                </operation>
                <operation type="column_equal">
                    <args><arg><value type="value">VoD</value></arg></args>
                </operation>
                <operation type="column_selector">
                    <args><arg><value type="value">3</value></arg></args>
                </operation>
              </sequence>
            </parameter>
			
        <parameter id="par_prueba_live_value" type="value">
          <contents>
            <value type="parameter">par_tvstbd_ctty_table</value>
          </contents>
          <sequence>
            <operation type="column_selector">
              <args><arg><value type="value">1</value></arg></args>
            </operation>
            <operation type="row_selector">
              <args><arg><value type="value">2</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <parameter id="par_prueba_npvr_value" type="value">
          <contents>
            <value type="parameter">par_tvstbd_ctty_table</value>
          </contents>
          <sequence>
            <operation type="column_selector">
              <args><arg><value type="value">2</value></arg></args>
            </operation>
            <operation type="row_selector">
              <args><arg><value type="value">2</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <parameter id="par_prueba_catchaup_value" type="value">
          <contents>
            <value type="parameter">par_tvstbd_ctty_table</value>
          </contents>
          <sequence>
            <operation type="column_selector">
              <args><arg><value type="value">3</value></arg></args>
            </operation>
            <operation type="row_selector">
              <args><arg><value type="value">2</value></arg></args>
            </operation>
          </sequence>
        </parameter>
        <parameter id="par_prueba_vod_value" type="value">
          <contents>
            <value type="parameter">par_tvstbd_ctty_table</value>
          </contents>
          <sequence>
            <operation type="column_selector">
              <args><arg><value type="value">4</value></arg></args>
            </operation>
            <operation type="row_selector">
              <args><arg><value type="value">2</value></arg></args>
            </operation>
          </sequence>
        </parameter>
		<!-- JJSM 20220125 - CON_029 - FIN -->
		
      <parameter id="par_timestamp" type="value">
        <contents>
          <value type="localtimestamp"/>
        </contents>
      </parameter>
		
    <!-- SCB 20230123 - SP2403 - INICIO -->
        <parameter id="par_ki_id_base_table" type="table">
          <contents>
            <value type="infosource_table" infosource="tvplatform" endpointid="Kaltura_Informacion">id.</value>
          </contents>
          <sequence>
            <operation type="header_selector">
              <args><arg><value type="value">schemeName;Value</value></arg></args>
            </operation>
            <operation type="unique_rows"/>
            </sequence>
        </parameter>
        <parameter id="par_ki_id_base_table_consent_version" type="value">
          <contents>
            <value type="parameter">par_ki_id_base_table</value>
          </contents>
      	 <sequence>
            <operation type="column_equal">
              <args><arg><value type="value">_GDPR_Consent_Version</value></arg></args>
            </operation>
            <operation type="column_selector">
              <args><arg><value type="value">2</value></arg></args>
            </operation>
          </sequence>
        </parameter>
    <!-- SCB 20230123 - SP2403 - FIN -->
    </parameters>
	
    <checks>
      <!--Checks de TV_STB_Details-->
        <check id="chk_tvstbd_http_code_ok">
          <parameter>par_tvstbd_http_code</parameter>
          <result>
            <expr type="and">
              <operation type="greater_or_equal">
                <args><arg><value type="value">200</value></arg></args>
              </operation>
              <operation type="lower">
                <args><arg><value type="value">300</value></arg></args>
              </operation>
            </expr>
          </result>
        </check>

        <check id="chk_tvstbd_http_code_404_not_found">
          <parameter>par_tvstbd_http_code</parameter>
          <result>
            <expr type="and">
              <operation type="equal">
                <args><arg><value type="value">404</value></arg></args>
              </operation>
            </expr>
          </result>
        </check>

        <check id="chk_tvstbd_err_code_ok">
          <parameter>par_tvstbd_err_code</parameter>
          <result>
            <expr type="and">
              <operation type="equal">
                <args><arg><value type="value">0</value></arg></args>
              </operation>
            </expr>
          </result>
        </check>
	
        <check id="chk_tvstbd_timestamp_gt_umbral">
          <parameter>par_tvdevice_databroker_timestamp_vs_actual</parameter>
          <result>
            <expr type="and">
              <operation type="greater">
                <args><arg><value type="parameter">par_tvdevice_umbrales_timestamp_gt</value></arg></args>
              </operation>
            </expr>
          </result>
        </check>
        <check id="chk_tvstbd_cal_lt_umbral">
          <parameter>par_tvdevice_databroker_cal</parameter>
          <result>
            <expr type="and">
              <operation type="lower">
                <args><arg><value type="parameter">par_tvdevice_umbrales_cal_lt	</value></arg></args>
              </operation>
            </expr>
          </result>
        </check>
        <check id="chk_tvstbd_dmfree_lt_umbral">
          <parameter>par_tvdevice_databroker_dmfre</parameter>
          <result>
            <expr type="and">
              <operation type="lower">
                <args><arg><value type="parameter">par_tvdevice_umbrales_dmfree_lt</value></arg></args>
              </operation>
            </expr>
          </result>
        </check>
        <check id="chk_tvstbd_prst_neq_umbral">
          <parameter>par_tvdevice_databroker_prst</parameter>
          <result>
            <expr type="and">
              <operation type="not_equal">
                <args><arg><value type="parameter">par_tvdevice_umbrales_prst_distinct</value></arg></args>
              </operation>
            </expr>
          </result>
        </check>
        <check id="chk_tvstbd_ntype_neq_umbral">
          <parameter>par_tvdevice_databroker_ntype</parameter>
          <result>
            <expr type="and">
              <operation type="equal">
                <args><arg><value type="parameter">par_tvdevice_umbrales_ntype_wifi</value></arg></args>
              </operation>
            </expr>
          </result>
        </check>
        <check id="chk_tvstbd_ntype_contains_3g_4g">
          <parameter>par_tvdevice_umbrales_ntype_3or4g</parameter>
          <result>
            <expr type="and">
              <operation type="contains">
                <args><arg><value type="parameter">par_tvdevice_databroker_ntype</value></arg></args>
              </operation>
            </expr>
          </result>
        </check>
        <check id="chk_tvstbd_epgv_eq_null">
          <parameter>par_tvdevice_databroker_epgv</parameter>
          <result>
            <expr type="and">
              <operation type="equal">
                <args><arg><value type="parameter">par_tvdevice_umbrales_epgv_null</value></arg></args>
              </operation>
            </expr>
          </result>
        </check>
        <check id="chk_tvstbd_epgv_gt_umbral">
          <parameter>par_tvdevice_databroker_epgv_vs_timestamp</parameter>
          <result>
            <expr type="and">
              <operation type="equal">
                <args><arg><value type="parameter">par_tvdevice_umbrales_epgv_null</value></arg></args>
              </operation>
            </expr>
          </result>
        </check>
		<!-- JJSM 20220125 - CON_029 - INICIO -->
		<check id="chk_prueba_uso_live_eq_na">
			<parameter>par_prueba_live_value</parameter>
			<result>
				<expr type="or">
					<operation type="equal">
						<args><arg><value type="value">NA</value></arg></args>
					</operation>
					<operation type="equal">
						<args><arg><value type="value">unknown</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_live_neq_na">
			<parameter>par_prueba_live_value</parameter>
			<result>
				<expr type="and">
					<operation type="not_equal">
						<args><arg><value type="value">NA</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_npvr_eq_na">
			<parameter>par_prueba_npvr_value</parameter>
			<result>
				<expr type="or">
					<operation type="equal">
						<args><arg><value type="value">NA</value></arg></args>
					</operation>
					<operation type="equal">
						<args><arg><value type="value">unknown</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_npvr_neq_na">
			<parameter>par_prueba_npvr_value</parameter>
			<result>
				<expr type="and">
					<operation type="not_equal">
						<args><arg><value type="value">NA</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_catchaup_eq_na">
			<parameter>par_prueba_catchaup_value</parameter>
			<result>
				<expr type="or">
					<operation type="equal">
						<args><arg><value type="value">NA</value></arg></args>
					</operation>
					<operation type="equal">
						<args><arg><value type="value">unknown</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_catchaup_neq_na">
			<parameter>par_prueba_catchaup_value</parameter>
			<result>
				<expr type="and">
					<operation type="not_equal">
						<args><arg><value type="value">NA</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_vod_eq_na">
			<parameter>par_prueba_vod_value</parameter>
			<result>
				<expr type="or">
					<operation type="equal">
						<args><arg><value type="value">NA</value></arg></args>
					</operation>
					<operation type="equal">
						<args><arg><value type="value">unknown</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_vod_neq_na">
			<parameter>par_prueba_vod_value</parameter>
			<result>
				<expr type="and">
					<operation type="not_equal">
						<args><arg><value type="value">NA</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		
		
		<check id="chk_prueba_uso_live_obligatoria_si">
			<parameter>par_prueba_uso_live_obligatoria</parameter>
			<result>
				<expr type="and">
					<operation type="equal">
						<args><arg><value type="value">Si</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_live_obligatoria_no">
			<parameter>par_prueba_uso_live_obligatoria</parameter>
			<result>
				<expr type="and">
					<operation type="equal">
						<args><arg><value type="value">No</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		
		
		
		<check id="chk_prueba_uso_pvr_obligatoria_si">
			<parameter>par_prueba_uso_pvr_obligatoria</parameter>
			<result>
				<expr type="and">
					<operation type="equal">
						<args><arg><value type="value">Si</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_pvr_obligatoria_no">
			<parameter>par_prueba_uso_pvr_obligatoria</parameter>
			<result>
				<expr type="and">
					<operation type="equal">
						<args><arg><value type="value">No</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_catchaup_obligatoria_si">
			<parameter>par_prueba_uso_catchaup_obligatoria</parameter>
			<result>
				<expr type="and">
					<operation type="equal">
						<args><arg><value type="value">Si</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_catchaup_obligatoria_no">
			<parameter>par_prueba_uso_catchaup_obligatoria</parameter>
			<result>
				<expr type="and">
					<operation type="equal">
						<args><arg><value type="value">No</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_vod_obligatoria_si">
			<parameter>par_prueba_uso_vod_obligatoria</parameter>
			<result>
				<expr type="and">
					<operation type="equal">
						<args><arg><value type="value">Si</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_vod_obligatoria_no">
			<parameter>par_prueba_uso_vod_obligatoria</parameter>
			<result>
				<expr type="and">
					<operation type="equal">
						<args><arg><value type="value">No</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		
		
		
		
		<check id="chk_prueba_uso_live_tipo_installation">
			<parameter>par_prueba_uso_live_tipo</parameter>
			<result>
				<expr type="and">
					<operation type="contains">
						<args><arg><value type="value">Installation</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_live_tipo_maintenance">
			<parameter>par_prueba_uso_live_tipo</parameter>
			<result>
				<expr type="and">
					<operation type="contains">
						<args><arg><value type="value">Maintenance</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_live_tipo_noaplica">
			<parameter>par_prueba_uso_live_tipo</parameter>
			<result>
				<expr type="and">
					<operation type="contains">
						<args><arg><value type="value">n/a</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		
		
		
		<check id="chk_prueba_uso_pvr_tipo_installation">
			<parameter>par_prueba_uso_pvr_tipo</parameter>
			<result>
				<expr type="and">
					<operation type="contains">
						<args><arg><value type="value">Installation</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_pvr_tipo_maintenance">
			<parameter>par_prueba_uso_pvr_tipo</parameter>
			<result>
				<expr type="and">
					<operation type="contains">
						<args><arg><value type="value">Maintenance</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_pvr_tipo_noaplica">
			<parameter>par_prueba_uso_pvr_tipo</parameter>
			<result>
				<expr type="and">
					<operation type="contains">
						<args><arg><value type="value">n/a</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		
		
		
		<check id="chk_prueba_uso_catchaup_tipo_installation">
			<parameter>par_prueba_uso_catchaup_tipo</parameter>
			<result>
				<expr type="and">
					<operation type="contains">
						<args><arg><value type="value">Installation</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_catchaup_tipo_maintenance">
			<parameter>par_prueba_uso_catchaup_tipo</parameter>
			<result>
				<expr type="and">
					<operation type="contains">
						<args><arg><value type="value">Maintenance</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_catchaup_tipo_noaplica">
			<parameter>par_prueba_uso_catchaup_tipo</parameter>
			<result>
				<expr type="and">
					<operation type="contains">
						<args><arg><value type="value">n/a</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		
		
		
		<check id="chk_prueba_uso_vod_tipo_installation">
			<parameter>par_prueba_uso_vod_tipo</parameter>
			<result>
				<expr type="and">
					<operation type="contains">
						<args><arg><value type="value">Installation</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_vod_tipo_maintenance">
			<parameter>par_prueba_uso_vod_tipo</parameter>
			<result>
				<expr type="and">
					<operation type="contains">
						<args><arg><value type="value">Maintenance</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_vod_tipo_noaplica">
			<parameter>par_prueba_uso_vod_tipo</parameter>
			<result>
				<expr type="and">
					<operation type="contains">
						<args><arg><value type="value">n/a</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
				
		
		<check id="chk_prueba_uso_live_tipo_vs_toa_origin">
			<parameter>par_prueba_uso_live_tipo</parameter>
			<result>
				<expr type="and">
					<operation type="contains">
						<args><arg><value type="parameter" role="certification">par_toa_origin_inst_or_mant</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_pvr_tipo_vs_toa_origin">
			<parameter>par_prueba_uso_pvr_tipo</parameter>
			<result>
				<expr type="and">
					<operation type="contains">
						<args><arg><value type="parameter" role="certification">par_toa_origin_inst_or_mant</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_catchaup_tipo_vs_toa_origin">
			<parameter>par_prueba_uso_catchaup_tipo</parameter>
			<result>
				<expr type="and">
					<operation type="contains">
						<args><arg><value type="parameter" role="certification">par_toa_origin_inst_or_mant</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<check id="chk_prueba_uso_vod_tipo_vs_toa_origin">
			<parameter>par_prueba_uso_vod_tipo</parameter>
			<result>
				<expr type="and">
					<operation type="contains">
						<args><arg><value type="parameter" role="certification">par_toa_origin_inst_or_mant</value></arg></args>
					</operation>
				</expr>
			</result>
		</check>
		<!-- JJSM 20220125 - CON_029 - FIN -->
    <!-- SCB20230123 - SP2403 - INICIO -->
    <check id="chk_par_ki_id_base_table_consent_version_eq_5">
        <parameter>par_ki_id_base_table_consent_version</parameter>
        <result>
          <expr type="and">
            <operation type="equal">
                <args><arg><value type="value">5</value></arg></args>
            </operation>
          </expr>
        </result>
    </check>
    <!-- SCB20230123 - SP2403 - FIN -->
    </checks>

    <tests>
    <!--TESTS OBLIGATORIOS FUNCIONAMIENTO-->
      <test id="tst_template">
        <expr type="and" result="true"/>
      </test>


		
	  <test id="tst_endpoint_tvstbd_isok">
            <expr type="or">
              <expr type="and">
                <reference type="test" id="tst_tvstb_sindatos"/>
              </expr>
              <expr type="and">
                <reference type="check" id="chk_tvstbd_err_code_ok"/>
                <reference type="check" id="chk_tvstbd_http_code_ok"/>
              </expr>
            </expr>
        </test>
        <test id="tst_tvstb_sindatos">
          <expr type="and">
            <reference type="check" id="chk_tvstbd_http_code_404_not_found"/>
          </expr>
        </test>
        <test id="tst_tvdevice_encendido">
          <expr type="and">
            <reference type="test" id="tst_endpoint_tvstbd_isok"/>
            <reference type="test" id="tst_tvstb_sindatos" inverse="true"/>
            <reference type="test" id="tst_tvdevice_apagado" inverse="true"/>
          </expr>
        </test>
        <test id="tst_tvdevice_apagado">
          <expr type="and">
            <reference type="test" id="tst_endpoint_tvstbd_isok"/>
            <reference type="test" id="tst_tvstb_sindatos" inverse="true"/>
            <reference type="check" id="chk_tvstbd_timestamp_gt_umbral"/>
          </expr>
        </test>
        <test id="tst_tvstbd_cal_lt_umbral">
          <expr type="and">
            <reference type="test" id="tst_endpoint_tvstbd_isok"/>
            <reference type="test" id="tst_tvstb_sindatos" inverse="true"/>
            <reference type="check" id="chk_tvstbd_cal_lt_umbral"/>
          </expr>
        </test>
        <test id="tst_tvstbd_dmfree_lt_umbral">
          <expr type="and">
            <reference type="test" id="tst_endpoint_tvstbd_isok"/>
            <reference type="test" id="tst_tvstb_sindatos" inverse="true"/>
            <reference type="check" id="chk_tvstbd_dmfree_lt_umbral"/>
          </expr>
        </test>
        <test id="tst_tvstbd_prst_neq_umbral">
          <expr type="and">
            <reference type="test" id="tst_endpoint_tvstbd_isok"/>
            <reference type="test" id="tst_tvstb_sindatos" inverse="true"/>
            <reference type="check" id="chk_tvstbd_prst_neq_umbral"/>
          </expr>
        </test>
        <test id="tst_tvstbd_ntype_neq_umbral">
          <expr type="and">
            <reference type="test" id="tst_endpoint_tvstbd_isok"/>
            <reference type="test" id="tst_tvstb_sindatos" inverse="true"/>
            <reference type="check" id="chk_tvstbd_ntype_neq_umbral"/>
          </expr>
        </test>
        <test id="tst_tvstbd_ntype_contains_3g_4g">
          <expr type="and">
            <reference type="test" id="tst_endpoint_tvstbd_isok"/>
            <reference type="test" id="tst_tvstb_sindatos" inverse="true"/>
            <reference type="check" id="chk_tvstbd_ntype_contains_3g_4g"/>
          </expr>
        </test>
        <test id="tst_tvstbd_epgv_eq_null">
          <expr type="and">
            <reference type="test" id="tst_endpoint_tvstbd_isok"/>
            <reference type="test" id="tst_tvstb_sindatos" inverse="true"/>
            <reference type="check" id="chk_tvstbd_epgv_eq_null"/>
          </expr>
        </test>
        <test id="tst_tvstbd_epgv_gt_umbral">
          <expr type="and">
            <reference type="test" id="tst_endpoint_tvstbd_isok"/>
            <reference type="test" id="tst_tvstb_sindatos" inverse="true"/>
            <reference type="check" id="chk_tvstbd_epgv_gt_umbral"/>
          </expr>
        </test>
        <test id="tst_tvstbd_epgv_no_actualizada">
          <expr type="and">
			<reference type="test" id="tst_endpoint_tvstbd_isok"/>
			<reference type="test" id="tst_tvstb_sindatos" inverse="true"/>
			<expr type="or">
				<reference type="test" id="tst_tvstbd_epgv_eq_null"/>
				<reference type="check" id="chk_tvstbd_epgv_gt_umbral"/>
			</expr>
          </expr>
        </test>
        <test id="tst_ntype_wifi_or_datos">
          <expr type="or">
			<reference type="test" id="tst_endpoint_tvstbd_isok"/>
			<reference type="test" id="tst_tvstb_sindatos" inverse="true"/>
			<expr type="or">
				<reference type="test" id="tst_tvstbd_ntype_contains_3g_4g"/>
				<reference type="test" id="tst_tvstbd_ntype_neq_umbral"/>
			</expr>
          </expr>
        </test>
        <test id="tst_tvdevice_ok">
          <expr type="and">
			<reference type="test" id="tst_endpoint_tvstbd_isok"/>
			<reference type="test" id="tst_tvstb_sindatos" inverse="true"/>
            <reference type="test" id="tst_tvdevice_encendido"/>
            <reference type="test" id="tst_tvstbd_cal_lt_umbral" inverse="true"/>
            <reference type="test" id="tst_tvstbd_dmfree_lt_umbral" inverse="true"/>
            <reference type="test" id="tst_tvstbd_prst_neq_umbral" inverse="true"/>
            <reference type="test" id="tst_tvstbd_epgv_no_actualizada" inverse="true"/>
            <reference type="test" id="tst_ntype_wifi_or_datos" inverse="true"/>
          </expr>
        </test>
        <test id="tst_tvdevice_ko">
          <expr type="and">
			<reference type="test" id="tst_endpoint_tvstbd_isok"/>
			<reference type="test" id="tst_tvstb_sindatos" inverse="true"/>
            <reference type="test" id="tst_tvdevice_ok" inverse="true"/>
          </expr>
        </test>
		
		<!-- JJSM 20220125 - CON_029 - INICIO -->
		<test id="tst_prueba_uso_live_ko">
			<expr type="and">
				<reference type="check" id="chk_prueba_uso_live_eq_na"/>
			</expr>
		</test>
		<test id="tst_prueba_uso_live_ok">
			<expr type="and">
				<reference type="test" id="tst_prueba_uso_live_ko" inverse="true"/>
			</expr>
		</test>
		<test id="tst_prueba_uso_npvr_ko">
			<expr type="and">
				<reference type="check" id="chk_prueba_uso_npvr_eq_na"/>
			</expr>
		</test>
		<test id="tst_prueba_uso_npvr_ok">
			<expr type="and">
				<reference type="test" id="tst_prueba_uso_npvr_ko" inverse="true"/>
			</expr>
		</test>
		<test id="tst_prueba_uso_catchaup_ko">
			<expr type="and">
				<reference type="check" id="chk_prueba_uso_catchaup_eq_na"/>
			</expr>
		</test>
		<test id="tst_prueba_uso_catchaup_ok">
			<expr type="and">
				<reference type="test" id="tst_prueba_uso_catchaup_ko" inverse="true"/>
			</expr>
		</test>
		<test id="tst_prueba_uso_vod_ko">
			<expr type="and">
				<reference type="check" id="chk_prueba_uso_vod_eq_na"/>
			</expr>
		</test>
		<test id="tst_prueba_uso_vod_ok">
			<expr type="and">
				<reference type="test" id="tst_prueba_uso_vod_ko" inverse="true"/>
			</expr>
		</test>

		<test id="tst_prueba_uso_live_obligatoria_si">
			<expr type="and">
				<reference type="check" id="chk_prueba_uso_live_obligatoria_si"/>
			</expr>
		</test>
		<test id="tst_prueba_uso_live_obligatoria_no">
			<expr type="and">
				<reference type="check" id="chk_prueba_uso_live_obligatoria_no"/>
			</expr>
		</test>
		<test id="tst_prueba_uso_pvr_obligatoria_si">
			<expr type="and">
				<reference type="check" id="chk_prueba_uso_pvr_obligatoria_si"/>
			</expr>
		</test>
		<test id="tst_prueba_uso_pvr_obligatoria_no">
			<expr type="and">
				<reference type="check" id="chk_prueba_uso_pvr_obligatoria_no"/>
			</expr>
		</test>
		<test id="tst_prueba_uso_catchaup_obligatoria_si">
			<expr type="and">
				<reference type="check" id="chk_prueba_uso_catchaup_obligatoria_si"/>
			</expr>
		</test>
		<test id="tst_prueba_uso_catchaup_obligatoria_no">
			<expr type="and">
				<reference type="check" id="chk_prueba_uso_catchaup_obligatoria_no"/>
			</expr>
		</test>
		<test id="tst_prueba_uso_vod_obligatoria_si">
			<expr type="and">
				<reference type="check" id="chk_prueba_uso_vod_obligatoria_si"/>
			</expr>
		</test>
		<test id="tst_prueba_uso_vod_obligatoria_no">
			<expr type="and">
				<reference type="check" id="chk_prueba_uso_vod_obligatoria_no"/>
			</expr>
		</test>
		
		
		<test id="tst_tipo_prueba_live_obligatorio">
			<expr type="and">
				<reference type="check" id="chk_prueba_uso_live_tipo_vs_toa_origin"/>
			</expr>
		</test>
		<test id="tst_tipo_prueba_pvr_obligatorio">
			<expr type="and">
				<reference type="check" id="chk_prueba_uso_pvr_tipo_vs_toa_origin"/>
			</expr>
		</test>
		<test id="tst_tipo_prueba_catchaup_obligatorio">
			<expr type="and">
				<reference type="check" id="chk_prueba_uso_catchaup_tipo_vs_toa_origin"/>
			</expr>
		</test>
		<test id="tst_tipo_prueba_vod_obligatorio">
			<expr type="and">
				<reference type="check" id="chk_prueba_uso_vod_tipo_vs_toa_origin"/>
			</expr>
		</test>
		
		<test id="tst_prueba_live_if_mandatory">
			<expr type="or">
				<reference type="test" id="tst_prueba_uso_live_obligatoria_no"/>
				<expr type="and">
					<reference type="test" id="tst_prueba_uso_live_obligatoria_si"/>
					<reference type="test" id="tst_tipo_prueba_live_obligatorio"/>
					<reference type="test" id="tst_prueba_uso_live_ok"/>
				</expr>
				<expr type="and">
					<reference type="test" id="tst_prueba_uso_live_obligatoria_si"/>
					<reference type="test" id="tst_tipo_prueba_live_obligatorio" inverse="true"/>
				</expr>
			</expr>
		</test>
		<test id="tst_prueba_pvr_if_mandatory">
			<expr type="or">
				<reference type="test" id="tst_prueba_uso_pvr_obligatoria_no"/>
				<expr type="and">
					<reference type="test" id="tst_prueba_uso_pvr_obligatoria_si"/>
					<reference type="test" id="tst_tipo_prueba_pvr_obligatorio"/>
					<reference type="test" id="tst_prueba_uso_npvr_ok"/>
				</expr>
				<expr type="and">
					<reference type="test" id="tst_prueba_uso_pvr_obligatoria_si"/>
					<reference type="test" id="tst_tipo_prueba_pvr_obligatorio" inverse="true"/>
				</expr>
			</expr>
		</test>
		<test id="tst_prueba_catchaup_if_mandatory">
			<expr type="or">
				<reference type="test" id="tst_prueba_uso_catchaup_obligatoria_no"/>
				<expr type="and">
					<reference type="test" id="tst_prueba_uso_catchaup_obligatoria_si"/>
					<reference type="test" id="tst_tipo_prueba_catchaup_obligatorio"/>
					<reference type="test" id="tst_prueba_uso_catchaup_ok"/>
				</expr>
				<expr type="and">
					<reference type="test" id="tst_prueba_uso_catchaup_obligatoria_si"/>
					<reference type="test" id="tst_tipo_prueba_catchaup_obligatorio" inverse="true"/>
				</expr>
			</expr>
		</test>
		<test id="tst_prueba_vod_if_mandatory">
			<expr type="or">
				<reference type="test" id="tst_prueba_uso_vod_obligatoria_no"/>
				<expr type="and">
					<reference type="test" id="tst_prueba_uso_vod_obligatoria_si"/>
					<reference type="test" id="tst_tipo_prueba_vod_obligatorio"/>
					<reference type="test" id="tst_prueba_uso_vod_ok"/>
				</expr>
				<expr type="and">
					<reference type="test" id="tst_prueba_uso_vod_obligatoria_si"/>
					<reference type="test" id="tst_tipo_prueba_vod_obligatorio" inverse="true"/>
				</expr>
			</expr>
		</test>
		
		<test id="tst_pruebas_uso_tv_ok">
			<expr type="and">
				<reference type="test" id="tst_prueba_live_if_mandatory"/>
				<reference type="test" id="tst_prueba_pvr_if_mandatory"/>
				<reference type="test" id="tst_prueba_catchaup_if_mandatory"/>
				<reference type="test" id="tst_prueba_vod_if_mandatory"/>
			</expr>
		</test>
        <test id="tst_leia_ok">
          <expr type="and">
            <reference type="test" id="tst_pruebas_uso_tv_ok"/>
          </expr>
        </test>
        <test id="tst_leia_ko">
          <expr type="and">
            <reference type="test" id="tst_par_consent_version_eq_5" /> <!-- SCB 20230120 - SP2403 - test que evalue true si existe consentimiento -->
            <reference type="test" id="tst_pruebas_uso_tv_ok" inverse="true"/>
          </expr>
        </test>
		<!-- JJSM 20220125 - CON_029 - FIN -->

      <!-- SCB20230123 - SP2403 - INICIO -->
      <test id="tst_par_consent_version_eq_5">
        <expr type="and">
          <reference type="check" id="chk_par_ki_id_base_table_consent_version_eq_5"/>
        </expr>
      </test>
      <!-- SCB20230123 - SP2403 - FIN -->
    </tests>
	
    <actions>
    </actions>
	
    <configuration>
    </configuration>
	
</template>