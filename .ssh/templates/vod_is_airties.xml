<?xml version='1.0' encoding='UTF-8'?>
<template infosource="airties" version="1.0" type="infosource">

<!-- ############################################################################################## --> 
<!-- Version 1.0                                                                					-->
<!--  - Version de partida                                                                          -->
<!-- ############################################################################################## -->

    <connectivity>
	    <troubleshoot>
	        <endpoints>   

                <!--API GetInventoriedSuperWifiDevicesAirties-->

                <endpoint type="ws" id="GetInventoriedSuperWifiDevicesAirties" verbose="true" lazy="true" connecttimeout="5000" requesttimeout="22000"><!--CCA20220531 - Cambia el valor de requesttimeout-->
                    <method>POST</method>
                    <url ignoreSSL="true">{url}ResourceInventorySOAP11/GetResourceInventoryList</url>
                    <args>
                        <arg type="path" id="url">
                            <value type="parameter" parameterid="par_url_bus"/>
                        </arg>
                        <arg type="header" id="Accept">
                            <value type="value"><content>application/xml</content></value>
                        </arg>
                        <arg type="header" id="X-IBM-Client-Id">
                            <value type="parameter" parameterid="par_bus_clientid"/>
                        </arg>
                        <arg type="header" id="X-VF-API-Process">
                            <value type="value"><content>GetInventoriedSuperWifiDevicesAirties</content></value>
                        </arg>
                        <arg type="header" id="Content-Type">
                            <value type="value"><content>application/xml</content></value>
                        </arg>
                    </args>
                    <body contenttype="text">
                        <text>
                            <value type="value"><content><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
                                <soapenv:Header/>
                                <soapenv:Body><v12:GetResourceInventoryListVBMRequest xmlns:v1="http://group.vodafone.com/contract/vho/header/v1" xmlns:v11="http://group.vodafone.com/schema/common/v1" xmlns:urn="urn:un:unece:uncefact:documentation:standard:CoreComponentType:2" xmlns:v12="http://group.vodafone.com/schema/vbm/resource/resource-inventory/v1">
                                <v11:Criteria>
                                    <v11:QueryExpression>
                                        <v11:QueryExpression>
                                            <v11:ValueExpression Path="/ResourceInventoryVBO/Parts/Resources/Resource/IDs/ID[@schemeName='DeviceID']" QueryOperatorCode="EQUALS">
                                                <v11:Value>]]></content></value>
                                                <value type="value"><content>unknown</content></value><!--Se deja como unknown a peticion de alvan-->
                                                <value type="value"><content><![CDATA[</v11:Value>
                                            </v11:ValueExpression>
                                            <v11:ValueExpression Path="/ResourceInventoryVBO/IDs/ID[@schemeName='GroupID']" QueryOperatorCode="EQUALS">
                                                <v11:Value>]]></content></value>
                                                <value type="parameter" parameterid="par_client_id"/>
                                                <value type="value"><content><![CDATA[</v11:Value>
                                            </v11:ValueExpression>
                                            <v11:ValueExpression Path="/ResourceInventoryVBO/RelatedParties/RelatedParty[Role='Individual']/IDs/ID[@schemeName='SiteID']" QueryOperatorCode="EQUALS">
                                                <v11:Value>]]></content></value>
                                                <value type="parameter" parameterid="par_client_id"/>
                                                <value type="value"><content><![CDATA[</v11:Value>
                                            </v11:ValueExpression>
                                        </v11:QueryExpression>
                                    </v11:QueryExpression>
                                </v11:Criteria>
                                <v11:Identification>
                                    <v11:Categories>
                                        <v11:Category name="Process">GetInventoriedSuperWifiDevicesAirties</v11:Category>
                                    </v11:Categories>
                                </v11:Identification>
                            </v12:GetResourceInventoryListVBMRequest></soapenv:Body>
                        </soapenv:Envelope>]]></content></value>           
                        </text>
                    </body>
                    <response type="xml2json1"/>
                </endpoint>	               
                
                <!--API EquiposSW6Conectados-->

                <endpoint type="ws" id="EquiposSW6Conectados" verbose="true" lazy="true" connecttimeout="5000" requesttimeout="22000"><!--CCA20240507 - SP2902-->
                    <method>POST</method>
                    <url ignoreSSL="true">{url}ResourceInventoryREST/resourceInventory/search</url>
                    <args>
                        <arg type="path" id="url">
                            <value type="parameter" parameterid="par_url_bus"/>
                        </arg>
                        <arg type="header" id="Accept">
                            <value type="value"><content>application/json</content></value>
                        </arg>
                        <arg type="header" id="X-IBM-Client-Id">
                            <value type="parameter" parameterid="par_bus_clientid"/>
                        </arg>
                        <arg type="header" id="X-VF-API-Process">
                            <value type="value"><content>EquiposSW6Conectados</content></value>
                        </arg>
                        <!-- CCA20211214 - Integracion_Airties - Mockeo de clientes -->
                        <!--<arg type="header" id="X-VF-API-Mock">
                            <value type="value"><content>001</content></value>
                        </arg> -->
                        <arg type="header" id="Content-Type">
                            <value type="value"><content>application/json</content></value>
                        </arg>
                    </args>
                    <body contenttype="text">
                        <text>
                            <value type="value"><content><![CDATA[{
                                "queries": [
                                    {
                                    "query": "$.id[?(@.schemeName='deviceId')].value=]]></content></value>
                            <value type="parameter" parameterid="par_gsl_serialnnumber_exten1" role="front"/>
                            <value type="value"><content><![CDATA["}]}]]></content></value>
                        </text>
                    </body>
                    <response type="json"/>
                </endpoint>

                <!--API DispositivosSW6Conectados-->

                <endpoint type="ws" id="DispositivosSW6Conectados" verbose="true" lazy="true" connecttimeout="5000" requesttimeout="11000"><!--CCA20220531 - Cambia el valor de requesttimeout-->
                    <method>POST</method>
                    <url ignoreSSL="true">{url}ResourceInventoryREST/resourceInventory/search</url>
                    <args>
                        <arg type="path" id="url">
                            <value type="parameter" parameterid="par_url_bus"/>
                        </arg>
                        <arg type="header" id="Accept">
                            <value type="value"><content>application/json</content></value>
                        </arg>
                        <arg type="header" id="X-IBM-Client-Id">
                            <value type="parameter" parameterid="par_bus_clientid"/>
                        </arg>
                        <arg type="header" id="X-VF-API-Process">
                            <value type="value"><content>DispositivosSW6Conectados</content></value>
                        </arg>
                        <!-- CCA20211214 - Integracion_Airties - Mockeo de clientes -->
                        <!--<arg type="header" id="X-VF-API-Mock">
                            <value type="value"><content>001</content></value>
                        </arg> -->
                        <arg type="header" id="Content-Type">
                            <value type="value"><content>application/json</content></value>
                        </arg>
                    </args>
                    <body contenttype="text">
                        <text>
                            <value type="value"><content><![CDATA[{
                                "queries": [
                                    {
                                    "query": "$.id[?(@.schemeName='deviceId')].value=]]></content></value>
                            <value type="parameter" parameterid="par_gsl_serialnnumber_exten1" role="front"/>
                            <value type="value"><content><![CDATA["}]}]]></content></value>
                        </text>
                    </body>
                    <response type="json"/>
                </endpoint>

                <!--API DispositivosSW6ConectadosUltimos7Dias-->

                <endpoint type="ws" id="DispositivosSW6ConectadosUltimos7Dias" verbose="true" lazy="true" connecttimeout="5000" requesttimeout="10000"><!--CCA20220531 - Cambia el valor de requesttimeout-->
                    <method>POST</method>
                    <url ignoreSSL="true">{url}ResourceInventoryREST/resourceInventory/search</url>
                    <args>
                        <arg type="path" id="url">
                            <value type="parameter" parameterid="par_url_bus"/>
                        </arg>
                        <arg type="header" id="Accept">
                            <value type="value"><content>application/json</content></value>
                        </arg>
                        <arg type="header" id="X-IBM-Client-Id">
                            <value type="parameter" parameterid="par_bus_clientid"/>
                        </arg>
                        <arg type="header" id="X-VF-API-Process">
                            <value type="value"><content>DispositivosSW6ConectadosUltimos7Dias</content></value>
                        </arg>
                        <!-- CCA20211214 - Integracion_Airties - Mockeo de clientes -->
                        <!--<arg type="header" id="X-VF-API-Mock">
                            <value type="value"><content>001</content></value>
                        </arg> -->
                        <arg type="header" id="Content-Type">
                            <value type="value"><content>application/json</content></value>
                        </arg>
                    </args>
                    <body contenttype="text">
                        <text>
                            <value type="value"><content><![CDATA[{
                                "queries": [
                                    {
                                    "query": "$.id[?(@.schemeName='deviceId')].value=]]></content></value>
                            <value type="parameter" parameterid="par_gsl_serialnnumber_exten1" role="front"/>
                            <value type="value"><content><![CDATA["}]}]]></content></value>
                        </text>
                    </body>
                    <response type="json"/>
                </endpoint>

                <!--API ObtenerParamInv-->

                <endpoint type="ws" id="ObtenerParamInv" verbose="true" lazy="true" connecttimeout="5000" requesttimeout="40000">
                    <method>POST</method>
                    <url ignoreSSL="true">{url}ServiceConfigurationREST/serviceConfiguration/search</url>
                    <args>
                        <arg type="path" id="url">
                            <value type="parameter" parameterid="par_url_bus"/>
                        </arg>
                        <arg type="header" id="Accept">
                            <value type="value"><content>application/json</content></value>
                        </arg>
                        <arg type="header" id="X-IBM-Client-Id">
                            <value type="parameter" parameterid="par_bus_clientid"/>
                        </arg>
                        <arg type="header" id="X-VF-API-Process">
                            <value type="value"><content>ObtenerParamInv</content></value>
                        </arg>
                        <arg type="header" id="Content-Type">
                            <value type="value"><content>application/json</content></value>
                        </arg>
                    </args>
                    <body contenttype="text">
                        <text>
                            <value type="value"><content><![CDATA[{
                                "queries": [
                                    {
                                    "query": "$.id[schemeName='SERVICE_ID'].value=]]></content></value>
                            <value type="parameter" parameterid="par_service_id" role="front"/>
                            <value type="value"><content><![CDATA["}]}]]></content></value>
                        </text>
                    </body>
                    <response type="json"/>
                </endpoint>

                <!--API KPIexperienciaWIFI-->

                <endpoint type="ws" id="KPIexperienciaWIFI" verbose="true" lazy="true" connecttimeout="5000" requesttimeout="4000"><!--CCA20220531 - Cambia el valor de requesttimeout-->
                    <method>POST</method>
                    <url ignoreSSL="true">{url}ServiceTestREST/serviceTest/search</url>
                    <args>
                        <arg type="path" id="url">
                            <value type="parameter" parameterid="par_url_bus"/>
                        </arg>
                        <arg type="header" id="Accept">
                            <value type="value"><content>application/json</content></value>
                        </arg>
                        <arg type="header" id="X-IBM-Client-Id">
                            <value type="parameter" parameterid="par_bus_clientid"/>
                        </arg>
                        <arg type="header" id="X-VF-API-Process">
                            <value type="value"><content>KPIexperienciaWIFI</content></value>
                        </arg>
                        <!-- CCA20211214 - Integracion_Airties - Mockeo de clientes -->
                        <!--<arg type="header" id="X-VF-API-Mock">
                            <value type="value"><content>001</content></value>
                        </arg> -->
                        <arg type="header" id="Content-Type">
                            <value type="value"><content>application/json</content></value>
                        </arg>
                    </args>
                    <body contenttype="text">
                        <text>
                            <value type="value"><content><![CDATA[{
                                "queries": [
                                    {
                                    "query": "$.id[?(@.schemeName='deviceId')].value=]]></content></value>
                            <value type="parameter" parameterid="par_gsl_serialnnumber_exten1" role="front"/>
                            <value type="value"><content><![CDATA["}]}]]></content></value>
                        </text>
                    </body>
                    <response type="json"/>
                </endpoint>

                <!--API ProblemasDetectadosSW6-->

                <endpoint type="ws" id="ProblemasDetectadosSW6" verbose="true" lazy="true" connecttimeout="5000" requesttimeout="2000"><!--CCA20220531 - Cambia el valor de requesttimeout-->
                    <method>POST</method>
                    <url ignoreSSL="true">{url}/ServiceProblemREST/serviceProblem/search</url>
                    <args>
                        <arg type="path" id="url">
                            <value type="parameter" parameterid="par_url_bus"/>
                        </arg>
                        <arg type="header" id="Accept">
                            <value type="value"><content>application/json</content></value>
                        </arg>
                        <arg type="header" id="X-IBM-Client-Id">
                            <value type="parameter" parameterid="par_bus_clientid"/>
                        </arg>
                        <arg type="header" id="X-VF-API-Process">
                            <value type="value"><content>problemasDetectadosSW6</content></value>
                        </arg>
                        <arg type="header" id="Content-Type">
                            <value type="value"><content>application/json</content></value>
                        </arg>
                    </args>
                    <body contenttype="text">
                        <text>
                            <value type="value"><content><![CDATA[{
                                "queries": [
                                    {
                                    "query": "$.id[?(@.schemeName='deviceId')].value=]]></content></value>
                            <value type="parameter" parameterid="par_gsl_serialnnumber_exten1" role="front"/>
                            <value type="value"><content><![CDATA["}]}]]></content></value>
                        </text>
                    </body>
                    <response type="json"/>
                </endpoint>
				
                <!-- DVA20240604 - Certificacion superwifi - wifi6Resolutions - INICIO -->
                <endpoint type="ws" id="wifi6Resolutions" verbose="true" lazy="true" connecttimeout="4000" requesttimeout="3000">
                    <method>GET</method>
                    <url ignoreSSL="true">{url}p-service-problem-management-pprd/api/serviceProblem?</url>
                    <!-- <url ignoreSSL="true">https://run.mocky.io/v3/e4f2a76b-5870-41ef-b62d-2dc2dfd5b26c</url> -->
                    <!-- PARA BORRAR EL MOCK, CUIDADOO NO HAGAS CLIC <url ignoreSSL="true">https://designer.mocky.io/manage/delete/e4f2a76b-5870-41ef-b62d-2dc2dfd5b26c/8rnFB87dINfSjtpgujAkUF9dWsVytXhSEUGn</url> -->
                    <args>
                        <arg type="path" id="url">
                            <value type="parameter" parameterid="par_url_mulesoft"/>
                        </arg>
                        <!-- <arg type="query" id="$.affectedResource.id">
                            <value type="parameter" parameterid="par_gsl_serialnnumber_exten1" role="front"/>
                        </arg> -->
                        <arg type="query" id="$.affectedResource.id">
                            <value type="value"><content>ag72125010410</content></value>
                        </arg>
                        <arg type="header" id="X-VF-Origin-System">
                            <value type="value"><content>SC</content></value>
                        </arg>
                        <arg type="header" id="X-VF-API-Process">
                            <value type="value"><content>wifi6Resolutions</content></value>
                        </arg>
                        <arg type="header" id="client_id">
                            <value type="parameter" parameterid="par_mulesoft_clientid"/>
                          </arg>
                        <arg type="header" id="client_secret">
                            <value type="parameter" parameterid="par_mulesoft_client_secret"/>
                        </arg>
                    </args>
                    <response type="json"/>
                </endpoint>
                <!-- DVA20240604 - Certificacion superwifi - wifi6Resolutions - FIN -->

				
                <!-- JJSM 20240701 - CERTIFICACION superwifi - wifi6DetectedProblems -->
                <endpoint type="ws" id="wifi6DetectedProblems" verbose="true" lazy="true" connecttimeout="4000" requesttimeout="3000">
                    <method>GET</method>
                    <url ignoreSSL="true">{url}p-service-problem-management-pprd/api/serviceProblem?</url>
                    <!-- <url ignoreSSL="true">https://run.mocky.io/v3/2a57957e-e634-4c26-b7ee-56998f5a827f</url> -->
                    <!-- PARA BORRAR EL MOCK, CUIDADOO NO HAGAS CLIC<url ignoreSSL="true">https://designer.mocky.io/manage/delete/2a57957e-e634-4c26-b7ee-56998f5a827f/wmVV02R5auM8ajw1a6qstnVVxk6EvttBYvkV</url> -->
                    <args>
                        <arg type="path" id="url">
                            <value type="parameter" parameterid="par_url_mulesoft"/>
                        </arg>
                        <!-- <arg type="query" id="$.affectedResource.id">
                            <value type="parameter" parameterid="par_gsl_serialnnumber_exten1" role="front"/>
                        </arg> -->
                        <arg type="query" id="$.affectedResource.id">
                            <value type="value"><content>ag72125010410</content></value>
                        </arg>
                        <arg type="header" id="X-VF-Origin-System">
                            <value type="value"><content>SC</content></value>
                            </arg>
                        <arg type="header" id="X-VF-API-Process">
                            <value type="value"><content>wifi6DetectedProblems</content></value>
                        </arg>
                        <arg type="header" id="client_id">
                            <value type="parameter" parameterid="par_mulesoft_clientid"/>
                            </arg>
                        <arg type="header" id="client_secret">
                            <value type="parameter" parameterid="par_mulesoft_client_secret"/>
                        </arg>
                    </args>
                    <response type="json"/>
                </endpoint>
                <!-- JJSM 20240701 - CERTIFICACION superwifi - wifi6DetectedProblems -->

	        </endpoints>
	    </troubleshoot>
	    <action>    
            <endpoints connecttimeout="300000" requesttimeout="20000">
            </endpoints>             	
	    </action>
	</connectivity>

    <parameters>

        <!-- DVA20240604 - Certificacion superwifi - INICIO -->
        <parameter id="par_url_mulesoft">
            <contents>
              <value type="lookup">url_list</value>
            </contents>
            <sequence>
              <operation type="row_delimiter">
                <args><arg><value type="value">;</value></arg></args>
              </operation>
              <operation type="column_delimiter">
                <args><arg><value type="value">,</value></arg></args>
              </operation>
              <operation type="column_index">
                <args><arg><value type="value">1</value></arg></args>
              </operation>
              <operation type="column_equal">
                <args><arg><value type="value">url_mulesoft</value></arg></args>
              </operation>
              <operation type="column_selector">
                <args><arg><value type="value">2</value></arg></args>
              </operation>
            </sequence>
          </parameter>

          <parameter id="par_mulesoft_header" type="table">
            <contents>
              <value type="lookup">auth_mulesoft</value>
            </contents>
            <sequence>
              <operation type="row_delimiter">
                <args><arg><value type="value">;</value></arg></args>
              </operation>
              <operation type="column_delimiter">
                <args><arg><value type="value">,</value></arg></args>
              </operation>
            </sequence>
          </parameter>

          <parameter id="par_mulesoft_clientid" type="value">
            <contents>
              <value type="parameter">par_mulesoft_header</value>
            </contents>
            <sequence>
              <operation type="column_selector">
                <args><arg><value type="value">1</value></arg></args>
              </operation>
              <operation type="first_row">
                <args><arg><value type="value">2</value></arg></args>
              </operation>
            </sequence>
          </parameter>

          <parameter id="par_mulesoft_client_secret" type="value">
            <contents>
              <value type="parameter">par_mulesoft_header</value>
            </contents>
            <sequence>
              <operation type="column_selector">
                <args><arg><value type="value">2</value></arg></args>
              </operation>
              <operation type="first_row">
                <args><arg><value type="value">2</value></arg></args>
              </operation>
            </sequence>
          </parameter>
        <!-- DVA20240604 - Certificacion superwifi - FIN -->

        <parameter id="par_url_bus" techview="never">
                <contents>
                    <value type="lookup">url_list</value>
                </contents>
                <sequence>
                  <operation type="row_delimiter">
                    <args><arg><value type="value">;</value></arg></args>
                  </operation>
                  <operation type="column_delimiter">
                    <args><arg><value type="value">,</value></arg></args>
                  </operation>
                  <operation type="column_index">
                    <args><arg><value type="value">1</value></arg></args>
                  </operation>
                  <operation type="column_equal">
                    <args><arg><value type="value">url_bus</value></arg></args>
                  </operation>
                  <operation type="column_selector">
                    <args><arg><value type="value">2</value></arg></args>
                  </operation>
                </sequence>
            </parameter>

            <parameter id="par_bus_clientid" techview="never">
                <contents>
                    <value type="lookup">url_list</value>
                </contents>
                <sequence>
                  <operation type="row_delimiter">
                    <args><arg><value type="value">;</value></arg></args>
                  </operation>
                  <operation type="column_delimiter">
                    <args><arg><value type="value">,</value></arg></args>
                  </operation>
                  <operation type="column_index">
                    <args><arg><value type="value">1</value></arg></args>
                  </operation>
                  <operation type="column_equal">
                    <args><arg><value type="value">url_bus</value></arg></args>
                  </operation>
                  <operation type="column_selector">
                    <args><arg><value type="value">3</value></arg></args>
                  </operation>
                </sequence>
            </parameter>

            <parameter id="par_client_id" type="value" name="ID Cliente">
                <contents>
                  <value type="parameter" role="front">par_customer_crmid</value>
                </contents>
            </parameter>
            
    </parameters>
    <checks>
    </checks>
    
</template>
