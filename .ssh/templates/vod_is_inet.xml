<?xml version='1.0' encoding='UTF-8'?>
<template infosource="inet" type="infosource" version="2.2">
	<connectivity>
    <troubleshoot>
      <endpoints>
		    <!-- getIPAddress contra GSIP si tenemos data_login, GetServByRemoteId si no tenemos data_login -->
        <endpoint type="ws" id="Obtener_IP" verbose="true" lazy="true" connecttimeout="20000" requesttimeout="2000"><!--CCA20220601 - Cambio en el valor de requesttimeout-->
          <method>POST</method>
          <url ignoreSSL="true">{url}/ResourceInventoryREST/resourceInventory/search</url>
          <args>
            <arg type="path" id="url">
              <value type="parameter" parameterid="par_url_bus"/>
            </arg>
    				<arg type="header" id="Accept">
    					<value type="value"><content>application/json</content></value>
    				</arg>
  					<arg type="header" id="X-IBM-Client-Id">
  						<value type="parameter" parameterid="par_bus_clientid"/>
  					</arg>
  					<arg type="header" id="X-VF-API-Process">
  						<value type="value"><content>Obtener_IP</content></value>
  					</arg>
  					<arg type="header" id="Content-Type">
  						<value type="value"><content>application/json</content></value>
            </arg>
           </args>
      		<body contenttype="text">
      			<text>
      				<value type="value"><content><![CDATA[{"queries":[{"query":"$.id[schemeName='ServiceId'].value=]]></content></value>
              <value type="parameter" parameterid="par_inet_data_login" role="front"/>
              <value type="value"><content><![CDATA["},{"query":"$.roles.owner.category[listName='TipoCliente'].value=]]></content></value>
              <value type="parameter" parameterid="par_client_type"/><!--tener en cuenta que este valor depende de la tecnologia... validar luego que se pueda reutilizar con las nuevas tecnologias que implementemos-->
              <!--<value type="parameter" parameterid="par_radius_datalogin"/>-->
              <value type="value"><content><![CDATA["},{"query":"$.roles.owner.category[listName='Remote_Id'].value=]]></content></value>
              <value type="parameter" parameterid="par_invent_remoteid" role="front"/>
              <value type="value"><content><![CDATA["}]}]]></content></value>
  					</text>
  				</body>
          <response type="json"/>
        </endpoint>

        <!--Para la IP Multicast -->
        <endpoint type="ws" id="Obtener_IP_TV" verbose="true" lazy="true" connecttimeout="20000" requesttimeout="2000"><!--DBC20240319 - SP3808-->
          <method>POST</method>
          <url ignoreSSL="true">{url}/ResourceInventoryREST/resourceInventory/search</url>
          <args>
            <arg type="path" id="url">
              <value type="parameter" parameterid="par_url_bus"/>
            </arg>
            <arg type="header" id="Accept">
              <value type="value"><content>application/json</content></value>
            </arg>
            <arg type="header" id="X-IBM-Client-Id">
              <value type="parameter" parameterid="par_bus_clientid"/>
            </arg>
            <arg type="header" id="X-VF-API-Process">
              <value type="value"><content>Obtener_IP</content></value>
            </arg>
            <!--<arg type="header" id="X-VF-API-Mock">
              <value type="value"><content>001</content></value>
            </arg>-->
            <arg type="header" id="Content-Type">
              <value type="value"><content>application/json</content></value>
            </arg>
           </args>
          <body contenttype="text">
            <text>
              <value type="value"><content><![CDATA[{"queries":[{"query":"$.id[schemeName='ServiceId'].value=]]></content></value>
              <value type="parameter" parameterid="par_ftth_id_crm_t" role="front"/>
              <value type="value"><content><![CDATA["},{"query":"$.roles.owner.category[listName='TipoCliente'].value=DHCP"},{"query":"$.roles.owner.category[listName='Remote_Id'].value=]]></content></value>
              <value type="parameter" parameterid="par_invent_remoteid" role="front"/>
              <value type="value"><content><![CDATA["}]}]]></content></value>
            </text>
          </body>
          <response type="json"/>
        </endpoint>

        <!--Para la IP de CM -->
        <endpoint type="ws" id="Obtener_IP_CM" verbose="true" lazy="true" connecttimeout="20000" requesttimeout="2000"><!--DBC20240319 - SP3808-->
          <method>POST</method>
          <url ignoreSSL="true">{url}/ResourceInventoryREST/resourceInventory/search</url>
          <args>
            <arg type="path" id="url">
              <value type="parameter" parameterid="par_url_bus"/>
            </arg>
            <arg type="header" id="Accept">
              <value type="value"><content>application/json</content></value>
            </arg>
            <arg type="header" id="X-IBM-Client-Id">
              <value type="parameter" parameterid="par_bus_clientid"/>
            </arg>
            <arg type="header" id="X-VF-API-Process">
              <value type="value"><content>Obtener_IP</content></value>
            </arg>
            <!--<arg type="header" id="X-VF-API-Mock">
              <value type="value"><content>001</content></value>
            </arg>-->
            <arg type="header" id="Content-Type">
              <value type="value"><content>application/json</content></value>
            </arg>
           </args>
          <body contenttype="text">
            <text>
              <value type="value"><content><![CDATA[{"queries":[{"query":"$.id[schemeName='ServiceId'].value=]]></content></value>
              <value type="parameter" parameterid="par_grc_service_id" role="front"/>
              <value type="value"><content><![CDATA["},{"query":"$.roles.owner.category[listName='TipoCliente'].value=DHCP"},{"query":"$.roles.owner.category[listName='Remote_Id'].value=]]></content></value>
              <value type="parameter" parameterid="par_invent_remoteid" role="front"/>
              <value type="value"><content><![CDATA["}]}]]></content></value>
            </text>
          </body>
          <response type="json"/>
        </endpoint>

        <!--Para la IP de CM de flujo cert -->
        <endpoint type="ws" id="Obtener_IP_CM_flujo_cert" verbose="true" lazy="true" connecttimeout="20000" requesttimeout="2000"><!--DBC20240319 - SP3808-->
          <method>POST</method>
          <url ignoreSSL="true">{url}/ResourceInventoryREST/resourceInventory/search</url>
          <args>
            <arg type="path" id="url">
              <value type="parameter" parameterid="par_url_bus"/>
            </arg>
            <arg type="header" id="Accept">
              <value type="value"><content>application/json</content></value>
            </arg>
            <arg type="header" id="X-IBM-Client-Id">
              <value type="parameter" parameterid="par_bus_clientid"/>
            </arg>
            <arg type="header" id="X-VF-API-Process">
              <value type="value"><content>Obtener_IP</content></value>
            </arg>
            <!--<arg type="header" id="X-VF-API-Mock">
              <value type="value"><content>001</content></value>
            </arg>-->
            <arg type="header" id="Content-Type">
              <value type="value"><content>application/json</content></value>
            </arg>
           </args>
          <body contenttype="text">
            <text>
              <value type="value"><content><![CDATA[{"queries":[{"query":"$.id[schemeName='ServiceId'].value=]]></content></value>
              <value type="parameter" parameterid="par_grc_service_id" role="front"/>
              <value type="value"><content><![CDATA["},{"query":"$.roles.owner.category[listName='TipoCliente'].value=DHCP"},{"query":"$.roles.owner.category[listName='Remote_Id'].value=]]></content></value>
              <value type="parameter" parameterid="par_invent_remoteid" role="front"/>
              <value type="value"><content><![CDATA["}]}]]></content></value>
            </text>
          </body>
          <response type="json"/>
        </endpoint>

        <endpoint type="ws" id="Obtener_IP_TV_Coguid" verbose="true" lazy="true" connecttimeout="20000" requesttimeout="2000"><!--DBC20240319 - SP3808-->
          <method>POST</method>
          <url ignoreSSL="true">{url}/ResourceInventoryREST/resourceInventory/search</url>
          <args>
            <arg type="path" id="url">
              <value type="parameter" parameterid="par_url_bus"/>
            </arg>
            <arg type="header" id="Accept">
              <value type="value"><content>application/json</content></value>
            </arg>
            <arg type="header" id="X-IBM-Client-Id">
              <value type="parameter" parameterid="par_bus_clientid"/>
            </arg>
            <arg type="header" id="X-VF-API-Process">
              <value type="value"><content>Obtener_IP</content></value>
            </arg>
            <!--<arg type="header" id="X-VF-API-Mock">
              <value type="value"><content>001</content></value>
            </arg>-->
            <arg type="header" id="Content-Type">
              <value type="value"><content>application/json</content></value>
            </arg>
           </args>
          <body contenttype="text">
            <text>
              <value type="value"><content><![CDATA[{"queries":[{"query":"$.id[schemeName='ServiceId'].value=]]></content></value>
              <value type="parameter" parameterid="par_id_tv" role="front"/>
              <value type="value"><content><![CDATA["},{"query":"$.roles.owner.category[listName='TipoCliente'].value=DHCP"},{"query":"$.roles.owner.category[listName='Remote_Id'].value=]]></content></value>
              <value type="parameter" parameterid="par_invent_remoteid" role="front"/>
              <value type="value"><content><![CDATA["}]}]]></content></value>
            </text>
          </body>
          <response type="json"/>
        </endpoint>



        <endpoint type="ws" id="Detalles_usuario_RMS_QoS" verbose="true" lazy="true" connecttimeout="20000" requesttimeout="4000"><!--CCA20220601 - Cambio en el valor de requesttimeout-->
  	      <method>GET</method>
  	      <url ignoreSSL="true">{url}/ServiceConfigurationREST/serviceConfiguration/search</url><!--?Data_login=prueba@vodafone&IP_BRAS=10.10.10.1-->
  	      <args>
            <arg type="path" id="url">
  					 <value type="parameter" parameterid="par_url_bus"/>
  				  </arg>
  					<arg type="header" id="Accept">
  						<value type="value"><content>application/json</content></value>
  					</arg>
  				  <arg type="header" id="X-IBM-Client-Id">
  						<value type="parameter" parameterid="par_bus_clientid"/>
  					</arg>
  					<arg type="header" id="X-VF-API-Process">
              <value type="value"><content>Detalles_usuario_RMS_QoS</content></value>
            </arg>
            <arg type="header" id="Content-Type">
              <value type="value"><content>application/json</content></value>
            </arg>
            <!--<arg type="query" id="Data_login">
                  <value type="parameter" parameterid="par_inet_data_login"/>
                </arg>
            <arg type="query" id="IP_BRAS">
              <value type="parameter" parameterid="par_ip_bras"/>
            </arg>-->
          </args>
      		<body contenttype="text">
      			<text>
      				<value type="value"><content><![CDATA[{"queries":[{"query":"$.parts.service.id[schemeName='Data_login'].value=]]></content></value>
      				<value type="parameter" parameterid="par_inet_data_login" role="front"/>
      				<!--<value type="value"><content><![CDATA["},{"query":"$.parts.service.id[schemeName='IP_BRAS'].value=]]></content></value>
      				<value type="parameter" parameterid="par_ip_bras"/>--><!--se quita este parametro porque no es obligatorio - 20200513-->
              <value type="value"><content><![CDATA["}]}]]></content></value>
  	        </text>
          </body>
          <response type="json"/>
	      </endpoint>

        <endpoint type="ws" id="Primera_conexion_IP" verbose="true" lazy="true" connecttimeout="20000" requesttimeout="1000"><!--CCA20220601 - Cambio en el valor de requesttimeout-->
          <method>POST</method>
          <url ignoreSSL="true">{url}/ResourceInventoryREST/resourceInventory/search</url><!--?Data_login=prueba@vodafone&IP_BRAS=10.10.10.1-->
          <args>
            <arg type="path" id="url">
              <value type="parameter" parameterid="par_url_bus"/>
            </arg>
            <arg type="header" id="Accept">
              <value type="value"><content>application/json</content></value>
            </arg>
            <arg type="header" id="X-IBM-Client-Id">
              <value type="parameter" parameterid="par_bus_clientid"/>
            </arg>
            <arg type="header" id="X-VF-API-Process">
              <value type="value"><content>Primera_conexion_IP</content></value>
            </arg>
            <!--<arg type="header" id="X-VF-API-Mock">
              <value type="value"><content>001</content></value>
            </arg>-->
            <arg type="header" id="Content-Type">
              <value type="value"><content>application/json</content></value>
            </arg>
              <!--<arg type="query" id="Data_login">
                <value type="parameter" parameterid="par_inet_data_login"/>
              </arg>
              <arg type="query" id="IP_BRAS">
                <value type="parameter" parameterid="par_ip_bras"/>
              </arg>-->
          </args>
          <body contenttype="text">
            <text>
                <value type="value"><content><![CDATA[{"queries":[{"query":"$.id[schemeName='ServiceId'].value=]]></content></value>
                <value type="parameter" parameterid="par_inet_data_login" role="front"/>
                <value type="value"><content><![CDATA["},{"query":"$.roles.owner.category[listName='TipoCliente'].value=]]></content></value>
                <value type="parameter" parameterid="par_client_type"/><!--tener en cuenta que este valor depende de la tecnologia... validar luego que se pueda reutilizar con las nuevas tecnologias que implementemos-->
                <!--<value type="parameter" parameterid="par_radius_datalogin"/>-->
                <value type="value"><content><![CDATA["},{"query":"$.roles.owner.category[listName='Remote_Id'].value=]]></content></value>
                <value type="parameter" parameterid="par_invent_remoteid" role="front"/>
                <value type="value"><content><![CDATA["}]}]]></content>
                </value>
            </text>
          </body>
          <response type="json"/>
        </endpoint>

        <endpoint type="ws" id="Primera_conexion_IP_CM" verbose="true" lazy="true" connecttimeout="20000" requesttimeout="1000"><!--CCA20220601 - Cambio en el valor de requesttimeout-->
          <method>POST</method>
          <url ignoreSSL="true">{url}/ResourceInventoryREST/resourceInventory/search</url><!--?Data_login=prueba@vodafone&IP_BRAS=10.10.10.1-->
          <args>
            <arg type="path" id="url">
              <value type="parameter" parameterid="par_url_bus"/>
            </arg>
            <arg type="header" id="Accept">
              <value type="value"><content>application/json</content></value>
            </arg>
            <arg type="header" id="X-IBM-Client-Id">
              <value type="parameter" parameterid="par_bus_clientid"/>
            </arg>
            <arg type="header" id="X-VF-API-Process">
              <value type="value"><content>Primera_conexion_IP</content></value>
            </arg>
            <!--<arg type="header" id="X-VF-API-Mock">
              <value type="value"><content>001</content></value>
            </arg>-->
            <arg type="header" id="Content-Type">
              <value type="value"><content>application/json</content></value>
            </arg>
              <!--<arg type="query" id="Data_login">
                <value type="parameter" parameterid="par_inet_data_login"/>
              </arg>
              <arg type="query" id="IP_BRAS">
                <value type="parameter" parameterid="par_ip_bras"/>
              </arg>-->
          </args>
          <body contenttype="text">
            <text>
              <value type="value"><content><![CDATA[{"queries":[{"query":"$.id[schemeName='ServiceId'].value=]]></content></value>
              <value type="parameter" parameterid="par_grc_service_id" role="front"/>
              <value type="value"><content><![CDATA["},{"query":"$.roles.owner.category[listName='TipoCliente'].value=DHCP"},{"query":"$.roles.owner.category[listName='Remote_Id'].value=]]></content></value>
              <value type="parameter" parameterid="par_invent_remoteid" role="front"/>
              <value type="value"><content><![CDATA["}]}]]></content></value>
            </text>
          </body>
          <response type="json"/>
        </endpoint>

        <endpoint type="ws" id="Ultima_conexion_IP" verbose="true" lazy="true" connecttimeout="20000" requesttimeout="1000"><!--CCA20220601 - Cambio en el valor de requesttimeout-->
        <method>POST</method>
        <url ignoreSSL="true">{url}/ResourceInventoryREST/resourceInventory/search</url><!--?Data_login=prueba@vodafone&IP_BRAS=10.10.10.1-->
          <args>
            <arg type="path" id="url">
              <value type="parameter" parameterid="par_url_bus"/>
            </arg>
            <arg type="header" id="Accept">
              <value type="value"><content>application/json</content></value>
            </arg>
            <arg type="header" id="X-IBM-Client-Id">
              <value type="parameter" parameterid="par_bus_clientid"/>
            </arg>
            <arg type="header" id="X-VF-API-Process">
              <value type="value"><content>Ultima_conexion_IP</content></value>
            </arg>
            <!--<arg type="header" id="X-VF-API-Mock">
              <value type="value"><content>001</content></value>
            </arg>-->
            <arg type="header" id="Content-Type">
              <value type="value"><content>application/json</content></value>
            </arg>
            <!--<arg type="query" id="Data_login">
              <value type="parameter" parameterid="par_inet_data_login"/>
            </arg>
            <arg type="query" id="IP_BRAS">
              <value type="parameter" parameterid="par_ip_bras"/>
            </arg>-->
          </args>
          <body contenttype="text">
            <text>
              <value type="value"><content><![CDATA[{"queries":[{"query":"$.id[schemeName='ServiceId'].value=]]></content></value>
              <value type="parameter" parameterid="par_inet_data_login" role="front"/>
              <value type="value"><content><![CDATA["},{"query":"$.roles.owner.category[listName='TipoCliente'].value=]]></content></value>
              <value type="parameter" parameterid="par_client_type"/><!--tener en cuenta que este valor depende de la tecnologia... validar luego que se pueda reutilizar con las nuevas tecnologias que implementemos-->
              <!--<value type="parameter" parameterid="par_radius_datalogin"/>-->
              <value type="value"><content><![CDATA["},{"query":"$.roles.owner.category[listName='Remote_Id'].value=]]></content></value>
              <value type="parameter" parameterid="par_invent_remoteid" role="front"/>
              <value type="value"><content><![CDATA["}]}]]></content>
              </value>
            </text>
          </body>
          <response type="json"/>
        </endpoint>

        <endpoint type="ws" id="Ultima_conexion_IP_CM" verbose="true" lazy="true" connecttimeout="20000" requesttimeout="1000"><!--CCA20220601 - Cambio en el valor de requesttimeout-->
        <method>POST</method>
        <url ignoreSSL="true">{url}/ResourceInventoryREST/resourceInventory/search</url><!--?Data_login=prueba@vodafone&IP_BRAS=10.10.10.1-->
          <args>
            <arg type="path" id="url">
              <value type="parameter" parameterid="par_url_bus"/>
            </arg>
            <arg type="header" id="Accept">
              <value type="value"><content>application/json</content></value>
            </arg>
            <arg type="header" id="X-IBM-Client-Id">
              <value type="parameter" parameterid="par_bus_clientid"/>
            </arg>
            <arg type="header" id="X-VF-API-Process">
              <value type="value"><content>Ultima_conexion_IP</content></value>
            </arg>
            <!--<arg type="header" id="X-VF-API-Mock">
              <value type="value"><content>001</content></value>
            </arg>-->
            <arg type="header" id="Content-Type">
              <value type="value"><content>application/json</content></value>
            </arg>
            <!--<arg type="query" id="Data_login">
              <value type="parameter" parameterid="par_inet_data_login"/>
            </arg>
            <arg type="query" id="IP_BRAS">
              <value type="parameter" parameterid="par_ip_bras"/>
            </arg>-->
          </args>
          <body contenttype="text">
            <text>
              <value type="value"><content><![CDATA[{"queries":[{"query":"$.id[schemeName='ServiceId'].value=]]></content></value>
              <value type="parameter" parameterid="par_grc_service_id" role="front"/>
              <value type="value"><content><![CDATA["},{"query":"$.roles.owner.category[listName='TipoCliente'].value=DHCP"},{"query":"$.roles.owner.category[listName='Remote_Id'].value=]]></content></value>
              <value type="parameter" parameterid="par_invent_remoteid" role="front"/>
              <value type="value"><content><![CDATA["}]}]]></content></value>
            </text>
          </body>
          <response type="json"/>
        </endpoint>

        <endpoint type="ws" id="Historico_DirIP_ServiceID_DataLogin" verbose="true" lazy="false" connecttimeout="20000" requesttimeout="5000"><!--CCA20240207 - MAN3602--><!--DCO20240125 - INC000083617214 - Se cambia el "requesttimeout" de 1000 a 5000-->
        <method>POST</method>
        <url ignoreSSL="true">{url}/ResourceInventoryREST/resourceInventory/search</url><!--?Data_login=prueba@vodafone&IP_BRAS=10.10.10.1-->
          <args>
            <arg type="path" id="url">
              <value type="parameter" parameterid="par_url_bus"/>
            </arg>
            <arg type="header" id="Accept">
              <value type="value"><content>application/json</content></value>
            </arg>
            <arg type="header" id="X-IBM-Client-Id">
              <value type="parameter" parameterid="par_bus_clientid"/>
            </arg>
            <arg type="header" id="X-VF-API-Process">
              <value type="value"><content>Historico_DirIP_ServiceID_DataLogin</content></value>
            </arg>
            <!--<arg type="header" id="X-VF-API-Mock">
              <value type="value"><content>001</content></value>
            </arg>-->
            <arg type="header" id="Content-Type">
              <value type="value"><content>application/json</content></value>
            </arg>
            <!--<arg type="query" id="Data_login">
              <value type="parameter" parameterid="par_inet_data_login"/>
            </arg>
            <arg type="query" id="IP_BRAS">
              <value type="parameter" parameterid="par_ip_bras"/>
            </arg>-->
          </args>
          <body contenttype="text">
            <text>
              <value type="value"><content><![CDATA[{"queries":[{"query":"$.id[schemeName='ServiceId'].value=]]></content></value>
              <value type="parameter" parameterid="par_inet_data_login" role="front"/>
              <value type="value"><content><![CDATA["},{"query":"$.roles.owner.category[listName='TipoCliente'].value=]]></content></value>
              <value type="parameter" parameterid="par_client_type"/><!--tener en cuenta que este valor depende de la tecnologia... validar luego que se pueda reutilizar con las nuevas tecnologias que implementemos-->
              <!--<value type="parameter" parameterid="par_radius_datalogin"/>--> 
              <value type="value"><content><![CDATA["},{"query":"$.roles.owner.category[listName='Remote_Id'].value=]]></content></value>
              <value type="parameter" parameterid="par_invent_remoteid" role="front"/>
              <value type="value"><content><![CDATA["}]}]]></content></value>
            </text>
          </body>
          <response type="json"/>
        </endpoint>

        <endpoint type="ws" id="Historico_DirIP_ServiceID_DataLogin_CM" verbose="true" lazy="false" connecttimeout="20000" requesttimeout="5000"><!--CCA20240207 - MAN3602--><!--CCA20220601 - Cambio en el valor de requesttimeout-->
        <method>POST</method>
        <url ignoreSSL="true">{url}/ResourceInventoryREST/resourceInventory/search</url><!--?Data_login=prueba@vodafone&IP_BRAS=10.10.10.1-->
          <args>
            <arg type="path" id="url">
              <value type="parameter" parameterid="par_url_bus"/>
            </arg>
            <arg type="header" id="Accept">
              <value type="value"><content>application/json</content></value>
            </arg>
            <arg type="header" id="X-IBM-Client-Id">
              <value type="parameter" parameterid="par_bus_clientid"/>
            </arg>
            <arg type="header" id="X-VF-API-Process">
              <value type="value"><content>Historico_DirIP_ServiceID_DataLogin</content></value>
            </arg>
            <!--<arg type="header" id="X-VF-API-Mock">
              <value type="value"><content>001</content></value>
            </arg>-->
            <arg type="header" id="Content-Type">
              <value type="value"><content>application/json</content></value>
            </arg>
            <!--<arg type="query" id="Data_login">
              <value type="parameter" parameterid="par_inet_data_login"/>
            </arg>
            <arg type="query" id="IP_BRAS">
              <value type="parameter" parameterid="par_ip_bras"/>
            </arg>-->
          </args>
          <body contenttype="text">
            <text>
              <value type="value"><content><![CDATA[{"queries":[{"query":"$.id[schemeName='ServiceId'].value=]]></content></value>
              <value type="parameter" parameterid="par_grc_service_id" role="front"/>
              <value type="value"><content><![CDATA["},{"query":"$.roles.owner.category[listName='TipoCliente'].value=DHCP"},{"query":"$.roles.owner.category[listName='Remote_Id'].value=]]></content></value>
              <value type="parameter" parameterid="par_invent_remoteid" role="front"/>
              <value type="value"><content><![CDATA["}]}]]></content></value>
            </text>
          </body>
          <response type="json"/>
        </endpoint>

        <endpoint type="ws" id="Historico_Ips" verbose="true" lazy="false" connecttimeout="20000" requesttimeout="1000"><!--CCA20220601 - Cambio en el valor de requesttimeout-->
        <method>POST</method>
        <url ignoreSSL="true">{url}/ResourceInventoryREST/resourceInventory/search</url><!--?Data_login=prueba@vodafone&IP_BRAS=10.10.10.1-->
          <args>
            <arg type="path" id="url">
              <value type="parameter" parameterid="par_url_bus"/>
            </arg>
            <arg type="header" id="Accept">
              <value type="value"><content>application/json</content></value>
            </arg>
            <arg type="header" id="X-IBM-Client-Id">
              <value type="parameter" parameterid="par_bus_clientid"/>
            </arg>
            <arg type="header" id="X-VF-API-Process">
              <value type="value"><content>Historico_Ips</content></value>
            </arg>
            <!--<arg type="header" id="X-VF-API-Mock">
              <value type="value"><content>001</content></value>
            </arg>-->
            <arg type="header" id="Content-Type">
              <value type="value"><content>application/json</content></value>
            </arg>
            <!--<arg type="query" id="Data_login">
              <value type="parameter" parameterid="par_inet_data_login"/>
            </arg>
            <arg type="query" id="IP_BRAS">
              <value type="parameter" parameterid="par_ip_bras"/>
            </arg>-->
          </args>
          <body contenttype="text">
            <text>
              <value type="value"><content><![CDATA[{"queries":[{"query":"$.id[schemeName='DireccionIP'].value=]]></content></value>
              <value type="parameter" parameterid="par_gsip_oip_ip_address" role="inet"/>
              <value type="value"><content><![CDATA["},{"query":"$.roles.owner.category[listName='TipoCliente'].value=]]></content></value>
              <value type="parameter" parameterid="par_client_type"/>
              <value type="value"><content><![CDATA["}]}]]></content></value>
            </text>
          </body>
          <response type="json"/>
        </endpoint>

        <endpoint type="ws" id="Historico_Ips_CM" verbose="true" lazy="false" connecttimeout="20000" requesttimeout="1000"><!--CCA20220601 - Cambio en el valor de requesttimeout-->
        <method>POST</method>
        <url ignoreSSL="true">{url}/ResourceInventoryREST/resourceInventory/search</url><!--?Data_login=prueba@vodafone&IP_BRAS=10.10.10.1-->
          <args>
            <arg type="path" id="url">
              <value type="parameter" parameterid="par_url_bus"/>
            </arg>
            <arg type="header" id="Accept">
              <value type="value"><content>application/json</content></value>
            </arg>
            <arg type="header" id="X-IBM-Client-Id">
              <value type="parameter" parameterid="par_bus_clientid"/>
            </arg>
            <arg type="header" id="X-VF-API-Process">
              <value type="value"><content>Historico_Ips</content></value>
            </arg>
            <!--<arg type="header" id="X-VF-API-Mock">
              <value type="value"><content>001</content></value>
            </arg>-->
            <arg type="header" id="Content-Type">
              <value type="value"><content>application/json</content></value>
            </arg>
            <!--<arg type="query" id="Data_login">
              <value type="parameter" parameterid="par_inet_data_login"/>
            </arg>
            <arg type="query" id="IP_BRAS">
              <value type="parameter" parameterid="par_ip_bras"/>
            </arg>-->
          </args>
          <body contenttype="text">
            <text>
              <value type="value"><content><![CDATA[{"queries":[{"query":"$.id[schemeName='DireccionIP'].value=]]></content></value>
              <value type="parameter" parameterid="par_gsip_oip_cm_ip_address" role="inet"/><!--DCL20210505 - INCHC_006 - el id del parametro estaba mal-->
              <value type="value"><content><![CDATA["},{"query":"$.roles.owner.category[listName='TipoCliente'].value=]]></content></value>
              <value type="parameter" parameterid="par_client_type_cm"/>
              <value type="value"><content><![CDATA["}]}]]></content></value>
            </text>
          </body>
          <response type="json"/>
        </endpoint>

        <!-- ENDPOINT Ping al CPE -->
        <endpoint type="ws" id="ping_cpe_req" verbose="true" lazy="true" connecttimeout="4000" requesttimeout="1000"><!--CCA20220601 - Cambio en el valor de requesttimeout-->
            <method>POST</method>
            <url ignoreSSL="false">{url}schaman-sshce/api/1/_executecommand/async</url>
            <args>
              <arg type="path" id="url">
              <value type="parameter" parameterid="par_url_ping_cpe"/>
            </arg>
            <arg type="header" id="Content-Type">
              <value type="value"><content>application/json</content></value>
              </arg>
          </args>
          <body contenttype="text">
            <text><value type="value"><content><![CDATA[{
                        "command": "/usr/local/]]></content></value>
                  <value type="parameter" parameterid="par_usuario_lookup"/>
                  <value type="value"><content><![CDATA[/activeitor/bin/ping.sh ]]></content></value>
                  <value type="parameter" parameterid="par_gsip_oip_ip_address" role="inet"/>
                  <!--<value type="value"><content><![CDATA[&#32;]]></content></value>-->
                  <value type="parameter" parameterid="par_intentos_lookup"/>
                  <value type="value"><content><![CDATA[",
                        "credentials": {
                            "type": "user_password",
                            "user": "]]></content></value>
                  <value type="parameter" parameterid="par_usuario_lookup"/>
                  <value type="value"><content><![CDATA[",
                            "pass": "]]></content></value>
                  <value type="parameter" parameterid="par_pass_lookup"/>
                  <value type="value"><content><![CDATA["
                        },
                        "host": {
                          "ip": "]]></content></value>
                  <value type="parameter" parameterid="par_host_lookup"/>
                  <value type="value"><content><![CDATA[",
                          "port": ]]></content></value>
                  <value type="parameter" parameterid="par_port_lookup"/>
                  <value type="value"><content><![CDATA[
                        }
                    }]]></content></value>
            </text>
          </body>
          <response type="json"/>
        </endpoint>

        <endpoint type="ws" id="Ping_cpe" verbose="true" lazy="true" connecttimeout="4000" requesttimeout="2000" retry="4" retryDelay="200" initDelay="1000"><!--CCA20220601 - Cambio en el valor de requesttimeout-->
              <method>GET</method>
              <url ignoreSSL="true">{url}schaman-sshce/api/1/_executecommand/async/{executionId}</url>
              <args>
                  <arg type="path" id="url">
                      <value type="parameter" parameterid="par_url_ping_cpe"/>
                  </arg>
                  <arg type="path" id="executionId">
                      <value type="parameter" parameterid="par_executionid"/>
                  </arg>
                  <arg type="header" id="Content-Type">
                      <value type="value"><content>application/json</content></value>
                  </arg>
              </args>
              <retry>
                  <expr type="or">
                      <reference type="check" id="chk_ping_err_code_notok"/>
                      <reference type="check" id="chk_ping_http_code_eq_204"/>
                  </expr>
              </retry>
              <response type="json"/>
          </endpoint>

           <!-- ENDPOINT Ping al CPE CM -->
        <endpoint type="ws" id="ping_cpe_req_cm" verbose="true" lazy="true" connecttimeout="4000" requesttimeout="1000"><!--CCA20220601 - Cambio en el valor de requesttimeout-->
            <method>POST</method>
            <url ignoreSSL="false">{url}schaman-sshce/api/1/_executecommand/async</url>
            <args>
              <arg type="path" id="url">
              <value type="parameter" parameterid="par_url_ping_cpe"/>
            </arg>
            <arg type="header" id="Content-Type">
              <value type="value"><content>application/json</content></value>
              </arg>
          </args>
          <body contenttype="text">
            <text><value type="value"><content><![CDATA[{
                        "command": "/usr/local/]]></content></value>
                  <value type="parameter" parameterid="par_usuario_lookup"/>
                  <value type="value"><content><![CDATA[/activeitor/bin/ping.sh ]]></content></value>
                  <value type="parameter" parameterid="par_gsip_oip_cm_ip_address" role="inet"/>
                  <!--<value type="value"><content><![CDATA[&#32;]]></content></value>-->
                  <value type="parameter" parameterid="par_intentos_lookup"/>
                  <value type="value"><content><![CDATA[",
                        "credentials": {
                            "type": "user_password",
                            "user": "]]></content></value>
                  <value type="parameter" parameterid="par_usuario_lookup"/>
                  <value type="value"><content><![CDATA[",
                            "pass": "]]></content></value>
                  <value type="parameter" parameterid="par_pass_lookup"/>
                  <value type="value"><content><![CDATA["
                        },
                        "host": {
                          "ip": "]]></content></value>
                  <value type="parameter" parameterid="par_host_lookup"/>
                  <value type="value"><content><![CDATA[",
                          "port": ]]></content></value>
                  <value type="parameter" parameterid="par_port_lookup"/>
                  <value type="value"><content><![CDATA[
                        }
                    }]]></content></value>
            </text>
          </body>
          <response type="json"/>
        </endpoint>

        <endpoint type="ws" id="Ping_cpe_cm" verbose="true" lazy="true" connecttimeout="4000" requesttimeout="2000" retry="4" retryDelay="500" initDelay="1000"><!--CCA20220601 - Cambio en el valor de requesttimeout-->
              <method>GET</method>
              <url ignoreSSL="true">{url}schaman-sshce/api/1/_executecommand/async/{executionId}</url>
              <args>
                  <arg type="path" id="url">
                      <value type="parameter" parameterid="par_url_ping_cpe"/>
                  </arg>
                  <arg type="path" id="executionId">
                      <value type="parameter" parameterid="par_executionid_cm"/>
                  </arg>
                  <arg type="header" id="Content-Type">
                      <value type="value"><content>application/json</content></value>
                  </arg>
              </args>
              <retry>
                  <expr type="or">
                      <reference type="check" id="chk_ping_err_code_notok_cm"/>
                      <reference type="check" id="chk_ping_http_code_eq_204_cm"/>
                  </expr>
              </retry>
              <response type="json"/>
          </endpoint>

      </endpoints>
    </troubleshoot>
    <action>
      <endpoints>

        <!-- getIPAddress contra GSIP si tenemos data_login, GetServByRemoteId si no tenemos data_login para el flujo de certificacion-->
        <endpoint type="ws" id="Obtener_IP_flujo_cert" verbose="true" lazy="true" connecttimeout="20000" requesttimeout="1000"><!--CCA20220601 - Cambio en el valor de requesttimeout-->
          <method>POST</method>
          <url ignoreSSL="true">{url}/ResourceInventoryREST/resourceInventory/search</url>
          <args>
            <arg type="path" id="url">
              <value type="parameter" parameterid="par_url_bus"/>
            </arg>
            <arg type="header" id="Accept">
              <value type="value"><content>application/json</content></value>
            </arg>
            <arg type="header" id="X-IBM-Client-Id">
              <value type="parameter" parameterid="par_bus_clientid"/>
            </arg>
            <arg type="header" id="X-VF-API-Process">
              <value type="value"><content>Obtener_IP</content></value>
            </arg>
            <arg type="header" id="Content-Type">
              <value type="value"><content>application/json</content></value>
            </arg>
           </args>
          <body contenttype="text">
            <text>
              <value type="value"><content><![CDATA[{"queries":[{"query":"$.id[schemeName='ServiceId'].value=]]></content></value>
              <value type="parameter" parameterid="par_inet_data_login" role="front"/>
              <value type="value"><content><![CDATA["},{"query":"$.roles.owner.category[listName='TipoCliente'].value=]]></content></value>
              <value type="parameter" parameterid="par_client_type"/><!--tener en cuenta que este valor depende de la tecnologia... validar luego que se pueda reutilizar con las nuevas tecnologias que implementemos-->
              <!--<value type="parameter" parameterid="par_radius_datalogin"/>-->
              <value type="value"><content><![CDATA["},{"query":"$.roles.owner.category[listName='Remote_Id'].value=]]></content></value>
              <value type="parameter" parameterid="par_invent_remoteid" role="front"/>
              <value type="value"><content><![CDATA["}]}]]></content></value>
            </text>
          </body>
          <response type="json"/>
        </endpoint>
      </endpoints>
    </action>
	</connectivity>
  
	<parameters>
        <parameter id="par_executionid" techview="never">
            <contents>
                <value type="parameter" role="inet">par_executionid_role</value>
            </contents>
        </parameter>
        <parameter id="par_executionid_cm" techview="never">
            <contents>
                <value type="parameter" role="inet">par_executionid_cm_role</value>
            </contents>
        </parameter>
        <parameter id="par_url_bus" techview="never">
                <contents>
                	<value type="lookup">url_list</value>
                </contents>
                <sequence>
                  <operation type="row_delimiter">
                  	<args><arg><value type="value">;</value></arg></args>
                  </operation>
                  <operation type="column_delimiter">
                  	<args><arg><value type="value">,</value></arg></args>
                  </operation>
                  <operation type="column_index">
                  	<args><arg><value type="value">1</value></arg></args>
                  </operation>
                  <operation type="column_equal">
                  	<args><arg><value type="value">url_bus</value></arg></args>
                  </operation>
                  <operation type="column_selector">
                  	<args><arg><value type="value">2</value></arg></args>
                  </operation>
                </sequence>
            </parameter>

            <parameter id="par_bus_clientid" techview="never">
                <contents>
                	<value type="lookup">url_list</value>
                </contents>
                <sequence>
                  <operation type="row_delimiter">
                  	<args><arg><value type="value">;</value></arg></args>
                  </operation>
                  <operation type="column_delimiter">
                  	<args><arg><value type="value">,</value></arg></args>
                  </operation>
                  <operation type="column_index">
                  	<args><arg><value type="value">1</value></arg></args>
                  </operation>
                  <operation type="column_equal">
                  	<args><arg><value type="value">url_bus</value></arg></args>
                  </operation>
                  <operation type="column_selector">
                  	<args><arg><value type="value">3</value></arg></args>
                  </operation>
                </sequence>
            </parameter>

            <parameter id="par_client_type" type="value" techview="never">
                <contents>
                	<value type="value">PPP</value>
                </contents>
            </parameter>

            <parameter id="par_client_type_cm" type="value" techview="never">
                <contents>
                  <value type="value">DHCP</value>
                </contents>
            </parameter>

            <parameter id="par_ip_bras" type="value" techview="never">
                <contents>
                	<value type="value"></value>
                </contents>
            </parameter>

            <parameter id="par_url_ping_cpe" type="value" techview="never">
                <contents>
                  <value type="lookup">url_list</value>
                </contents>
                <sequence>
                  <operation type="row_delimiter">
                    <args><arg><value type="value">;</value></arg></args>
                  </operation>
                  <operation type="column_delimiter">
                    <args><arg><value type="value">,</value></arg></args>
                  </operation>
                  <operation type="column_index">
                    <args><arg><value type="value">1</value></arg></args>
                  </operation>
                  <operation type="column_equal">
                    <args><arg><value type="value">url_ping_cpe</value></arg></args>
                  </operation>
                  <operation type="column_selector">
                    <args><arg><value type="value">2</value></arg></args>
                  </operation>
                </sequence>
            </parameter>

            <parameter id="par_usuario_lookup" type="value" techview="never">
                <contents>
                  <value type="lookup">ping_cpe_pre</value>
                </contents>
                <sequence>
                  <operation type="row_delimiter">
                    <args><arg><value type="value">;</value></arg></args>
                  </operation>
                  <operation type="column_delimiter">
                    <args><arg><value type="value">,</value></arg></args>
                  </operation>
                  <operation type="column_index">
                    <args><arg><value type="value">1</value></arg></args>
                  </operation>
                  <operation type="column_equal">
                    <args><arg><value type="value">user</value></arg></args>
                  </operation>
                  <operation type="column_selector">
                    <args><arg><value type="value">2</value></arg></args>
                  </operation>
                </sequence>
            </parameter>

            <parameter id="par_pass_lookup" type="value" techview="never">
                <contents>
                  <value type="lookup">ping_cpe_pre</value>
                </contents>
                <sequence>
                  <operation type="row_delimiter">
                    <args><arg><value type="value">;</value></arg></args>
                  </operation>
                  <operation type="column_delimiter">
                    <args><arg><value type="value">,</value></arg></args>
                  </operation>
                  <operation type="column_index">
                    <args><arg><value type="value">1</value></arg></args>
                  </operation>
                  <operation type="column_equal">
                    <args><arg><value type="value">pass</value></arg></args>
                  </operation>
                  <operation type="column_selector">
                    <args><arg><value type="value">2</value></arg></args>
                  </operation>
                </sequence>
            </parameter>

            <parameter id="par_host_lookup" type="value" techview="never">
                <contents>
                  <value type="lookup">ping_cpe_pre</value>
                </contents>
                <sequence>
                  <operation type="row_delimiter">
                    <args><arg><value type="value">;</value></arg></args>
                  </operation>
                  <operation type="column_delimiter">
                    <args><arg><value type="value">,</value></arg></args>
                  </operation>
                  <operation type="column_index">
                    <args><arg><value type="value">1</value></arg></args>
                  </operation>
                  <operation type="column_equal">
                    <args><arg><value type="value">host</value></arg></args>
                  </operation>
                  <operation type="column_selector">
                    <args><arg><value type="value">2</value></arg></args>
                  </operation>
                </sequence>
            </parameter>

            <parameter id="par_port_lookup" type="value" techview="never">
                <contents>
                  <value type="lookup">ping_cpe_pre</value>
                </contents>
                <sequence>
                  <operation type="row_delimiter">
                    <args><arg><value type="value">;</value></arg></args>
                  </operation>
                  <operation type="column_delimiter">
                    <args><arg><value type="value">,</value></arg></args>
                  </operation>
                  <operation type="column_index">
                    <args><arg><value type="value">1</value></arg></args>
                  </operation>
                  <operation type="column_equal">
                    <args><arg><value type="value">port</value></arg></args>
                  </operation>
                  <operation type="column_selector">
                    <args><arg><value type="value">2</value></arg></args>
                  </operation>
                </sequence>
            </parameter>

            <parameter id="par_intentos_lookup_real" type="value" techview="never">
                <contents>
                  <value type="lookup">ping_cpe_pre</value>
                </contents>
                <sequence>
                  <operation type="row_delimiter">
                    <args><arg><value type="value">;</value></arg></args>
                  </operation>
                  <operation type="column_delimiter">
                    <args><arg><value type="value">,</value></arg></args>
                  </operation>
                  <operation type="column_index">
                    <args><arg><value type="value">1</value></arg></args>
                  </operation>
                  <operation type="column_equal">
                    <args><arg><value type="value">intentos</value></arg></args>
                  </operation>
                  <operation type="column_selector">
                    <args><arg><value type="value">2</value></arg></args>
                  </operation>
                </sequence>
            </parameter>

            <parameter id="par_intentos_lookup" type="value" techview="never">
                <contents>
                  <value type="value"> </value>
                  <value type="parameter">par_intentos_lookup_real</value>
                </contents>
            </parameter>

            <parameter id="par_ping_err_code_is" type="value" techview="never">
                <contents>
                    <value type="infosource_value" endpointid="Ping_cpe">_errCode</value>
                </contents>
            </parameter>

            <parameter id="par_ping_http_code_is" type="value" techview="never">
                <contents>
                    <value type="infosource_value" endpointid="Ping_cpe">_httpCode</value>
                </contents>
            </parameter>

            <parameter id="par_ping_err_code_is_cm" type="value" techview="never">
                <contents>
                    <value type="infosource_value" endpointid="Ping_cpe_cm">_errCode</value>
                </contents>
            </parameter>

            <parameter id="par_ping_http_code_is_cm" type="value" techview="never">
                <contents>
                    <value type="infosource_value" endpointid="Ping_cpe_cm">_httpCode</value>
                </contents>
            </parameter>
	    </parameters>

	<checks>
        <!--Checks de ping_cpe-->
        <check id="chk_ping_err_code_notok">
            <parameter>par_ping_err_code_is</parameter>
            <result>
                <expr type="and">
                    <operation type="not_equal">
                        <args><arg><value type="value">0</value></arg></args>
                    </operation>
                </expr>
            </result>
        </check>
        <check id="chk_ping_http_code_eq_204">
            <parameter>par_ping_http_code_is</parameter>
            <result>
                <expr type="and">
                    <operation type="equal">
                        <args><arg><value type="value">204</value></arg></args>
                    </operation>
                </expr>
            </result>
        </check>

        <!--Checks de ping_cpe_cm-->
        <check id="chk_ping_err_code_notok_cm">
            <parameter>par_ping_err_code_is_cm</parameter>
            <result>
                <expr type="and">
                    <operation type="not_equal">
                        <args><arg><value type="value">0</value></arg></args>
                    </operation>
                </expr>
            </result>
        </check>
        <check id="chk_ping_http_code_eq_204_cm">
            <parameter>par_ping_http_code_is_cm</parameter>
            <result>
                <expr type="and">
                    <operation type="equal">
                        <args><arg><value type="value">204</value></arg></args>
                    </operation>
                </expr>
            </result>
        </check>
	</checks>
</template>