<?xml version='1.0' encoding='UTF-8'?>
<template infosource="device2" version="1.1" type="infosource">

<!-- ############################################################################################## --> 
<!-- Version 1.1                                                                                    -->
<!--  - se separa la parte de leia Databroker del resto de llamadas TV                              -->
<!-- Version 1.0                                                                                    -->
<!--  - Version de partida                                                                          -->
<!-- ############################################################################################## -->

	<connectivity>
		<troubleshoot>

	    	<datalinks>
            </datalinks>

			<endpoints>
				<endpoint id="TV_STB_Details" type="ws" verbose="true" lazy="true" connecttimeout="20000" requesttimeout="7000"><!--CCA20220531 - Cambia el valor de requesttimeout-->
					<method>GET</method>
					<url ignoreSSL="true">{url}/ResourceConfigurationREST/resourceConfiguration/{device_id}?</url>
					<args>
						<arg type="path" id="url">
							<value type="parameter" parameterid="par_url_bus"/>
						</arg>
						<arg type="path" id="device_id">
							<value type="parameter" parameterid="par_device_id"/>
						</arg>
						<arg type="header" id="Accept">
							<value type="value"><content>application/json</content></value>
						</arg>
						<arg type="header" id="X-IBM-Client-Id">
							<value type="parameter" parameterid="par_bus_clientid"/>
						</arg>
						<arg type="header" id="X-VF-API-Process">
							<value type="value"><content>TV_STB_Details</content></value>
						</arg>
						<!--<arg type="header" id="X-VF-API-Mock">
							<value type="value"><content>001</content></value>
						</arg>-->
						<arg type="header" id="Content-Type">
							<value type="value"><content>application/json</content></value>
						</arg>
						<!--<arg type="header" id="X-VF-API-Debug">
							<value type="value"><content>true</content></value>
						</arg>-->
					</args>
					<response type="json"/>
				</endpoint>
			</endpoints>
	    </troubleshoot>

	    <action>

	    	<datalinks>
            </datalinks>

	    	<endpoints connecttimeout="20000" requesttimeout="20000">
	    	</endpoints>
	    </action>

	</connectivity>

	<parameters>

		<!--ENDPOINT REQUEST PARAMS-->
		<parameter id="par_url_bus" type="value" techview="never">
			<contents>
				<value type="lookup">url_list</value>
			</contents>
			<sequence>
				<operation type="row_delimiter">
					<args><arg><value type="value">;</value></arg></args>
				</operation>
				<operation type="column_delimiter">
					<args><arg><value type="value">,</value></arg></args>
				</operation>
				<operation type="column_index">
					<args><arg><value type="value">1</value></arg></args>
				</operation>
				<operation type="column_equal">
					<args><arg><value type="value">url_bus</value></arg></args>
				</operation>
				<operation type="column_selector">
					<args><arg><value type="value">2</value></arg></args>
				</operation>
			</sequence>
		</parameter>

		<parameter id="par_bus_clientid" type="value" techview="never">
			<contents>
				<value type="lookup">url_list</value>
			</contents>
			<sequence>
					<operation type="row_delimiter">
						<args><arg><value type="value">;</value></arg></args>
					</operation>
					<operation type="column_delimiter">
						<args><arg><value type="value">,</value></arg></args>
					</operation>
					<operation type="column_index">
						<args><arg><value type="value">1</value></arg></args>
					</operation>
					<operation type="column_equal">
						<args><arg><value type="value">url_bus</value></arg></args>
					</operation>
					<operation type="column_selector">
						<args><arg><value type="value">3</value></arg></args>
					</operation>
			</sequence>
		</parameter>

        <parameter id="par_url_schaman" type="value" techview="never"><!-- -->
            <contents>
                <value type="lookup">url_list</value>
            </contents>
            <sequence>
                <operation type="row_delimiter">
                    <args><arg><value type="value">;</value></arg></args>
                </operation>
                <operation type="column_delimiter">
                    <args><arg><value type="value">,</value></arg></args>
                </operation>
                <operation type="column_index">
                    <args><arg><value type="value">1</value></arg></args>
                </operation>
                <operation type="column_equal">
                    <args><arg><value type="value">url_schaman_mailbox</value></arg></args>
                </operation>
                <operation type="column_selector">
                    <args><arg><value type="value">2</value></arg></args>
                </operation>
            </sequence>
        </parameter>

        <parameter id="par_schaman_authorization" type="value" techview="never"><!-- -->
            <contents>
                <value type="lookup">url_list</value>
            </contents>
            <sequence>
                <operation type="row_delimiter">
                    <args><arg><value type="value">;</value></arg></args>
                </operation>
                <operation type="column_delimiter">
                    <args><arg><value type="value">,</value></arg></args>
                </operation>
                <operation type="column_index">
                    <args><arg><value type="value">1</value></arg></args>
                </operation>
                <operation type="column_equal">
                    <args><arg><value type="value">url_schaman_mailbox</value></arg></args>
                </operation>
                <operation type="column_selector">
                    <args><arg><value type="value">3</value></arg></args>
                </operation>
            </sequence>
        </parameter>

        <parameter id="par_td_version" type="value" techview="never">
            <contents>
                <value type="value">1</value>
            </contents>
        </parameter>

		<parameter id="par_device_id" type="value" techview="never">
			<contents>
				<!--<value type="value">618372207914</value>-->
				<value type="parameter" role="tvplatform">par_tvdevice_device_2</value>
			</contents>
		</parameter>


	</parameters>

	<checks>
	</checks>

</template>
