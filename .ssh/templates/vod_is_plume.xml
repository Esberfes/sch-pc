<?xml version='1.0' encoding='UTF-8'?>
<template infosource="plume" version="1.0" type="infosource">

<!-- ############################################################################################## --> 
<!-- Version 1.0                                                                					-->
<!--  - Version de partida                                                                          -->
<!-- ############################################################################################## -->

<connectivity>
    <troubleshoot>
        <endpoints>

            <!-- DVA20240626 - Certificacion superwifi - getLocationQoE_mule - INICIO -->
            <endpoint type="ws" id="getLocationQoE_mule" verbose="true" lazy="true" connecttimeout="4000" requesttimeout="3000">
                <method>GET</method>
                <url ignoreSSL="true">{url}p-service-test-management-pprd/api/serviceTest</url>
                <!-- <url ignoreSSL="true">https://run.mocky.io/v3/af0554a9-df56-436e-8ea3-e2946e51b599</url> -->
                <!-- PARA BORRAR EL MOCK <url ignoreSSL="true">https://designer.mocky.io/manage/delete/af0554a9-df56-436e-8ea3-e2946e51b599/MiDMe1wZfOCrr8IIgnRFt1n8y8XGu04qGZYF</url> -->
                <args>
                    <arg type="path" id="url">
                        <value type="parameter" parameterid="par_url_mulesoft"/>
                    </arg>
                    <arg type="query" id="$.externalIdentifier[?(@.name==&apos;customerId&apos;)].value">
                        <value type="parameter" parameterid="par_superwifi_customer_id" role="front"/>
                    </arg>
                    <arg type="query" id="$.externalIdentifier[?(@.name==&apos;locationId&apos;)].value">
                        <value type="parameter" parameterid="par_superwifi_location_id" role="front"/>
                    </arg>
                    <!-- <arg type="query" id="$.externalIdentifier[?(@.name==&apos;customerId&apos;)].value">
                        <value type="value"><content>65b288804a5fe8000a501b91</content></value>
                    </arg>
                    <arg type="query" id="$.externalIdentifier[?(@.name==&apos;locationId&apos;)].value">
                        <value type="value"><content>65b288804a5fe8000a501b93</content></value>
                    </arg> -->
                    <arg type="query" id="$.name">
                        <value type="value"><content>getLocationQoE</content></value>
                    </arg>
                    <arg type="header" id="X-VF-Origin-System">
                        <value type="value"><content>SC</content></value>
                      </arg>
                    <arg type="header" id="X-VF-API-Process">
                        <value type="value"><content>getLocationQoE</content></value>
                    </arg>
                    <arg type="header" id="client_id">
                        <value type="parameter" parameterid="par_mulesoft_clientid"/>
                      </arg>
                    <arg type="header" id="client_secret">
                        <value type="parameter" parameterid="par_mulesoft_client_secret"/>
                    </arg>
                    <arg type="header" id="Content-Type">
                        <value type="value"><content>application/json</content></value>
                    </arg>
                </args>
                <response type="json"/>
            </endpoint>
            <!-- DVA20240626 - Certificacion superwifi - getLocationQoE_mule - FIN -->

            <!--API GetLocationStateAndConfig-->
            <endpoint type="ws" id="GetLocationStateAndConfig" verbose="true" lazy="true" connecttimeout="5000" requesttimeout="40000">
                <method>POST</method>
                <!-- <url ignoreSSL="true">https://run.mocky.io/v3/7503dbdd-364a-4595-9b56-0f32dc4f64c0</url> -->
                <url ignoreSSL="true">{url}ResourceConfigurationSOAP11/GetResourceConfigurationList</url>
                <args>
                    <arg type="path" id="url">
                        <value type="parameter" parameterid="par_url_bus"/>
                    </arg>
                    <arg type="header" id="Accept">
                        <value type="value"><content>application/xml</content></value>
                    </arg>
                    <arg type="header" id="X-IBM-Client-Id">
                        <value type="parameter" parameterid="par_bus_clientid"/>
                    </arg>
                    <arg type="header" id="X-VF-API-Process">
                        <value type="value"><content>GetLocationStateAndConfig</content></value>
                    </arg>
                    <!-- <arg type="header" id="X-VF-API-Mock">
                        <value type="value"><content>001</content></value>
                    </arg> -->
                    <arg type="header" id="Content-Type">
                        <value type="value"><content>application/xml</content></value>
                    </arg>
                </args>
                <body contenttype="text">
                    <text>
                        <value type="value"><content><![CDATA[
                        <soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v1="http://group.vodafone.com/contract/vho/header/v1" xmlns:v11="http://group.vodafone.com/schema/vbm/resource/resource-configuration/v1" xmlns:v12="http://group.vodafone.com/schema/common/v1">
                    <soap:Header/>
                    <soap:Body>
                        <v11:GetResourceConfigurationListVBMRequest>
                            <v12:Criteria>
                                <v12:QueryExpression>
                                <v12:QueryExpression>
                                    <v12:ValueExpression Path="/ResourceConfigurationVBO/Roles/Requestor/IDs/ID[@schemeName='CustomerIDPlume']" QueryOperatorCode="EQUALS">
                                        <v12:Value>]]></content></value>
                                            <value type="parameter" parameterid="par_superwifi_customer_id" role="front"/>
                                            <value type="value"><content><![CDATA[</v12:Value>
                                    </v12:ValueExpression>
                                    <v12:ValueExpression Path="/ResourceConfigurationVBO/Parts/Resources/Resource/Location/IDs/ID[@schemeName='LocationID']" QueryOperatorCode="EQUALS">
                                        <v12:Value>]]></content></value>
                                            <value type="parameter" parameterid="par_superwifi_location_id" role="front"/>
                                            <value type="value"><content><![CDATA[</v12:Value>
                                    </v12:ValueExpression>
                                </v12:QueryExpression>
                                </v12:QueryExpression>
                            </v12:Criteria>
                            <v12:Identification>
                                <v12:Categories>
                                <v12:Category name="Process">GetLocationStateAndConfig</v12:Category>
                                </v12:Categories>
                            </v12:Identification>
                        </v11:GetResourceConfigurationListVBMRequest>
                    </soap:Body>
                    </soap:Envelope>
                        ]]></content></value>           
                    </text>
                </body>
                <response type="xml2json1"/>
            </endpoint>

            <!--API GetLocationSummary-->
            <endpoint type="ws" id="GetLocationSummary" verbose="true" lazy="true" connecttimeout="5000" requesttimeout="15000">
                <method>POST</method>
                <!-- <url ignoreSSL="true">https://run.mocky.io/v3/106ce829-4e4a-4521-a253-4a46944074d6</url> -->
                <url ignoreSSL="true">{url}ResourceConfigurationSOAP11/GetResourceConfigurationList</url>
                <args>
                    <arg type="path" id="url">
                        <value type="parameter" parameterid="par_url_bus"/>
                    </arg>
                    <arg type="header" id="Accept">
                        <value type="value"><content>application/xml</content></value>
                    </arg>
                    <arg type="header" id="X-IBM-Client-Id">
                        <value type="parameter" parameterid="par_bus_clientid"/>
                    </arg>
                    <arg type="header" id="X-VF-API-Process">
                        <value type="value"><content>GetLocationSummary</content></value>
                    </arg>
                    <!-- <arg type="header" id="X-VF-API-Mock">
                        <value type="value"><content>001</content></value>
                    </arg> -->
                    <arg type="header" id="Content-Type">
                        <value type="value"><content>application/xml</content></value>
                    </arg>
                </args>
                <body contenttype="text">
                    <text>
                        <value type="value"><content><![CDATA[
                    <soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
                    <soap:Header/>
                    <soap:Body><v11:GetResourceConfigurationListVBMRequest xmlns:v1="http://group.vodafone.com/contract/vho/header/v1" xmlns:v11="http://group.vodafone.com/schema/vbm/resource/resource-configuration/v1" xmlns:v12="http://group.vodafone.com/schema/common/v1">
                        <v12:Criteria>
                            <v12:QueryExpression>
                            <v12:QueryExpression>
                                <v12:ValueExpression Path="/ResourceConfigurationVBO/Roles/Requestor/IDs/ID[@schemeName='CustomerIDPlume']">
                                    <v12:Value>]]></content></value>
                                            <value type="parameter" parameterid="par_superwifi_customer_id" role="front"/>
                                            <value type="value"><content><![CDATA[</v12:Value>
                                </v12:ValueExpression>
                                <v12:ValueExpression Path="/ResourceConfigurationVBO/Parts/Resources/Resource/Location/IDs/ID[@schemeName='LocationID']">
                                    <v12:Value>]]></content></value>
                                            <value type="parameter" parameterid="par_superwifi_location_id" role="front"/>
                                            <value type="value"><content><![CDATA[</v12:Value>
                                </v12:ValueExpression>
                            </v12:QueryExpression>
                            </v12:QueryExpression>
                        </v12:Criteria>
                        <v12:Identification>
                            <v12:Categories>
                            <v12:Category name="Process">GetLocationSummary</v12:Category>
                            </v12:Categories>
                        </v12:Identification>
                    </v11:GetResourceConfigurationListVBMRequest></soap:Body>
                </soap:Envelope>
                    ]]></content></value>           
                    </text>
                </body>
                <response type="xml2json1"/>
            </endpoint>

            <!--API GetInventoriedSuperWifiDevicesPlume-->
            <endpoint type="ws" id="GetInventoriedSuperWifiDevicesPlume" verbose="true" lazy="true" connecttimeout="5000" requesttimeout="40000">
                <method>POST</method>
                <!-- <url ignoreSSL="true">https://run.mocky.io/v3/8e40bfa0-f33b-49b5-8f89-8960240c706e</url> -->
                <url ignoreSSL="true">{url}ResourceInventorySOAP11/GetResourceInventoryList</url>
                <args>
                    <arg type="path" id="url">
                        <value type="parameter" parameterid="par_url_bus"/>
                    </arg>
                    <arg type="header" id="Accept">
                        <value type="value"><content>application/xml</content></value>
                    </arg>
                    <arg type="header" id="X-IBM-Client-Id">
                        <value type="parameter" parameterid="par_bus_clientid"/>
                    </arg>
                    <arg type="header" id="X-VF-API-Process">
                        <value type="value"><content>GetInventoriedSuperWifiDevicesPlume</content></value>
                    </arg>
                    <!-- <arg type="header" id="X-VF-API-Mock">
                        <value type="value"><content>001</content></value>
                    </arg> -->
                    <arg type="header" id="Content-Type">
                        <value type="value"><content>application/xml</content></value>
                    </arg>
                </args>
                <body contenttype="text">
                    <text>
                        <value type="value"><content><![CDATA[
                        <soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v1="http://group.vodafone.com/contract/vho/header/v1" xmlns:v11="http://group.vodafone.com/schema/common/v1" xmlns:urn="urn:un:unece:uncefact:documentation:standard:CoreComponentType:2" xmlns:v12="http://group.vodafone.com/schema/vbm/resource/resource-inventory/v1">
                        <soap:Header/>
                        <soap:Body>
                            <v12:GetResourceInventoryListVBMRequest xmlns:v1="http://group.vodafone.com/contract/vho/header/v1" xmlns:v11="http://group.vodafone.com/schema/common/v1" xmlns:urn="urn:un:unece:uncefact:documentation:standard:CoreComponentType:2" xmlns:v12="http://group.vodafone.com/schema/vbm/resource/resource-inventory/v1">
                                <v11:Criteria>
                                    <v11:QueryExpression>
                                        <v11:QueryExpression>
                                            <v11:ValueExpression Path="/ResourceInventoryVBO/RelatedParties/RelatedParty[Role='Individual']/IDs/ID[@schemeName='CustomerIDPlume']" QueryOperatorCode="EQUALS">
                                                <v11:Value>]]></content></value>
                                                    <value type="parameter" parameterid="par_superwifi_customer_id" role="front"/>
                                                    <value type="value"><content><![CDATA[</v11:Value>
                                            </v11:ValueExpression>
                                            <v11:ValueExpression Path="/ResourceInventoryVBO/RelatedParties/RelatedParty[Role='Individual']/IDs/ID[@schemeName='SiteID']" QueryOperatorCode="EQUALS">
                                                <v11:Value>]]></content></value>
                                                    <value type="parameter" parameterid="par_client_id" role="front"/>
                                                    <value type="value"><content><![CDATA[</v11:Value>
                                            </v11:ValueExpression>
                                            <v11:ValueExpression Path="/ResourceInventoryVBO/IDs/ID[@schemeName='LocationID']" QueryOperatorCode="EQUALS">
                                                <v11:Value>]]></content></value>
                                                    <value type="parameter" parameterid="par_superwifi_location_id" role="front"/>
                                                    <value type="value"><content><![CDATA[</v11:Value>
                                            </v11:ValueExpression>
                                        </v11:QueryExpression>
                                    </v11:QueryExpression>
                                </v11:Criteria>
                                <v11:Identification>
                                    <v11:Categories>
                                        <v11:Category name="Process">GetInventoriedSuperWifiDevicesPlume</v11:Category>
                                    </v11:Categories>
                                </v11:Identification>
                            </v12:GetResourceInventoryListVBMRequest>
                        </soap:Body>
                    </soap:Envelope>
                    ]]></content></value>           
                    </text>
                </body>
                <response type="xml2json1"/>
            </endpoint>

            <!--API GetLocationQoE-->
            <endpoint type="ws" id="GetLocationQoE" verbose="true" lazy="true" connecttimeout="5000" requesttimeout="40000">
                <method>POST</method>
                <!-- <url ignoreSSL="true">https://run.mocky.io/v3/3e87c932-b8d1-4a67-9117-4772e76e1fd5</url> -->
                <url ignoreSSL="true">{url}ServiceTestSOAP11/GetServiceTestList</url>
                <args>
                    <arg type="path" id="url">
                        <value type="parameter" parameterid="par_url_bus"/>
                    </arg>
                    <arg type="header" id="Accept">
                        <value type="value"><content>application/xml</content></value>
                    </arg>
                    <arg type="header" id="X-IBM-Client-Id">
                        <value type="parameter" parameterid="par_bus_clientid"/>
                    </arg>
                    <arg type="header" id="X-VF-API-Process">
                        <value type="value"><content>GetLocationQoE</content></value>
                    </arg>
                    <!-- <arg type="header" id="X-VF-API-Mock">
                        <value type="value"><content>001</content></value>
                    </arg> -->
                    <arg type="header" id="Content-Type">
                        <value type="value"><content>application/xml</content></value>
                    </arg>
                </args>
                <body contenttype="text">
                    <text>
                        <value type="value"><content><![CDATA[
                        <soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
                        <soap:Header/>
                        <soap:Body><v2:GetServiceTestListVBMRequest xmlns:v1="http://group.vodafone.com/contract/vho/header/v1" xmlns:v11="http://group.vodafone.com/schema/common/v1" xmlns:urn="urn:un:unece:uncefact:documentation:standard:CoreComponentType:2" xmlns:v2="http://group.vodafone.com/schema/vbm/service/service-test/v2">
                            <v11:Criteria>
                                <v11:QueryExpression>
                                <v11:QueryExpression>
                                    <v11:ValueExpression Path="/ServiceTestVBO/RelatedParties/RelatedParty[Role='Individual']/IDs/ID[@schemeName='CustomerIDPlume']">
                                        <v11:Value>]]></content></value>
                                            <value type="parameter" parameterid="par_superwifi_customer_id" role="front"/>
                                            <value type="value"><content><![CDATA[</v11:Value>
                                    </v11:ValueExpression>
                                    <v11:ValueExpression Path="/ServiceTestVBO/ServiceTestLocation/ID[@schemeName='LocationID']">
                                        <v11:Value>]]></content></value>
                                            <value type="parameter" parameterid="par_superwifi_location_id" role="front"/>
                                            <value type="value"><content><![CDATA[</v11:Value>
                                    </v11:ValueExpression>
                                </v11:QueryExpression>
                                </v11:QueryExpression>
                            </v11:Criteria>
                            <v11:Identification>
                                <v11:Categories>
                                <v11:Category name="Process">GetLocationQoE</v11:Category>
                                </v11:Categories>
                            </v11:Identification>
                        </v2:GetServiceTestListVBMRequest></soap:Body>
                    </soap:Envelope>
                    ]]></content></value>           
                    </text>
                </body>
                <response type="xml2json1"/>
            </endpoint>

            <!--API GetFirmwareUpgradeStatus-->
            <endpoint type="ws" id="GetFirmwareUpgradeStatus" verbose="true" lazy="true" connecttimeout="5000" requesttimeout="40000">
                <method>POST</method>
                <!-- <url ignoreSSL="true">https://run.mocky.io/v3/6c9ddae2-12ac-4cce-b430-ba900f02cabf</url> -->
                <url ignoreSSL="true">{url}ServiceTestSOAP11/GetServiceTestList</url>
                <args>
                    <arg type="path" id="url">
                        <value type="parameter" parameterid="par_url_bus"/>
                    </arg>
                    <arg type="header" id="Accept">
                        <value type="value"><content>application/xml</content></value>
                    </arg>
                    <arg type="header" id="X-IBM-Client-Id">
                        <value type="parameter" parameterid="par_bus_clientid"/>
                    </arg>
                    <arg type="header" id="X-VF-API-Process">
                        <value type="value"><content>GetFirmwareUpgradeStatus</content></value>
                    </arg>
                    <!-- <arg type="header" id="X-VF-API-Mock">
                        <value type="value"><content>001</content></value>
                    </arg> -->
                    <arg type="header" id="Content-Type">
                        <value type="value"><content>application/xml</content></value>
                    </arg>
                </args>
                <body contenttype="text">
                    <text>
                        <value type="value"><content><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
                        <soap:Header/>
                        <soap:Body><v2:GetServiceTestListVBMRequest xmlns:v1="http://group.vodafone.com/contract/vho/header/v1" xmlns:v11="http://group.vodafone.com/schema/common/v1" xmlns:urn="urn:un:unece:uncefact:documentation:standard:CoreComponentType:2" xmlns:v2="http://group.vodafone.com/schema/vbm/service/service-test/v2">
                            <v11:Criteria>
                                <v11:QueryExpression>
                                <v11:QueryExpression>
                                    <v11:ValueExpression Path="/ServiceTestVBO/RelatedParties/RelatedParty[Role='Individual']/IDs/ID[@schemeName='CustomerIDPlume']">
                                        <v11:Value>]]></content></value>
                                            <value type="parameter" parameterid="par_superwifi_customer_id" role="front"/>
                                            <value type="value"><content><![CDATA[</v11:Value>
                                    </v11:ValueExpression>
                                    <v11:ValueExpression Path="/ServiceTestVBO/ServiceTestLocation/ID[@schemeName='LocationID']">
                                        <v11:Value>]]></content></value>
                                            <value type="parameter" parameterid="par_superwifi_location_id" role="front"/>
                                            <value type="value"><content><![CDATA[</v11:Value>
                                    </v11:ValueExpression>
                                </v11:QueryExpression>
                                </v11:QueryExpression>
                            </v11:Criteria>
                            <v11:Identification>
                                <v11:Categories>
                                <v11:Category name="Process">GetFirmwareUpgradeStatus</v11:Category>
                                </v11:Categories>
                            </v11:Identification>
                        </v2:GetServiceTestListVBMRequest></soap:Body>
                    </soap:Envelope>
                    ]]></content></value>           
                    </text>
                </body>
                <response type="xml2json1"/>
            </endpoint>

        </endpoints>
    </troubleshoot>
    <action>    
        <endpoints connecttimeout="300000" requesttimeout="20000">
        </endpoints>             	
    </action>
</connectivity>



<parameters>
    <parameter id="par_url_bus" techview="never">
        <contents>
            <value type="lookup">url_list</value>
        </contents>
        <sequence>
            <operation type="row_delimiter">
            <args><arg><value type="value">;</value></arg></args>
            </operation>
            <operation type="column_delimiter">
            <args><arg><value type="value">,</value></arg></args>
            </operation>
            <operation type="column_index">
            <args><arg><value type="value">1</value></arg></args>
            </operation>
            <operation type="column_equal">
            <args><arg><value type="value">url_bus</value></arg></args>
            </operation>
            <operation type="column_selector">
            <args><arg><value type="value">2</value></arg></args>
            </operation>
        </sequence>
    </parameter>

    <parameter id="par_bus_clientid" techview="never">
        <contents>
            <value type="lookup">url_list</value>
        </contents>
        <sequence>
            <operation type="row_delimiter">
            <args><arg><value type="value">;</value></arg></args>
            </operation>
            <operation type="column_delimiter">
            <args><arg><value type="value">,</value></arg></args>
            </operation>
            <operation type="column_index">
            <args><arg><value type="value">1</value></arg></args>
            </operation>
            <operation type="column_equal">
            <args><arg><value type="value">url_bus</value></arg></args>
            </operation>
            <operation type="column_selector">
            <args><arg><value type="value">3</value></arg></args>
            </operation>
        </sequence>
    </parameter>

    <parameter id="par_client_id" type="value" name="ID Cliente">
        <contents>
            <value type="parameter" role="front">par_customer_crmid</value>
        </contents>
    </parameter>

     <!-- DVA20240626 - Certificacion superwifi - getLocationQoE_mule - INICIO -->
     <parameter id="par_url_mulesoft">
        <contents>
        <value type="lookup">url_list</value>
        </contents>
        <sequence>
        <operation type="row_delimiter">
            <args><arg><value type="value">;</value></arg></args>
        </operation>
        <operation type="column_delimiter">
            <args><arg><value type="value">,</value></arg></args>
        </operation>
        <operation type="column_index">
            <args><arg><value type="value">1</value></arg></args>
        </operation>
        <operation type="column_equal">
            <args><arg><value type="value">url_mulesoft</value></arg></args>
        </operation>
        <operation type="column_selector">
            <args><arg><value type="value">2</value></arg></args>
        </operation>
        </sequence>
    </parameter>

    <parameter id="par_mulesoft_header" type="table">
        <contents>
        <value type="lookup">auth_mulesoft</value>
        </contents>
        <sequence>
        <operation type="row_delimiter">
            <args><arg><value type="value">;</value></arg></args>
        </operation>
        <operation type="column_delimiter">
            <args><arg><value type="value">,</value></arg></args>
        </operation>
        </sequence>
    </parameter>

    <parameter id="par_mulesoft_clientid" type="value">
        <contents>
        <value type="parameter">par_mulesoft_header</value>
        </contents>
        <sequence>
        <operation type="column_selector">
            <args><arg><value type="value">1</value></arg></args>
        </operation>
        <operation type="first_row">
            <args><arg><value type="value">2</value></arg></args>
        </operation>
        </sequence>
    </parameter>

    <parameter id="par_mulesoft_client_secret" type="value">
        <contents>
        <value type="parameter">par_mulesoft_header</value>
        </contents>
        <sequence>
        <operation type="column_selector">
            <args><arg><value type="value">2</value></arg></args>
        </operation>
        <operation type="first_row">
            <args><arg><value type="value">2</value></arg></args>
        </operation>
        </sequence>
    </parameter>
    <!-- DVA20240626 - Certificacion superwifi - getLocationQoE_mule - FIN -->
            
    </parameters>
    <checks>
    </checks>
    
</template>